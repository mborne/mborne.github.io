{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Accueil","text":"<p>En chantier</p> <p>Je tente actuellement de rationaliser le nombre de d\u00e9p\u00f4t que j'entretiens et de g\u00e9rer plus efficacement les annexes des formations que je donne occasionnellement sur diff\u00e9rents th\u00e8mes (architecture logicielle, SI et DevOps).</p> <p>Voir historique servant actuellement de feuille de route.</p>"},{"location":"#cours-ensg-francais","title":"Cours ENSG (fran\u00e7ais)","text":"<ul> <li>mborne.github.io/cours-patron-conception - Les patrons de conception</li> <li>mborne.github.io/cours-archi-si-geo - Introduction \u00e0 l'architecture des SI</li> <li>mborne.github.io/cours-devops - Introduction \u00e0 la m\u00e9thode DevOps</li> </ul>"},{"location":"depots/","title":"Les d\u00e9p\u00f4ts","text":"<p>Cette page correspond \u00e0 un travail d'inventaire de mes d\u00e9p\u00f4ts personnels sur GitHub visant \u00e0 donner une vue d'ensemble.</p>"},{"location":"depots/#cours-ensg-francais","title":"Cours ENSG (fran\u00e7ais)","text":"<ul> <li>mborne/cours-devops<ul> <li>mborne.github.io/cours-devops - Introduction \u00e0 la m\u00e9thode DevOps</li> </ul> </li> <li>mborne/cours-patron-conception<ul> <li>mborne.github.io/cours-patron-conception - Les patrons de conception</li> </ul> </li> <li>mborne/cours-archi-si-geo<ul> <li>mborne.github.io/cours-archi-si-geo - Introduction \u00e0 l'architecture des SI</li> </ul> </li> </ul>"},{"location":"depots/#devops","title":"DevOps","text":""},{"location":"depots/#les-conteneurs","title":"Les conteneurs","text":"<p>Terrain de jeu pour docker ou Kubernetes :</p> <ul> <li>mborne/docker-devbox permet de configurer un environnement de d\u00e9veloppement avec Docker ou Kubernetes.</li> </ul> <p>Quelques exemples en fran\u00e7ais r\u00e9dig\u00e9s dans le cadre de cours-devops :</p> <ul> <li>mborne/docker-exemples pour d\u00e9couvrir docker</li> <li>mborne/k8s-exemples pour d\u00e9couvrir Kubernetes</li> <li>mborne/geostack-deploy - docker qui illustre le d\u00e9ploiement d'une stack PostGIS et GeoServer avec docker compose</li> </ul> <p>Quelques exemples d'images docker avec publi\u00e9es sur GitHub Container Registry (gcr.io) \u00e0 l'aide de GitHub actions :</p> <ul> <li>mborne/terminal permet une cr\u00e9er facilement un Pod de debug pour Kubernetes avec des outils de d\u00e9bogage (curl, wget, ping, ...) pr\u00e9-install\u00e9s.</li> <li>mborne/debug permet d'illustrer certaines fonctionnalit\u00e9s de Docker et Kubernetes (red\u00e9marrage automatiques, limites de m\u00e9moire, ...)</li> <li>mborne/docker-postgis \u00e9tend l'image PostgreSQL avec les extensions PostGIS, ogr_fwd et pgrouting (d\u00e9pr\u00e9ci\u00e9e, voir postgis/postgis et esgn/pgtuned)</li> <li>mborne/docker-jenkins - jenkins/jenkins:lts avec CLI docker sur le n\u0153ud ma\u00eetre (d\u00e9pr\u00e9ci\u00e9e)</li> <li>mborne/docker-geoserver - Construction et publication de l'image ghcr.io/mborne/geoserver (en fran\u00e7ais, document\u00e9e pour cours-devops)</li> </ul>"},{"location":"depots/#helm","title":"Helm","text":"<ul> <li>mborne/helm-charts quelques charts helm r\u00e9dig\u00e9 pour tester la publication sous forme d'image docker (OCI)</li> </ul>"},{"location":"depots/#opentofu-et-terraform","title":"OpenTofu et Terraform","text":"<p>Quelques exemples \u00e9crits pour d\u00e9buter avec Terraform :</p> <ul> <li>mborne/demo-opentofu-kind : D\u00e9ploiement de traefik, whoami et wordpress avec OpenTofu dans un cluster Kind.</li> <li>mborne/gke-playground - Construction d'une petite zone d'atterrissage avec Terraform avec Google Kubernetes Engine (GKE) (en fran\u00e7ais)</li> <li>mborne/gce-playground - Utilisation de Terraform et de Ansible avec Google Compute Engine (GCE) (en fran\u00e7ais)</li> </ul>"},{"location":"depots/#ansible-et-vagrant","title":"Ansible et Vagrant","text":"<p>Quelques r\u00f4les ansible principalement \u00e9crits pour exp\u00e9rimenter des d\u00e9ploiements sur Raspberry PI et sur une VM perso bon march\u00e9 (https://www.quadtreeworld.net/) :</p> <ul> <li>mborne/ansible-docker-ce permet de d\u00e9ployer docker (community edition) en suivant les recommandations de docker-bench-for-security.</li> <li>mborne/ansible-traefik permet de d\u00e9ployer traefik en tant que service systemd (pour \u00e9viter le partage de r\u00e9seau dans docker et faciliter le filtrage par IP)</li> <li>mborne/ansible-ufw permet de configurer Uncomplicated Firewall (UFW) avec ansible.</li> <li>mborne/ansible-nfs-server permet de d\u00e9ployer un serveur NFS (pour exp\u00e9rimenter le stockage ReadWriteMany (RWX) dans Kubernetes)</li> </ul> <p>Quelques playbooks ansible principalement \u00e9crits pour cours-devops :</p> <ul> <li>mborne/vagrantbox permet de cr\u00e9er des VM avec Vagrant pour les g\u00e9rer avec Ansible.</li> <li>mborne/k3s-deploy permet de d\u00e9ployer un cluster K3S multi-n\u0153uds avec Ansible.</li> <li>mborne/geostack-deploy - ansible illustre le d\u00e9ploiement de GeoServer et PostGIS avec Ansible (en fran\u00e7ais)</li> </ul>"},{"location":"depots/#gestion-des-depots-git","title":"Gestion des d\u00e9p\u00f4ts GIT","text":"<ul> <li>mborne/git-manager permet de sauvegarder et de scanner des d\u00e9p\u00f4ts GIT depuis des instances GitHub, GitLab ou Gitea.</li> <li>mborne/satis-gitlab g\u00e9n\u00e8re un fichier de configuration SATIS en listant les d\u00e9p\u00f4ts GIT contenant un fichier <code>composer.json</code></li> <li>mborne/remote-git est un client l\u00e9ger \u00e9crit en PHP pour lister les d\u00e9p\u00f4ts depuis des instances GitHub, GitLab ou Gitea (c'est le coeur de git-manager et satis-gitlab)</li> </ul>"},{"location":"depots/#chargement-des-donnees-spatiales","title":"Chargement des donn\u00e9es spatiales","text":"<ul> <li>mborne/postgis-integration permet de charger des jeux de donn\u00e9es dans PostGIS (naturalearth, adminexpress, ...). Les imports sont \u00e9crits en NodeJS \u00e0 l'aide d'utilitaires :<ul> <li>mborne/node-dl qui encapsule des appels \u00e0 wget pour le t\u00e9l\u00e9chargement des donn\u00e9es.</li> <li>mborne/node-extract qui appelle l'ex\u00e9cutable adapt\u00e9 (tar, unzip,...) pour d\u00e9compresser les archives.</li> <li>mborne/node-ogr2pg qui ex\u00e9cute des commandes ogr2ogr pour charger diff\u00e9rents formats dans PostgreSQL/PostGIS.</li> <li>mborne/node-postgis-helper qui est une tentative d'aller un plus plus loin avec une gestion des m\u00e9tadonn\u00e9es sur les sources et une exploration des sch\u00e9mas en vue de g\u00e9n\u00e9rer des API (1).</li> </ul> </li> <li>mborne/apicarto-integration - M\u00eame id\u00e9e avec des scripts bash (2018, archiv\u00e9)</li> </ul> <p>(1) Cette id\u00e9e est abandonn\u00e9e au profit d'outil tels pg_featureserv.</p>"},{"location":"depots/#validation-des-donnees-spatiales","title":"Validation des donn\u00e9es spatiales","text":"<p>Quelques travaux autour de IGNF/validator :</p> <ul> <li>mborne/validator-experiments - validation des donn\u00e9es ROUTE500 et cadastrales avec IGNF/validator (2020, test de robustesse \u00e0 industrialiser?)</li> <li>mborne/debug-gml-pcrs - D\u00e9p\u00f4t de reproduction d'un bug de GDAL - GMLAS driver (2022, bug corrig\u00e9, archiv\u00e9)</li> </ul>"},{"location":"depots/#quelques-experimentations-javascript","title":"Quelques exp\u00e9rimentations JavaScript","text":"<p>Principalement r\u00e9dig\u00e9es pour suivre les \u00e9volutions (si rares...) dans cet ecosyst\u00e8me :</p> <ul> <li>mborne/math-city est un mini-jeu pour apprendre les tables de multiplication (d\u00e9velopp\u00e9 pour prendre en main React plut\u00f4t que faire r\u00e9citer des tables).</li> <li>mborne/ts-examples illustre la configuration des outils autour de TypeScript (ts-node, mocha, chai, nyc).</li> <li>mborne/markdown-to-html - Mon propre convertisseur de markdown en HTML puisqu'il n'y a pas assez de g\u00e9n\u00e9rateurs de sites statiques sur le march\u00e9 \ud83d\ude09</li> </ul>"},{"location":"depots/#anciens-travaux","title":"Anciens travaux","text":""},{"location":"depots/#cartographie-web","title":"Cartographie web","text":"<ul> <li>mborne/jquery-geometry-editor - Un prototype d'extension JQuery visant \u00e0 rendre l'\u00e9dition d'une g\u00e9om\u00e9trie dans un formulaire web aussi simple que l'\u00e9dition d'une date (2016, archiv\u00e9, industrialis\u00e9 en IGNF/ol-geometry-editor)</li> <li>mborne/geoportail-leaflet - Un exemple illustrant l'utilisation des services WMTS de l'IGN de la m\u00eame mani\u00e8re qu'un TMS d'OSM avec Leaflet (2014, archiv\u00e9)</li> </ul>"},{"location":"depots/#traitement-de-graphes-routiers","title":"Traitement de graphes routiers","text":"<ul> <li>mborne/graph-experiments - Exp\u00e9rimentation du traitement des graphes avec boost::graph et GDAL / OGR (2019, archiv\u00e9)</li> </ul>"},{"location":"depots/#historisation-des-donnees-spatiales","title":"Historisation des donn\u00e9es spatiales","text":"<ul> <li>mborne/pghs est une tentative de g\u00e9n\u00e9ralisation du syst\u00e8me de gestion de l'historique des donn\u00e9es PostgreSQL utilis\u00e9 pour la BDTOPO de l'IGN s'appuyant sur des trigger PostgreSQL (2019, archiv\u00e9)</li> </ul>"},{"location":"depots/#optimisation-et-moindres-carres","title":"Optimisation et moindres carr\u00e9s","text":"<ul> <li>mborne/numpy-experiments est une exp\u00e9rimentation de r\u00e9solution par moindres carr\u00e9s avec numpy et par descente de gradient avec tensorflow (2019, archiv\u00e9)</li> </ul>"},{"location":"depots/#simulation-des-reglements-durbanisme","title":"Simulation des r\u00e8glements d'urbanisme","text":"<p>Relatif au travail autour de Simplu3D en satellite du G\u00e9oPortail de l'Urbanisme :</p> <ul> <li>mborne/plu-formel (2019, fork archiv\u00e9, voir CNIG - Structuration du r\u00e9glement urbanisme (niveau 2))</li> <li>mborne/simplu3D-experiments (2018, fork archiv\u00e9)</li> </ul>"},{"location":"depots/#geometrie-algorithmique","title":"G\u00e9om\u00e9trie algorithmique","text":"<p>SFCAL a \u00e9t\u00e9 migr\u00e9e sur gitlab.com</p> <p>Voir https://gitlab.com/sfcgal/SFCGAL</p> <p>Relatif au travaux pour SFCGAL (ajout de fonctionnalit\u00e9s 3D dans PostGIS) :</p> <ul> <li>mborne/cgal-decorate-point-with-data - Une exp\u00e9rimentation pour ajouter le \"M\" aux points XYZ dans CGAL (2016, archiv\u00e9)</li> <li>mborne/sfcgal-experiment - Une exp\u00e9rimentation pour calculer une \"distance de morphing\" entre polylignes (2016, archiv\u00e9)</li> </ul> <p>cas d'utilisation : correspondance de motifs entre g\u00e9om\u00e9tries lin\u00e9aires, mesure de d\u00e9formation des parcelles cadastrales,...</p>"},{"location":"depots/#construction-c-sur-windows","title":"Construction C++ sur windows","text":"<ul> <li>mborne/dll2def - Convertir .dll en .def pour construire GMP et MPFR sur Windows (2014, archiv\u00e9)</li> </ul>"},{"location":"depots/#divers","title":"Divers","text":"<ul> <li> <p>mborne/packer-examples illustre la construction d'images VirtualBox et Vagrant avec Packer (priv\u00e9, \u00e0 int\u00e9grer en annexe d'une fiche sur Packer)</p> </li> <li> <p>mborne/spring-ioc-principe - Exemple de projet Spring utilisant le style XML ancien pour expliquer le principe d'injection de d\u00e9pendances (archiv\u00e9, li\u00e9 \u00e0 cours-patron-conception qui n'est plus trait\u00e9 en Java)</p> </li> </ul>"},{"location":"fiches/","title":"Les fiches","text":"<p>En chantier</p> <p>Migration en cours en provenance des annexes de plusieurs pr\u00e9sentations...</p>"},{"location":"fiches/#architecture","title":"Architecture","text":"<ul> <li>Les API WEB et les autres</li> </ul>"},{"location":"fiches/#devops","title":"DevOps","text":"<p>Les fiches suivantes sont des annexes du cours-devops :</p> <ul> <li>Partage de charge et reverse proxy</li> <li>Le proxy sortant</li> <li>Les 12 facteurs</li> <li>DNS - La r\u00e9solution de nom de domaine</li> </ul>"},{"location":"fiches/#divers","title":"Divers","text":"<ul> <li>Les certificats LetsEncrypt et le protocole ACME<ul> <li>G\u00e9n\u00e9ration d'un certificat wildcard avec LetsEncrypt et le challenge DNS</li> </ul> </li> </ul>"},{"location":"fiches/12-facteurs/","title":"DevOps - Les 12 facteurs","text":"<p>Les 12 facteurs sont des recommandations tir\u00e9es de l'exp\u00e9rience d'Heroku parues en 2012. Elles guident dans la conception applications faciles \u00e0 d\u00e9ployer et capables de s'adapter \u00e0 la charge.</p> <p>Cette page s'efforce d'en faire une lecture \"modernis\u00e9e\" en lien avec les \u00e9l\u00e9ments vu dans le cours d'introduction \u00e0 la m\u00e9thode DevOps : Ansible, Docker et Kubernetes.</p>"},{"location":"fiches/12-facteurs/#i-base-de-code-une-base-de-code-suivie-avec-un-systeme-de-controle-de-version-plusieurs-deploiements","title":"I. Base de code - Une base de code suivie avec un syst\u00e8me de contr\u00f4le de version, plusieurs d\u00e9ploiements","text":"<p>Cette recommandation pose les r\u00e8gles suivantes :</p> <ul> <li>Le code d'une application doit \u00eatre versionn\u00e9 par exemple avec GIT</li> <li>Chaque application dispose de sa propre base de code (deux applications diff\u00e9rentes ne partagent pas le m\u00eame d\u00e9p\u00f4t)</li> <li>Le m\u00eame d\u00e9p\u00f4t est utilis\u00e9 pour le d\u00e9ploiement des diff\u00e9rents environnements (seule la version diff\u00e8re)</li> </ul> <p>En particulier, il conviendra de veiller \u00e0 ne dupliquer le code d'une application pour faire plusieurs d\u00e9ploiements (chose que l'on observe parfois quand le code de l'application inclue des \u00e9l\u00e9ments de param\u00e9trage des environnements).</p> <p>Toutefois, dans le cadre d'une approche GitOps, il restera int\u00e9ressant d'avoir :</p> <ul> <li>Un d\u00e9p\u00f4t d\u00e9di\u00e9 au code source de l'application avec une gestion propre des branches et des versions.</li> <li>Un d\u00e9p\u00f4t d\u00e9di\u00e9 aux scripts de d\u00e9ploiement pour \u00eatre en mesure de versionner le param\u00e9trage des diff\u00e9rents environnements.</li> </ul>"},{"location":"fiches/12-facteurs/#ii-dependances-declarez-explicitement-et-isolez-les-dependances","title":"II. D\u00e9pendances - D\u00e9clarez explicitement et isolez les d\u00e9pendances","text":"<p>Cette recommandation pose les r\u00e8gles suivantes :</p> <ul> <li>Une application ne doit pas d\u00e9pendre implicitement d'un composant devant \u00eatre install\u00e9 en amont du d\u00e9ploiement au niveau du syst\u00e8me (ex : curl, zip,...)</li> <li>Une application doit s'appuyer sur un gestionnaire de d\u00e9pendances (npm/yarn, PHP Composer, maven,...) pour d\u00e9clarer ses d\u00e9pendances et leurs versions.</li> </ul> <p>En pratique, l'utilisation de conteneurs permettra de relaxer la premi\u00e8re r\u00e8gle car :</p> <ul> <li>Une image de conteneur est un livrable autonome.</li> <li>Le fichier <code>Dockerfile</code> joue un r\u00f4le de gestionnaire de d\u00e9pendances (<code>RUN apt-get install curl</code>) permettant de (re)construire ce livrable.</li> </ul>"},{"location":"fiches/12-facteurs/#iii-configuration-stockez-la-configuration-dans-lenvironnement","title":"III. Configuration - Stockez la configuration dans l\u2019environnement","text":"<p>Cette recommandation pose le principe d'une stricte s\u00e9paration entre le code et la configuration pouvant varier en fonction des d\u00e9ploiements. Elle invite \u00e0 s'appuyer sur des variables d'environnement pour g\u00e9rer le param\u00e9trage des applications (ex : <code>DB_HOST</code>, <code>DB_USER</code>, <code>DB_PASSWORD</code>,...)</p> <p>En pratique, nous noterons que :</p> <ul> <li>Un fichier de configuration complexe pourra difficilement \u00eatre remplac\u00e9 par des variables d'environnement (ex : configuration de fluent-bit pour la collecte des journaux applicatifs, configuration de traefik pour l'exposition des services,...)</li> <li>Il convient surtout de ne pas stocker le param\u00e9trage dans le d\u00e9p\u00f4t du code de l'application et d'injecter les param\u00e8tres sp\u00e9cifiques \u00e0 l'environnement lors du d\u00e9ploiement.</li> </ul> <p>Dis autrement, configurer des variables d'environnement lors du d\u00e9ploiement sera plus simple mais il restera possible de :</p> <ul> <li>G\u00e9n\u00e9rer des fichiers de configuration \u00e0 partir d'un mod\u00e8le avec Ansible.</li> <li>Monter un fichier de configuration \u00e0 l'aide d'un volume dans un conteneur.</li> <li>G\u00e9rer des fichiers de configuration sous forme de ConfigMap ou Secret avec Kubernetes</li> </ul>"},{"location":"fiches/12-facteurs/#iv-services-externes-traitez-les-services-externes-comme-des-ressources-attachees","title":"IV. Services externes - Traitez les services externes comme des ressources attach\u00e9es","text":"<p>Il convient de ne pas faire de distinction entre les services locaux et les services externes.</p> <p>Par exemple, un changement de configuration devra permettre de basculer entre l'utilisation de :</p> <ul> <li>Une base de donn\u00e9es d\u00e9ploy\u00e9e localement par un d\u00e9veloppeur</li> <li>Une base de donn\u00e9e d\u00e9ploy\u00e9e par un \u00e9quipe d\u00e9di\u00e9e</li> <li>Une base de donn\u00e9e g\u00e9r\u00e9e par l'h\u00e9bergeur (SaaS)</li> </ul>"},{"location":"fiches/12-facteurs/#v-assemblez-publiez-executez-separez-strictement-les-etapes-dassemblage-et-dexecution","title":"V. Assemblez, publiez, ex\u00e9cutez - S\u00e9parez strictement les \u00e9tapes d\u2019assemblage et d\u2019ex\u00e9cution","text":"<p>En pratique, cette recommandation se traduit par la s\u00e9paration en processus d\u00e9di\u00e9s pour :</p> <ul> <li>La construction et l'ex\u00e9cution des tests unitaires (ex : <code>NodeJS CI</code>)</li> <li>La construction et la publication d'un livrable en cas de release (ex : <code>Publish to npmjs.com</code>, <code>Publish to DockerHub</code>,...)</li> <li>Le d\u00e9ploiement d'une version publi\u00e9e (ex : <code>Deploy</code>)</li> </ul>"},{"location":"fiches/12-facteurs/#vi-processus-executez-lapplication-comme-un-ou-plusieurs-processus-sans-etat","title":"VI. Processus - Ex\u00e9cutez l\u2019application comme un ou plusieurs processus sans \u00e9tat","text":"<p>Cette recommandation pose la r\u00e8gle qu'une application doit s'ex\u00e9cuter sous forme d'un ou plusieurs processus sans \u00e9tat (redhat.com - Stateful et stateless : quelle est la diff\u00e9rence ?) qui ne partagent rien.</p> <p>En pratique, nous remarquerons que cette recommandation am\u00e8nera \u00e0 externaliser le stockage des donn\u00e9es :</p> <ul> <li>Stocker les donn\u00e9es en base de donn\u00e9es (PostgreSQL, MongoDB,...)</li> <li>Stocker les fichiers \u00e0 l'aide de services d\u00e9di\u00e9s (S3, voire NFS) plut\u00f4t que localement sur les VM ou les conteneurs.</li> <li>Stocker les donn\u00e9es des sessions dans une base de donn\u00e9es (ex : Redis) plut\u00f4t que localement (comportement par d\u00e9faut avec PHP) ou en RAM (comportement par d\u00e9faut avec Java)</li> <li>...</li> </ul> <p>Les fichiers stock\u00e9s localement au niveau de l'application devront \u00eatre jetables et propre \u00e0 chaque instance de l'application (ex : cache applicatif).</p>"},{"location":"fiches/12-facteurs/#vii-associations-de-ports-exportez-les-services-via-des-associations-de-ports","title":"VII. Associations de ports - Exportez les services via des associations de ports","text":"<p>Cette recommandation pose la r\u00e8gle qu'une application ne doit pas d\u00e9pendre d'un serveur applicatif externe (tomcat, apache, nginx,...) pour s'ex\u00e9cuter. Elle doit \u00eatre auto-suffisante et capable de r\u00e9pondre sur un ou plusieurs ports (ex : <code>http://localhost:3000</code>).</p> <p>En pratique, l'utilisation de conteneurs permettra de rendre indolore le d\u00e9ploiement de ces serveurs applicatifs dans la mesure si ils sont embarqu\u00e9s dans les images.</p>"},{"location":"fiches/12-facteurs/#viii-concurrence-grossissez-a-laide-du-modele-de-processus","title":"VIII. Concurrence - Grossissez \u00e0 l'aide du mod\u00e8le de processus","text":"<p>En substance :</p> <ul> <li>L'adaptation \u00e0 la charge passe par l'adaptation du nombre de processus.</li> <li>Il est possible de distinguer des processus web pour r\u00e9pondre aux requ\u00eates HTTP et des processus de traitement (worker) pour les t\u00e2ches de fond.</li> </ul> <p>En outre, il est recommand\u00e9 de s'appuyer sur l'OS (ex : <code>systemd</code>) ou des outils d\u00e9di\u00e9s (ex : <code>foreman</code>) pour g\u00e9rer proprement les arr\u00eats et flux de sortie des processus (plut\u00f4t que g\u00e9rer des \"d\u00e9mons\" \u00e0 l'ancienne avec des pid).</p> <p>En pratique, en environnement conteneuris\u00e9, nous devrons nous inspirer de ce dernier point en nous appuyant au mieux sur les fonctionnalit\u00e9s disponibles au niveau du moteur d'ex\u00e9cution des conteneurs, de Kubernetes ou d'un orchestrateur de traitement.</p>"},{"location":"fiches/12-facteurs/#ix-jetable-maximisez-la-robustesse-avec-des-demarrages-rapides-et-des-arrets-gracieux","title":"IX. Jetable - Maximisez la robustesse avec des d\u00e9marrages rapides et des arr\u00eats gracieux","text":"<p>Les processus doivent pouvoir \u00eatre d\u00e9marr\u00e9s, arr\u00eat\u00e9s et red\u00e9marr\u00e9s rapidement. Ceci implique de :</p> <ul> <li>Minimiser le temps de d\u00e9marrage</li> <li>G\u00e9rer proprement le traitement d'un signal SIGTERM</li> <li>Survivre \u00e0 un plantage brutal</li> </ul> <p>En outre, la recommandation s'accompagne de conseils sp\u00e9cifiques aux traitements bas\u00e9es sur des piles de message pour la reprise d'un traitement en cas d'erreur.</p>"},{"location":"fiches/12-facteurs/#x-parite-devprod-gardez-le-developpement-la-validation-et-la-production-aussi-proches-que-possible","title":"X. Parit\u00e9 dev/prod - Gardez le d\u00e9veloppement, la validation et la production aussi proches que possible","text":"<p>Cette recommandation invite \u00e0 utiliser les m\u00eames services externes (PostgreSQL, Redis,...) dans les environnements de d\u00e9veloppement et de production.</p> <p>En pratique, s'appuyer sur des outils tels Vagrant ou Docker facilitera l'installation en local de ces services pour les besoins de d\u00e9veloppement.</p> <p>Nous \u00e9viterons ainsi la tentation de travailler par exemple avec PostgreSQL en PROD et SQLITE en DEV pour \u00e9chapper \u00e0 l'installation de PostgreSQL sur les postes des d\u00e9veloppeurs.</p>"},{"location":"fiches/12-facteurs/#xi-logs-traitez-les-logs-comme-des-flux-devenements","title":"XI. Logs - Traitez les logs comme des flux d\u2019\u00e9v\u00e8nements","text":"<p>En substance, il est recommand\u00e9 de produire les logs dans la sortie standard et de laisser des outils d\u00e9di\u00e9s se charger de la collecte et de l'indexation de ces logs (logstash, fluent-bit, fluentd...).</p> <p>En pratique, s'appuyer sur une biblioth\u00e8que d\u00e9di\u00e9e \u00e0 l'\u00e9criture des journaux applicatifs permettra g\u00e9n\u00e9ralement de :</p> <ul> <li>Configurer la sortie des journaux (stdout/stderr plut\u00f4t que fichier)</li> <li>Produire ces journaux applicatifs dans un format exploitable</li> </ul>"},{"location":"fiches/12-facteurs/#xii-processus-dadministration-lancez-les-processus-dadministration-et-de-maintenance-comme-des-one-off-processes","title":"XII. Processus d\u2019administration - Lancez les processus d\u2019administration et de maintenance comme des one-off-processes","text":"<p>En substance, les applications doivent embarquer les commandes utilitaires qui seront ex\u00e9cut\u00e9es comme des processus ind\u00e9pendants.</p> <p>En pratique, au niveau des applications web, nous noterons que les frameworks permettent g\u00e9n\u00e9ralement d'inclure des commandes en annexe du code d\u00e9di\u00e9 au traitement des requ\u00eates HTTP :</p> <ul> <li>Les commandes <code>rake</code> d'application ruby telles GitLab (ex : <code>gitlab-rake gitlab:backup:create</code> pour la sauvegarde)</li> <li>Les commandes <code>bin/console</code> des applications Symfony (<code>bin/console cache:clear --env=prod</code> pour le nettoyage du cache)</li> <li>Les commandes bas\u00e9es sur commander avec NodeJS</li> <li>...</li> </ul> <p>Au niveau des conteneurs, nous pourrons int\u00e9grer des programmes utilitaires \u00e0 l'image et noterons que g\u00e9n\u00e9ralement :</p> <ul> <li>La commande par d\u00e9faut correspondra au d\u00e9marrage l'application en mode service (ex : l'image <code>postgres</code> d\u00e9marrant le service PostgreSQL par d\u00e9faut)</li> <li>La m\u00eame image pourra \u00eatre utilis\u00e9e pour r\u00e9aliser un traitement d'administration en sp\u00e9cifiant une commande (ex : l'image <code>postgres</code> permettant l'utilisation de <code>createdb</code> ou <code>psql</code> dans ce m\u00eame conteneur pour initialiser la base)</li> </ul>"},{"location":"fiches/api/","title":"Les API WEB et les autres","text":""},{"location":"fiches/api/#contexte","title":"Contexte","text":"<p>En 2025, les API REST/JSON ont toujours le vent en poupe. Toutefois, la mode \u00e9volue au niveau des API WEB s'appuyant sur le protocole HTTP (REST/JSON vs WebSocket vs GraphQL vs gRPC). Aussi, il semble int\u00e9ressant de prendre du recul, de mesurer les limites des API exploitant le r\u00e9seau, et de constater que diff\u00e9rents types d'API coexistent et se compl\u00e8tent.</p>"},{"location":"fiches/api/#quelques-types-dapi","title":"Quelques types d'API","text":""},{"location":"fiches/api/#les-bibliotheques-de-programmation","title":"Les biblioth\u00e8ques de programmation","text":"<p>C'est le type d'API qui offre la plus grande richesse fonctionnelle et la plus grande libert\u00e9 d'utilisation qui sera toujours \u00e0 la base de l'\u00e9difice en pr\u00e9sence d'une application en ligne de commande, d'un service ou d'une API WEB.</p> <p>Toutefois :</p> <ul> <li>Une biblioth\u00e8que est li\u00e9e \u00e0 un langage de programmation (bien qu'il soit possible de faire des \"bindings\" pour appeler par exemple en Python du code \u00e9crit en C++).</li> <li>Les clients doivent avoir des comp\u00e9tences en programmation.</li> <li>Les clients devront g\u00e9rer les mises \u00e0 jour avec plus ou moins de facilit\u00e9 en fonction de :<ul> <li>La qualit\u00e9 du packaging et l'utilisation d'un syst\u00e8me de gestion des d\u00e9pendances (<code>apt-get upgrade</code>, <code>pip install -r requirements.txt</code>, <code>npm install</code>,...)</li> <li>La fr\u00e9quence des versions majeures s'accompagnant souvent de changements cassants.</li> </ul> </li> <li>Mettre \u00e0 disposition proprement une biblioth\u00e8que a un co\u00fbt variable en fonction du langage utilis\u00e9 et des syst\u00e8mes cibles.</li> </ul>"},{"location":"fiches/api/#les-api-exposees-sous-forme-de-services","title":"Les API expos\u00e9es sous forme de services","text":"<p>Nous trouvons plusieurs syst\u00e8mes mettant \u00e0 disposition des API sous forme de services en r\u00e9seau via des protocoles au niveau TCP ou UDP :</p> <ul> <li>Les bases de donn\u00e9es (PostgreSQL, MongoDB, Redis,...)</li> <li>Les serveurs SMTP pour l'envoi de mail</li> <li>Les serveurs DNS pour la r\u00e9solution de nom</li> <li>...</li> </ul> <p>Par rapport aux biblioth\u00e8ques, nous noterons que :</p> <ul> <li>Les mises \u00e0 jour des services sont centralis\u00e9es</li> <li>Les clients peuvent \u00eatre \u00e9crits dans plusieurs langages</li> </ul> <p>Par rapport aux API WEB ci-apr\u00e8s, nous noterons que :</p> <ul> <li>Les protocoles seront tr\u00e8s divers en fonction des services.</li> <li>Cette h\u00e9t\u00e9rog\u00e9n\u00e9\u00eft\u00e9 se traduira par la multiplication des clients (un client par service ou type de service)</li> </ul>"},{"location":"fiches/api/#les-api-web-exposees-en-http","title":"Les API WEB expos\u00e9es en HTTP","text":"<p>Nous trouvons plusieurs types d'API WEB expos\u00e9es \u00e0 l'aide du protocole HTTP avec des \u00e9volutions qui semblent se faire en parall\u00e8le des \u00e9volutions sur les formats et besoins :</p> <ul> <li>SOAP (1999) a eu le vent en poupe quand le format XML (1998) et les sch\u00e9mas XSD (2001) \u00e9taient \u00e0 la mode.</li> <li>SOAP a progressivement c\u00e9d\u00e9 du terrain au profit des API REST (2000) exploitant au choix les formats XML ou JSON.</li> <li>Les API REST JSON/XML ont progressivement abandonn\u00e9 le format XML pour travailler exclusivement avec le format JSON.</li> <li>Les WebSocket (2011) ont \u00e9t\u00e9 cr\u00e9\u00e9es pour r\u00e9pondre au besoin de communication bidirectionnelle en temps r\u00e9el.</li> <li>Nous trouvons d\u00e9sormais des API GraphQL (2012) visant \u00e0 donner plus de souplesse dans l'exploitation des propri\u00e9t\u00e9s et relations que les API REST/JSON classiques au niveau de GitHub, GitLab,...</li> <li>Le format Protocol Buffer gagne du terrain (Vector tiles, format PBF d'OSM,...) et gRPC commence \u00e0 se d\u00e9mocratiser.</li> <li>Un approche telle gRPC qui combine HTTP/2 et Protocol Buffer risque de d\u00e9tr\u00f4ner les API REST/JSON pour les applications \u00e9changeant des volumes de donn\u00e9es importants.</li> </ul>"},{"location":"fiches/api/#quelques-remarques-sur-les-api","title":"Quelques remarques sur les API","text":""},{"location":"fiches/api/#une-api-http-saccompagne-souvent-dun-client-cli","title":"Une API HTTP s'accompagne souvent d'un client CLI","text":"<ul> <li>L'ex\u00e9cutable <code>docker</code> est client de l'API docker (elle est expos\u00e9e par d\u00e9faut via une socket linux <code>/var/run/docker.sock</code> mais peut \u00eatre expos\u00e9e en HTTPS)</li> <li>L'ex\u00e9cutable <code>kubectl</code> est client de l'API Kubernetes</li> </ul>"},{"location":"fiches/api/#une-api-http-peut-sappuyer-en-coulisse-sur-une-application-cli","title":"Une API HTTP peut s'appuyer en coulisse sur une application CLI","text":"<p>La mise en oeuvre d'une fonctionnalit\u00e9 d'import de donn\u00e9es en base via une API HTTP peut par exemple \u00eatre trait\u00e9e en coulisse par un appel \u00e0 :</p> <ul> <li>clamav pour contr\u00f4ler l'absence de virus dans un t\u00e9l\u00e9versement d'une archive.</li> <li><code>unzip</code>, <code>tar</code> ou <code>gunzip</code> pour d\u00e9compresser l'archive.</li> <li><code>ogr2ogr</code> de GDAL pour charger les donn\u00e9es d\u00e9compress\u00e9es en base.</li> </ul>"},{"location":"fiches/api/#une-application-cli-peut-produire-des-resultats-formates-en-json","title":"Une application CLI peut produire des r\u00e9sultats format\u00e9s en JSON","text":"<p>Appeler une application en ligne de commande et devoir \"parser\" les r\u00e9sultats avec <code>awk</code> ou autres joyeuset\u00e9s est p\u00e9nible.</p> <p>Toutefois, la vie devient plus douce quand l'application en ligne de commande est capable de produire des r\u00e9sultats dans un format exploitable tels CSV, JSON ou YAML.</p> <p>A titre d'exemple, la commande \"ip\" met \u00e0 disposition une telle option. Il est donc possible de traiter la sortie avec jq comme suit pour r\u00e9cup\u00e9rer la liste des interfaces r\u00e9seaux :</p> <pre><code>ip --json address | jq -r '.[].ifname'\n</code></pre> <p>Nous retrouvons ce m\u00eame principe avec :</p> <ul> <li>L'option <code>--format=json|yaml</code> du client Kubernetes (<code>kubectl</code>)</li> <li>L'option <code>--format=json</code> du scanner de vuln\u00e9rabilit\u00e9 Trivy</li> <li>...</li> </ul>"},{"location":"fiches/api/#une-approche-complete-est-possible","title":"Une approche compl\u00e8te est possible","text":"<p>Pour une fonctionnalit\u00e9, il est possible de mettre \u00e0 disposition une biblioth\u00e8que, une application en ligne de commande et une API WEB!</p>"},{"location":"fiches/api/#ressources","title":"Ressources","text":""},{"location":"fiches/api/#generalite","title":"G\u00e9n\u00e9ralit\u00e9","text":"<ul> <li>konghq.com - The API Mandate: How a mythical memo from Jeff Bezos changed software forever</li> <li>cq94.medium.com (Christian Quest) - Les API c\u2019est bien\u2026 en abuser \u00e7a craint !.</li> <li>blog.octo.com - Pourquoi les Websockets ?</li> <li>www.resolutesoftware.com - REST vs. GraphQL vs. gRPC vs. WebSocket</li> </ul>"},{"location":"fiches/api/#catalogue-dapi","title":"Catalogue d'API","text":"<ul> <li>github.com - public-apis</li> <li>api.gouv.fr</li> </ul>"},{"location":"fiches/api/#developpement-dapi-restjson","title":"D\u00e9veloppement d'API REST/JSON","text":"<ul> <li>editor.swagger.io pour \u00e9diter des sp\u00e9cifications d'API au format OpenAPI.</li> <li>json-schema pour la description des donn\u00e9es.</li> <li>swagger-ui pour de g\u00e9n\u00e9rer une documentation interactive (HTML/JS) \u00e0 partir de ces sp\u00e9cifications.</li> <li>github.com - yosriady/api-development-tools - HTTP API Development Tools pour plus d'outils...</li> </ul>"},{"location":"fiches/api/#securiser-les-api-rest","title":"S\u00e9curiser les API REST","text":"<ul> <li>blog.octo.com - S\u00e9curiser une API REST : tout ce qu\u2019il faut savoir</li> <li>github.com - shieldfy/API-Security-Checklist</li> </ul>"},{"location":"fiches/api/#pour-les-api-cli","title":"Pour les API CLI","text":"<ul> <li>clig.dev - Command Line Interface Guidelines donne d'autres bonnes pratiques pour la construction d'application en ligne de commande dont la mise \u00e0 disposition d'une option <code>--json</code> pour sp\u00e9cifier le format de la sortie.</li> </ul>"},{"location":"fiches/api/approche-complete/","title":"Une biblioth\u00e8que, une application en ligne de commande et une API WEB","text":""},{"location":"fiches/api/approche-complete/#principe","title":"Principe","text":"<p>Le graal n'est pas d'avoir une fonctionnalit\u00e9 accessible via HTTP. Le graal est d'avoir le choix sur le mode d'acc\u00e8s \u00e0 la fonctionnalit\u00e9 :</p> <ul> <li>Une biblioth\u00e8que de programmation qui sera toujours la base de l'\u00e9difice r\u00e9pondra aux cas d'utilisation avanc\u00e9es.</li> <li>Une application en ligne de commande, exploitable dans des batchs et des en coulisse d'application web, sera int\u00e9ressante pour \u00e9viter les transferts de donn\u00e9es par le r\u00e9seau.</li> <li>Une API WEB sera int\u00e9ressante pour \u00e9viter les installations et centraliser les mises \u00e0 jour, au prix de transfert de donn\u00e9es par le r\u00e9seau et de la d\u00e9pendance \u00e0 un service tiers.</li> <li>Une application web ou une application desktop permettra quand \u00e0 elle de mettre \u00e0 disposition une interface graphique</li> </ul>"},{"location":"fiches/api/approche-complete/#lexemple-de-mapshaper","title":"L'exemple de mapshaper","text":"<p>A titre d'exemple, l'outil mapshaper qui permet de simplifier des donn\u00e9es g\u00e9ographiques adopte une philosophie proche de cette cible :</p> <ul> <li>Le site https://mapshaper.org/ met \u00e0 disposition la fonctionnalit\u00e9 via interface graphique.</li> <li>Le d\u00e9p\u00f4t github.com mbloch/mapshaper correspond \u00e0 la biblioth\u00e8que avec des fonctionnalit\u00e9s expos\u00e9es sous forme d'une application en ligne de commande.</li> </ul> <p>En cons\u00e9quence, il est possible de traiter des jeux de donn\u00e9es volumineux sans avoir \u00e0 transf\u00e9rer les donn\u00e9es via le r\u00e9seau (chose qui serait impos\u00e9 si la fonctionnalit\u00e9 \u00e9tait mise \u00e0 disposition uniquement sous forme d'une API REST).</p>"},{"location":"fiches/api/approche-complete/#difficulte-pour-la-mise-en-oeuvre-dune-approche-complete","title":"Difficult\u00e9 pour la mise en oeuvre d'une approche compl\u00e8te","text":"<p>La principale difficult\u00e9 pour la mise en oeuvre d'une approche compl\u00e8te r\u00e9side dans le cas o\u00f9 des r\u00e9f\u00e9rentiels volumineux sont requis pour la mise en oeuvre de la fonctionnalit\u00e9 (cadastre, BAN, OSM, BDTOPO,...). Quand bien m\u00eame les donn\u00e9es sont ouvertes, les acc\u00e8s aux r\u00e9f\u00e9rentiels restent h\u00e9t\u00e9rog\u00e8nes et ils impliquent des t\u00e9l\u00e9chargements volumineux.</p> <p>Nous noterons que pour les donn\u00e9es peu volumineuses, il est possible de g\u00e9rer les r\u00e9f\u00e9rentiels as code (ex : BaseAdresseNationale/codes-postaux)</p>"},{"location":"fiches/dns/","title":"DNS - La r\u00e9solution de nom de domaine","text":"<p>La fonctionnalit\u00e9 principale d'un serveur DNS est la conversion d'un nom (ex : <code>www.quadtreeworld.net</code>) en adresse IP (ex : <code>51.15.190.141</code>). Il offre d'autres fonctionnalit\u00e9s (c.f. Principaux types d'entr\u00e9es)</p>"},{"location":"fiches/dns/#quelques-fournisseurs","title":"Quelques fournisseurs","text":"Fournisseur DNS1 DNS2 Cloudflare 1.1.1.1 1.0.0.1 google 8.8.8.8 8.8.4.4 OpenDNS 208.67.222.222 208.67.220.220 free 212.27.40.240 212.27.40.241 <p>Voir aussi www.commentcamarche.net - Serveurs DNS des principaux FAI</p>"},{"location":"fiches/dns/#principaux-types-dentrees","title":"Principaux types d'entr\u00e9es","text":"<p>\ud83e\udd16 R\u00e9daction assist\u00e9e par IA.</p> Type Exemple Utilisation principale A <code>lb.quadtreeworld.net \u2192 51.158.147.46</code> Associe un nom de domaine \u00e0 une adresse IPv4 AAAA <code>google.fr \u2192 2a00:1450:4007:809::2003</code> Associe un nom de domaine \u00e0 une adresse IPv6 CNAME <code>www.quadtreeworld.net \u2192 lb.quadtreeworld.net</code> Fait d\u2019un nom un alias d\u2019un autre (pas d\u2019adresse directe) TXT <code>_acme-challenge.quadtreeworld.net. \u2192 \"1Udw...\"</code> Contient des informations textuelles, souvent pour la v\u00e9rification de domaine (Challenge DNS ACME, SPF, DKIM, etc.) MX <code>google.com \u2192 smtp.google.com</code> Sp\u00e9cifie le serveur de messagerie pour le domaine NS <code>quadtreeworld.net \u2192 dakota.ns.cloudflare.co, maleah.ns.cloudflare.com</code> Indique les serveurs DNS autoritaires pour le domaine SOA D\u00e9finit le serveur ma\u00eetre, l\u2019email d\u2019admin, le TTL par d\u00e9faut\u2026 Indique les param\u00e8tres du domaine <p>Il en existe d'autres (c.f. fr.wikipedia.org - Liste des enregistrements DNS)</p>"},{"location":"fiches/dns/#tester-la-resolution-de-nom","title":"Tester la r\u00e9solution de nom","text":"<ul> <li>dig</li> <li>host</li> <li>nslookup</li> </ul>"},{"location":"fiches/dns/#configurer-la-resolution-de-nom","title":"Configurer la r\u00e9solution de nom","text":"<p>Plusieurs options sont possibles pour un poste de travail :</p> <ul> <li>Configurer les serveurs DNS via le protocole DHCP (comportement par d\u00e9faut faisant g\u00e9n\u00e9ralement suivre les DNS du FAI)</li> <li>Configurer manuellement les serveurs DNS au niveau de la connexion</li> <li>Forcer la r\u00e9solution de certains noms via <code>/etc/hosts</code> :</li> </ul> <pre><code># custom ip\n192.168.0.101   machine1\n192.168.0.102   machine2\n</code></pre> <ul> <li>Installer et utiliser un server DNS (ex : dnsmasq) pour contourner les limitations de <code>/etc/hosts</code> (ex : <code>*.vbox.local</code> -&gt; VM VirtualBox avec serveur WEB).</li> </ul>"},{"location":"fiches/dns/#cas-des-conteneurs","title":"Cas des conteneurs","text":"<ul> <li>Docker embarque son propre serveur DNS expos\u00e9 sur l'IP <code>127.0.0.11</code></li> <li>Kubernetes int\u00e8gre lui aussi un serveur DNS (ex : CoreDNS)</li> </ul>"},{"location":"fiches/dns/#securite","title":"S\u00e9curit\u00e9","text":"<p>Historiquement :</p> <ul> <li>Niveau int\u00e9grit\u00e9, il n'y a historiquement pas de m\u00e9canisme de s\u00e9curit\u00e9 au niveau DNS. HTTPS est utilis\u00e9 pour s'assurer que le serveur auquel on acc\u00e8de n'est pas celui d'un pirate et pour chiffrer les donn\u00e9es \u00e9chang\u00e9es.</li> <li>Niveau confidentialit\u00e9, il faut savoir que m\u00eame en pr\u00e9sence de HTTPS, le serveur DNS et tous les syst\u00e8mes en mesure d'\u00e9couter les requ\u00eates DNS conna\u00eetront les noms d'h\u00f4tes auxquels vous acc\u00e9dez.</li> </ul> <p>Des progr\u00e8s sont toutefois en cours en la mati\u00e8re (voir www.malekal.com - DNSSEC, DNS Over TLS ou HTTPS (DoT et DoH) et DNSCrypt : les diff\u00e9rences)</p>"},{"location":"fiches/dns/#references","title":"R\u00e9f\u00e9rences","text":"<ul> <li> <p>debian-handbook.info - Le cahier de l'administrateur Debian - 8.3. Attribution et r\u00e9solution de noms</p> </li> <li> <p>doc.ubuntu-fr.org - Comment configurer un serveur l\u00e9ger dns et dhcp alias Dnsmasq ?</p> </li> <li> <p>www.infomaniak.com - \u00c0 quoi sert DNSSEC?</p> </li> </ul>"},{"location":"fiches/lb-rp/","title":"Partage de charge et reverse proxy","text":""},{"location":"fiches/lb-rp/#principe-de-fonctionnement","title":"Principe de fonctionnement","text":"<p>Un reverse proxy joue un r\u00f4le d'interm\u00e9diaire entre la requ\u00eate d'un client et son traitement sur un serveur particulier. </p> <ul> <li>En pr\u00e9sence de plusieurs serveurs \u00e0 m\u00eame de traiter la requ\u00eate, il jouera un r\u00f4le de r\u00e9partiteur de charge (LoadBalancer) permettant la scalabilit\u00e9 horizontale. </li> <li></li> </ul> <p>Par abus de langage, ce composant sera souvent nomm\u00e9 LoadBalancer (abr\u00e9g\u00e9 en \"lb\") m\u00eame en pr\u00e9sence d'un seul serveur en \"backend\".</p>"},{"location":"fiches/lb-rp/#principe-de-configuration","title":"Principe de configuration","text":"<p>Dans le principe, il reviendra de mettre en correspondance des URL externes et des URL internes. Par exemple, pour 3 instances d'une \"app\" \u00e9coutant en HTTP sur le port 3000 :</p> URL externe URL interne <code>https://app.exemple.net</code> <code>http://app01:3000</code><code>http://app02:3000</code><code>http://app03:3000</code>"},{"location":"fiches/lb-rp/#impact-au-niveau-des-applications","title":"Impact au niveau des applications","text":""},{"location":"fiches/lb-rp/#les-services-doivent-supporter-le-partage-de-charge","title":"Les services doivent supporter le partage de charge","text":"<p>Dans le cas id\u00e9al, un service web ne doit pas stocker localement des \u00e9tats. Sans cela, un m\u00eame serveur devra traiter les requ\u00eates successives d'un m\u00eame client et il sera n\u00e9cessaire de mettre en oeuvre un m\u00e9canisme d'affinit\u00e9 de session au niveau du LoadBalancer.</p>"},{"location":"fiches/lb-rp/#les-services-ne-voient-pas-les-ip-des-clients","title":"Les services ne voient pas les IP des clients","text":"<p>Par d\u00e9faut, les services derri\u00e8re le LoadBalancer verront l'IP du LoadBalancer au niveau de la connexion. En cas de besoin d'acc\u00e9der \u00e0 l'IP du client (ex : pour prot\u00e9ger une authentification par mot de passe contre des attaques par force brute), on s'appuiera g\u00e9n\u00e9ralement sur l'ajout d'une ent\u00eate HTTP au niveau du LoadBalancer (<code>X-Forwarded-For</code> ou <code>X-Real-IP</code>)</p>"},{"location":"fiches/lb-rp/#les-services-ne-voient-pas-les-url-externes","title":"Les services ne voient pas les URL externes","text":"<p>Un service en backend d'un LoadBalancer n'a pas une vue directe sur les URL externes. Il faudra au besoin calculer ces URL \u00e0 partir des ent\u00eates HTTP ajout\u00e9es aux requ\u00eates par le reverse proxy (<code>X-Forwarded-Proto</code>, <code>X-Forwarded-Host</code>, <code>X-Forwarded-For</code>...)</p> <p>(voir par exemple docs.geoserver.org - Use headers for Proxy URL o\u00f9 les ent\u00eates support\u00e9es par GeoServer sont document\u00e9es)</p>"},{"location":"fiches/lb-rp/#autres-cas-dutilisation-du-loadbalancer","title":"Autres cas d'utilisation du LoadBalancer","text":"<p>Ce composant jouera r\u00e9guli\u00e8rement d'autres r\u00f4les. Il pourra \u00eatre utilis\u00e9 pour :</p> <ul> <li>Mettre en oeuvre TLS (HTTPS pour les services web)</li> <li>Mettre \u00e0 jour une application sans coupure (mise \u00e0 jour progressive des backends)</li> <li>Ajouter des ent\u00eates de s\u00e9curit\u00e9 aux r\u00e9ponses</li> </ul> <p>ex : HSTS (<code>Strict-Transport-Security: max\u2212age=31536000; includeSubDomains;</code>) pour emp\u00eacher le contournement d'HTTPS.</p> <ul> <li>Mettre en oeuvre des filtrages par IP</li> <li>Mettre en oeuvre des authentifications (proxy authentifiant)</li> <li>Mettre en oeuvre des limites de solicitations des services (ex : max 500 requ\u00eates/min/IP)</li> <li>Mettre en oeuvre des limites de d\u00e9bit de t\u00e9l\u00e9chargement (ex : max 500 ko/s/IP)</li> <li>...</li> </ul>"},{"location":"fiches/lb-rp/#quelques-exemple-dimplementations","title":"Quelques exemple d'impl\u00e9mentations","text":"<p>Il existe de nombreuses solutions mais nous citerons par exemple :</p> <ul> <li>nginx (plut\u00f4t utilis\u00e9 \u00e0 l'\u00e9chelle d'une application).</li> <li>haproxy (plut\u00f4t utilis\u00e9 \u00e0 l'\u00e9chelle d'une zone d'h\u00e9bergement).</li> <li>traefik qui dispose entre autre de m\u00e9canismes de d\u00e9couverte de configuration.</li> </ul>"},{"location":"fiches/lb-rp/#deux-types-de-loadbalancer","title":"Deux types de LoadBalancer","text":"<p>Pour la culture, nous noterons qu'il existe deux types de LoadBalancer :</p> <ul> <li>LoadBalancer L4 agissant au niveau TCP/IP (couche \"4 - transport\" du mod\u00e8le OSI)</li> <li>LoadBalancer L7 agissant au niveau HTTP/HTTPS (couche \"7 - transport\" du mod\u00e8le OSI), utile pour des services web.</li> </ul> <p>Nous nous sommes concentr\u00e9 dans cette fiche sur le deuxi\u00e8me cas qui est particuli\u00e8rement fr\u00e9quent avec les services web.</p>"},{"location":"fiches/lb-rp/#ressources","title":"Ressources","text":"<ul> <li>blog.octo.com - BD - Le Load Balancer</li> <li>cyber.gouv.fr - S\u00e9curiser un site web aborde entre autres les ent\u00eates de s\u00e9curit\u00e9 dans le document \"Recommandations pour la mise en \u0153uvre d'un site web : ma\u00eetriser les standards de s\u00e9curit\u00e9 c\u00f4t\u00e9 navigateur\"</li> <li>medium.com - Difference Between Layer 4 vs. Layer 7 Load Balancing</li> </ul>"},{"location":"fiches/letsencrypt-acme/","title":"Les certificats LetsEncrypt et le protocole ACME","text":"<p>Let's Encrypt fournit gratuitement des certificats serveurs sign\u00e9s par une autorit\u00e9 de certification reconnue par les navigateurs et les syst\u00e8mes. L'id\u00e9e de base est de lever le frein financier pour la g\u00e9n\u00e9ralisation de l'utilisation de HTTPS.</p>"},{"location":"fiches/letsencrypt-acme/#principe","title":"Principe","text":"<p>La cr\u00e9ation des certificats s'appuie sur le protocole ACME qui est mis en oeuvre via une API. Ce protocole contr\u00f4le la propri\u00e9t\u00e9 des domaines avec des challenges apportant soit :</p> <ul> <li>La preuve du contr\u00f4le du serveur (challenge HTTP)</li> <li>La preuve du contr\u00f4le du domaine (challenge DNS).</li> </ul>"},{"location":"fiches/letsencrypt-acme/#en-pratique","title":"En pratique","text":"<ul> <li>certbot permet de g\u00e9rer la cr\u00e9ation de certificat en ligne de commande pour des serveurs nginx, apache,...</li> <li>Des outils tel traefik int\u00e8grent la cr\u00e9ation automatique de certificats LetsEncrypt.</li> <li>lego automatise le traitement des challenges DNS en faisant appel \u00e0 l'API des providers.</li> <li>cert-manager utilisable en contexte Kubernetes met lui \u00e0 disposition une impl\u00e9mentation du protocole ACME.</li> </ul>"},{"location":"fiches/letsencrypt-acme/#interet-des-challenges-dns","title":"Int\u00e9r\u00eat des challenges DNS","text":"<p>Les challenges DNS sont particuli\u00e8rement int\u00e9ressant pour les cas d'utilisation suivant :</p> <ul> <li>Cr\u00e9ation d'un certificat pour des applications non expos\u00e9es sur internet (ex : site intranet)</li> <li>Cr\u00e9ation d'un certificat wildcard</li> </ul>"},{"location":"fiches/letsencrypt-acme/#mise-en-garde","title":"Mise en garde","text":"<ul> <li>L'autorit\u00e9 de certification interm\u00e9diaire doit \u00eatre diffus\u00e9e au niveau du serveur web (i.e. de configurer le serveur web avec fullchain.pem)<ul> <li>Firefox embarque la CA racine et la CA interm\u00e9diaire, ce n'est pas le cas des store ubuntu et \u00e7a pose probl\u00e8me pour des clients en ligne de commande tel <code>curl</code>.</li> </ul> </li> <li>www.sslshopper.com permet de v\u00e9rifier que c'est bien le cas si le domaine est expos\u00e9.</li> <li>L'utilitaire openssl sera votre ami si \u00e7a se complique.</li> </ul>"},{"location":"fiches/letsencrypt-acme/#ressources","title":"Ressources","text":"<ul> <li>letsencrypt.org - How It Works</li> <li>letsencrypt.org - Chain of trust (cha\u00eene de certification)</li> </ul>"},{"location":"fiches/letsencrypt-acme/wildcard/","title":"G\u00e9n\u00e9ration d'un certificat wildcard avec LetsEncrypt et le challenge DNS","text":"<p>En s'appuyant sur dns-01-challenge, il est possible de g\u00e9n\u00e9rer gratuitement des certificats wildcard avec LetsEncrypt.</p>"},{"location":"fiches/letsencrypt-acme/wildcard/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>certbot</li> </ul>"},{"location":"fiches/letsencrypt-acme/wildcard/#procedure-manuelle","title":"Proc\u00e9dure manuelle","text":"<ul> <li>Demander la cr\u00e9ation d'un certificat <code>*.quadtreeworld.net</code> :</li> </ul> <pre><code>sudo certbot certonly --cert-name quadtreeworld.net \\\n    --server https://acme-v02.api.letsencrypt.org/directory \\\n    --preferred-challenges dns --manual \\\n    -d '*.quadtreeworld.net'\n</code></pre> <ul> <li>Configurer le DNS comme demand\u00e9 par certbot :</li> </ul> <pre><code>Please deploy a DNS TXT record under the name\n_acme-challenge.quadtreeworld.net with the following value:\n\nINtrA8meUucf1Pv65z0d4H0B13fsx_nEdDf68X1CwqY\n</code></pre> <ul> <li> <p>V\u00e9rifier avec <code>dig -q txt _acme-challenge.quadtreeworld.net</code></p> </li> <li> <p>Valider au niveau de certbot</p> </li> </ul> <p>Si tout se passe bien : <code>Congratulations!</code>, on obtient :</p> <pre><code>/etc/letsencrypt/live/quadtreeworld.net/fullchain.pem\n/etc/letsencrypt/live/quadtreeworld.net/privkey.pem\n</code></pre>"},{"location":"fiches/letsencrypt-acme/wildcard/#automatisation","title":"Automatisation","text":"<p>lego permet d'automatiser cette proc\u00e9dure en appelant les API de diff\u00e9rents gestionnaires de DNS pour configurer l'entr\u00e9e TXT requise pour la validation.</p>"},{"location":"fiches/proxy-sortant/","title":"Le proxy sortant","text":"<p>Un proxy sortant sert d'interm\u00e9diaire pour le traffic sortant d'une infrastructure.</p>"},{"location":"fiches/proxy-sortant/#cas-dutilisation","title":"Cas d'utilisation","text":"<p>L'utilisation d'un proxy sortant sera fr\u00e9quente pour :</p> <ul> <li>Mettre en place un filtrage des acc\u00e8s \u00e0 internet depuis le r\u00e9seau d'une entreprise, d'une \u00e9cole ou d'un h\u00e9bergement s\u00e9curis\u00e9.</li> <li>Tracer les acc\u00e8s \u00e0 internet.</li> <li>Ma\u00eetriser la consommation de bande passante sortante.</li> <li>Mettre en cache les t\u00e9l\u00e9chargements.</li> </ul>"},{"location":"fiches/proxy-sortant/#points-cles","title":"Points cl\u00e9s","text":""},{"location":"fiches/proxy-sortant/#deux-approches-possibles-pour-le-filtrage","title":"Deux approches possibles pour le filtrage","text":"<ul> <li>Filtrage en liste blanche : Seuls les sites autoris\u00e9s sont accessibles.</li> <li>Filtrage en liste noire : Seuls les sites interdits sont bloqu\u00e9s.</li> </ul>"},{"location":"fiches/proxy-sortant/#un-proxy-permet-un-controle-plus-fin-quun-pare-feu","title":"Un proxy permet un contr\u00f4le plus fin qu'un pare-feu","text":"<p>Avec certains pare-feux, il est possible de r\u00e9aliser un filtrage par FQDN (nom de domaine). Toutefois, le filtrage au niveau d'un pare-feux reste un filtrage par IP (ex : autoriser l'acc\u00e8s \u00e0 https://ignf.github.io sans autoriser l'acc\u00e8s \u00e0 https://mborne.github.io sera d\u00e9licat).</p>"},{"location":"fiches/proxy-sortant/#le-support-des-fichiers-dauto-configuration-est-limite","title":"Le support des fichiers d'auto-configuration est limit\u00e9","text":"<p>Les syst\u00e8mes et navigateurs sont g\u00e9n\u00e9ralement configur\u00e9s \u00e0 l'aide d'un fichier <code>proxy.pac</code> qui est un script JavaScript indiquant s'il faut utiliser un proxy pour acc\u00e9der \u00e0 une ressource en fonction du nom de domaine ou de l'IP (voir wikipedia.org - Fichier .PAC).</p> <p>L'utilisation d'un proxy est donc g\u00e9n\u00e9ralement transparente pour surfer sur un intranet ou internet. Toutefois, de nombreux outils en ligne de commande (<code>curl</code>, <code>vagrant</code>, <code>terraform</code>, <code>ansible</code>, <code>docker</code>...) et biblioth\u00e8ques de programmation r\u00e9alisant des requ\u00eates HTTP ne savent pas exploiter ce script <code>proxy.pac</code>...</p>"},{"location":"fiches/proxy-sortant/#configurer-lutilisation-dun-proxy","title":"Configurer l'utilisation d'un proxy","text":"<p>En fonction des cas, les fiches suivantes pourront vous aider \u00e0 travailler derri\u00e8re un proxy :</p> <ul> <li>Configurer l'utilisation du proxy \u00e0 l'aide de variables d'environnement qui couvrira de nombreux cas (curl, ansible, vagrant, terraform...)</li> <li>Travailler derri\u00e8re un proxy avec Docker qui traite le t\u00e9l\u00e9chargement, la construction et l'utilisation d'image en pr\u00e9sence d'un proxy.</li> </ul>"},{"location":"fiches/proxy-sortant/#supporter-lutilisation-dun-proxy","title":"Supporter l'utilisation d'un proxy","text":"<p>Pour permettre l'ex\u00e9cution d'une application en environnement s\u00e9curis\u00e9, il est recommand\u00e9 de s'appuyer sur les variables d'environnement suivantes :</p> Nom Exemple HTTP_PROXY <code>\"http://proxy:3128/\"</code> HTTPS_PROXY <code>\"http://proxy:3128/\"</code> NO_PROXY <code>\"localhost,127.0.0.1\"</code>"},{"location":"fiches/proxy-sortant/#ressources","title":"Ressources","text":"<ul> <li>codes.gouv.fr - Socle Interminist\u00e9riel des Logiciels Libres - Squid</li> <li>doc.ubuntu-fr.org - squid</li> </ul>"},{"location":"fiches/proxy-sortant/proxy-docker/","title":"Travailler derri\u00e8re un proxy avec Docker","text":"<p>En pr\u00e9sence d'un proxy sortant pour l'acc\u00e8s aux ressources internet, il convient de :</p> <ul> <li>Configurer le d\u00e9mon pour t\u00e9l\u00e9charger les images en utilisant le proxy</li> <li>Construire les images en sp\u00e9cifiant le proxy avec des arguments de construction</li> <li>D\u00e9marrer les conteneurs en sp\u00e9cifiant le proxy avec des variables d'environnement</li> </ul>"},{"location":"fiches/proxy-sortant/proxy-docker/#configurer-le-demon-pour-telecharger-les-images-en-utilisant-le-proxy","title":"Configurer le d\u00e9mon pour t\u00e9l\u00e9charger les images en utilisant le proxy","text":"<p>Sympt\u00f4me</p> <p><code>docker pull</code> ou <code>docker run</code> ne fonctionne pas (et ce n'est pas un probl\u00e8me de r\u00e9solution DNS).</p> <ul> <li>Cr\u00e9er un fichier <code>/etc/systemd/system/docker.service.d/http-proxy.conf</code> en adaptant le contenu suivant :</li> </ul> <pre><code>[Service]\nEnvironment=\"HTTP_PROXY=http://proxy:3128\"\nEnvironment=\"HTTPS_PROXY=http://proxy:3128\"\nEnvironment=\"NO_PROXY=localhost,127.0.0.1,::1\"\n</code></pre> <ul> <li> <p>V\u00e9rifier que \u0300<code>/etc/default/docker</code> n'efface pas ces variables en commentant les lignes correspondantes.</p> </li> <li> <p>Recharger la configuration du d\u00e9mon docker et le red\u00e9marrer :</p> </li> </ul> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre> <ul> <li>Tester avec par exemple <code>docker pull nginx</code></li> </ul>"},{"location":"fiches/proxy-sortant/proxy-docker/#construire-les-images-en-specifiant-le-proxy-avec-des-arguments-de-construction","title":"Construire les images en sp\u00e9cifiant le proxy avec des arguments de construction","text":"<p>Sympt\u00f4me</p> <p>La construction d'une image \u00e0 partir d'un Dockerfile \u00e9choue sur les lignes <code>RUN apt-get update</code>, <code>RUN curl</code>,...</p> <p>Pour la construction, il est possible de faire suivre les variables d'environnement pour la construction comme suit : </p> <pre><code>docker build --build-arg http_proxy --build-arg https_proxy ...\n</code></pre> <p>Avec un fichier <code>docker-compose.yaml</code>, nous trouverons l'\u00e9quivalent suivant :</p> <pre><code>services:\n  api:\n    # ...\n    build:\n      args:\n        - http_proxy\n        - https_proxy\n    # ...\n</code></pre> <p>Remarques :</p> <ul> <li>Par rapport \u00e0 l'approche consistant \u00e0 utiliser <code>ENV HTTP_PROXY=...</code> dans les images, nous \u00e9vitons ainsi de persister un proxy dans les images r\u00e9sultantes.</li> <li>docs.docker.com - Configure the Docker client propose de configurer le proxy via <code>~/.docker/config.json</code> mais cette approche ne fonctionnera pas avec certaines usines logicielles.</li> </ul>"},{"location":"fiches/proxy-sortant/proxy-docker/#demarrer-les-conteneurs-en-specifiant-le-proxy-avec-des-variables-denvironnement","title":"D\u00e9marrer les conteneurs en sp\u00e9cifiant le proxy avec des variables d'environnement","text":"<p>Sympt\u00f4me</p> <p>Mon conteneur n'arrive pas \u00e0 acc\u00e9der \u00e0 des ressources ou services sur internet (et ce n'est pas un probl\u00e8me de r\u00e9solution DNS).</p> <p>Pour l'ex\u00e9cution, il est possible de d\u00e9finir le proxy \u00e0 l'aide de variables d'environnement : </p> <pre><code>docker run -e HTTP_PROXY=$HTTP_PROXY -e HTTPS_PROXY=$HTTPS_PROXY ...\n</code></pre> <p>Avec un fichier <code>docker-compose.yaml</code>, nous trouverons l'\u00e9quivalent suivant :</p> <pre><code>services:\n  api:\n    # ...\n    environment:\n      - HTTP_PROXY=${HTTP_PROXY}\n      - HTTPS_PROXY=${HTTPS_PROXY}\n      - http_proxy=${HTTP_PROXY}\n      - https_proxy=${HTTPS_PROXY}\n    # ...\n</code></pre>"},{"location":"fiches/proxy-sortant/proxy-env-vars/","title":"Configurer l'utilisation d'un proxy \u00e0 l'aide de variables d'environnement","text":""},{"location":"fiches/proxy-sortant/proxy-env-vars/#principe","title":"Principe","text":"<p>De nombreux outils supportent la configuration d'un proxy sortant \u00e0 l'aide des variables d'environnement <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code> et <code>NO_PROXY</code>. Par exemple :</p> <pre><code>export HTTP_PROXY=http://proxy:3128/\nexport HTTPS_PROXY=http://proxy:3128/\nexport http_proxy=http://proxy:3128/\nexport https_proxy=http://proxy:3128/\n# \u00e0 adapter!\nexport NO_PROXY=localhost,127.0.0.1,vagrantbox-1,vagrantbox-2,vagrantbox-3\n</code></pre>"},{"location":"fiches/proxy-sortant/proxy-env-vars/#configuration-dune-machine-ubuntu","title":"Configuration d'une machine Ubuntu","text":""},{"location":"fiches/proxy-sortant/proxy-env-vars/#pour-un-utilisateur","title":"Pour un utilisateur","text":"<ul> <li>Ajouter les lignes pr\u00e9c\u00e9dentes au fichier <code>~/.profile</code></li> <li>Se d\u00e9connecter et rouvrir une session (ou recharger ce fichier avec <code>source ~/.profile</code>)</li> </ul>"},{"location":"fiches/proxy-sortant/proxy-env-vars/#pour-le-systeme-complet","title":"Pour le syst\u00e8me complet","text":"<ul> <li>Ajouter les lignes pr\u00e9c\u00e9dentes au fichier <code>/etc/environment</code> (sans toucher \u00e0 la ligne d\u00e9finissant la variable d'environnement <code>PATH</code>!)</li> <li>Red\u00e9marrer la machine</li> </ul>"},{"location":"fiches/proxy-sortant/proxy-env-vars/#configuration-dune-machine-windows","title":"Configuration d'une machine Windows","text":"<p>Un dialogue \"Modifier les variables d'environnement de votre compte\" permet d'ajouter les variables <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code> et <code>NO_PROXY</code> :</p> <ul> <li>Option 1 : Chercher \"environnement\" dans \"param\u00e8tres\"</li> <li>Option 2 : Lancer la commande <code>rundll32 sysdm.cpl,EditEnvironmentVariables</code> dans un terminal <code>cmd.exe</code>.</li> </ul>"},{"location":"fiches/reseau/bricolage-router/","title":"R\u00e9seau - configuration d'une machine en router et passerelle pour internet","text":""},{"location":"fiches/reseau/bricolage-router/#principe","title":"Principe","text":"<ul> <li>Une machine \"router\" avec 2 r\u00e9seau :</li> <li>enp0s3 = r\u00e9seau NAT VirtualBox pour l'acc\u00e8s \u00e0 internet</li> <li>enp0s8 = r\u00e9seau priv\u00e9 h\u00f4te VirtualBox ( IP : <code>192.168.159.1</code> )</li> <li>Une machine \"vm-1\" avec 1 seul r\u00e9seau :</li> <li>enp0s3 = r\u00e9seau priv\u00e9 h\u00f4te VirtualBox ( IP : <code>192.168.159.10</code> (statique) / <code>192.168.159.50</code> (DHCP))</li> </ul>"},{"location":"fiches/reseau/bricolage-router/#cote-router","title":"C\u00f4t\u00e9 router","text":""},{"location":"fiches/reseau/bricolage-router/#configuration-de-lip-statique","title":"Configuration de l'IP statique","text":"<p>Dans <code>/etc/network/interfaces</code> :</p> <pre><code>auto enp0s8\niface enp0s8 inet static\n  address 192.168.159.1\n  netmask 255.255.255.0\n</code></pre> <pre><code># red\u00e9marrage r\u00e9seau\nsudo systemctl networking restart\n\n# contr\u00f4le IP\nip address\n</code></pre>"},{"location":"fiches/reseau/bricolage-router/#activation-du-routage","title":"Activation du routage","text":"<pre><code># Activer le routage IPv4 de mani\u00e8re persistante\necho \"net.ipv4.ip_forward=1\" | sudo tee -a /etc/sysctl.d/99-custom.conf &gt; /dev/null\n\n# Appliquer les param\u00e8tres\nsudo sysctl --system\n</code></pre>"},{"location":"fiches/reseau/bricolage-router/#configuration-du-pare-feu-et-du-nat","title":"Configuration du pare-feu et du NAT","text":"<pre><code># 1. Tout bloquer par d\u00e9faut\nsudo iptables -P INPUT DROP\nsudo iptables -P OUTPUT ACCEPT\nsudo iptables -P FORWARD DROP\n\n# 2. Autoriser les connexions \u00e9tablies et relatives\nsudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\nsudo iptables -A FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n# 3. Autoriser le trafic local (loopback)\nsudo iptables -A INPUT -i lo -j ACCEPT\n\n# 4. Autoriser NAT LAN \u2192 Internet\nsudo iptables -A FORWARD -i enp0s8 -o enp0s3 -j ACCEPT\nsudo iptables -t nat -A POSTROUTING -o enp0s3 -j MASQUERADE\n\n# Pour v\u00e9rifier \nsudo iptables -L FORWARD -v -n\n\n# Pour sauvegarder la configuration iptables\nsudo apt install iptables-persistent -y\nsudo netfilter-persistent save\nsudo systemctl status netfilter-persistent\n</code></pre>"},{"location":"fiches/reseau/bricolage-router/#configuration-dun-serveur-dhcp-optionnel","title":"Configuration d'un serveur DHCP (optionnel)","text":"<p>Dans <code>/etc/default/isc-dhcp-server</code> :</p> <pre><code># Defaults for isc-dhcp-server (sourced by /etc/init.d/isc-dhcp-server)\n\n# Path to dhcpd's config file (default: /etc/dhcp/dhcpd.conf).\nDHCPDv4_CONF=/etc/dhcp/dhcpd.conf\n#DHCPDv6_CONF=/etc/dhcp/dhcpd6.conf\n\n# Path to dhcpd's PID file (default: /var/run/dhcpd.pid).\n#DHCPDv4_PID=/var/run/dhcpd.pid\n#DHCPDv6_PID=/var/run/dhcpd6.pid\n\n# Additional options to start dhcpd with.\n#   Don't use options -cf or -pf here; use DHCPD_CONF/ DHCPD_PID instead\n#OPTIONS=\"\"\n\n# On what interfaces should the DHCP server (dhcpd) serve DHCP requests?\n#   Separate multiple interfaces with spaces, e.g. \"eth0 eth1\".\nINTERFACESv4=\"enp0s8\"\nINTERFACESv6=\"\"\n</code></pre> <p>Dans <code>/etc/dhcp/dhcpd.conf</code> :</p> <pre><code>option domain-name \"vbox.local\";\noption domain-name-servers 1.1.1.1, 8.8.8.8;\ndefault-lease-time 600;\nmax-lease-time 7200;\nddns-update-style none;\nsubnet 192.168.159.0 netmask 255.255.255.0 {\n  range 192.168.159.50 192.168.159.250;\n  option routers 192.168.159.1;\n}\n</code></pre>"},{"location":"fiches/reseau/bricolage-router/#cote-vm-1","title":"C\u00f4t\u00e9 vm-1","text":"<p>Avec enp0s3 = 192.168.159.1/24 = r\u00e9seau priv\u00e9 h\u00f4te</p> <p>Dans <code>/etc/network/interfaces</code>, on configure comme suit pour IP statique :</p> <pre><code>auto enp0s3\niface enp0s3 inet static\n  address 192.168.159.10\n  netmask 255.255.255.0\n  gateway 192.168.159.1\n</code></pre> <p>...et comme suit en DHCP :</p> <pre><code>auto enp0s3\niface enp0s3 inet dhcp\n</code></pre>"},{"location":"historique/","title":"Historique","text":""},{"location":"historique/#integration-des-fiches-sur-les-outils-et-annexes-devops","title":"Int\u00e9gration des fiches sur les outils et annexes DevOps","text":"<p>Avril 2025</p> <ul> <li> Bascule sur un rendu MkDocs avec Material for MkDocs.</li> <li> Ajout de mentions l\u00e9gales.</li> <li> D\u00e9placement de l'inventaire des d\u00e9p\u00f4ts.</li> <li> Adaptation GitHub actions</li> <li> Int\u00e9gration de https://github.com/mborne/toolbox dans \"Outils\"</li> <li> Int\u00e9gration des annexes du cours-devops.</li> </ul>"},{"location":"historique/#version-initiale","title":"Version initiale","text":"<p>Juin 2024</p> <p>La version initiale de mborne.github.io correspondait \u00e0 un travail d'inventaire des d\u00e9p\u00f4ts et des tests d'indexation avec Google Search Console.</p>"},{"location":"mentions-legales/","title":"Mentions l\u00e9gales","text":""},{"location":"mentions-legales/#editeur-du-site","title":"\u00c9diteur du site","text":"<p>mborne.github.io est un site personnel de Micka\u00ebl Borne utilis\u00e9 pour pr\u00e9senter des ressources g\u00e9r\u00e9es sous forme de d\u00e9p\u00f4t GitHub.</p>"},{"location":"mentions-legales/#contact","title":"Contact","text":"<ul> <li>Pour toute question ou suggestion, vous pouvez ouvrir une issue sur le d\u00e9p\u00f4t GitHub.</li> <li>Pour me contacter par mail, admin@quadtreeworld.net.</li> </ul>"},{"location":"mentions-legales/#limite-de-responsabilite","title":"Limite de responsabilit\u00e9","text":"<ul> <li>Le contenu de ce site est fourni en l'\u00e9tat. Vous l'utilisez \u00e0 vos risques et p\u00e9rils, notamment si certaines informations se r\u00e9v\u00e9laient inexactes ou incompl\u00e8tes.</li> <li>Tout avis ou opinion exprim\u00e9 sur un outil, un syst\u00e8me ou autre n'engage que moi.</li> <li>Ce site peut r\u00e9f\u00e9rencer des sites tiers. Il ne saurait \u00eatre tenu responsable de leur contenu.</li> <li>Certains contenus p\u00e9dagogiques pr\u00e9sents sur ce site sont produits pour des formations que je dispense. Ils sont mis \u00e0 disposition librement, sans vocation commerciale.</li> <li>Ces contenus ne font l'objet d'aucune validation ou relecture syst\u00e9matique de la part de mes employeurs ou donneurs d\u2019ordre. Leur publication rel\u00e8ve d'une initiative personnelle. La responsabilit\u00e9 de mon employeur ne saurait donc \u00eatre engag\u00e9e quant \u00e0 leur contenu.</li> </ul>"},{"location":"mentions-legales/#hebergement","title":"H\u00e9bergement","text":"<p>Ce site est h\u00e9berg\u00e9 avec GitHub Pages :</p> <pre><code>GitHub, Inc\n88 Colin P Kelly Jr St\nSan Francisco, CA 94107 - United States\n+1 (877) 448-4820\n</code></pre>"},{"location":"outils/","title":"Les outils","text":"<p>Ce dossier regroupe des notes (aide m\u00e9moire) et des scripts d'installation pour diff\u00e9rents outils.</p> <p>Mise en garde</p> <ul> <li>Certains scripts ont vocation \u00e0 \u00eatre utilis\u00e9 sur une machine personnelle jetable (ex : VM VirtualBox, WSL2,...)</li> <li>Ces fiches et scripts d'installation sont mis \u00e0 disposition sur GitHub bien qu'ils ne soient pas tous finalis\u00e9s (la documentation peut \u00eatre plus propre, les scripts ne sont pas blind\u00e9s,...)</li> <li>Certains scripts et outils ne sont pas adapt\u00e9s pour une utilisation en entreprise.</li> </ul>"},{"location":"outils/#programmation","title":"Programmation","text":"<ul> <li>JavaScript</li> <li>Python</li> <li>Conda</li> <li>PHP</li> <li>Java</li> <li>C++</li> <li>Rust</li> <li>Go</li> </ul>"},{"location":"outils/#virtualisation","title":"Virtualisation","text":"<ul> <li>wsl - Windows Subsystem For Linux</li> <li>kvm - Kernel-based Virtual Machine</li> </ul>"},{"location":"outils/#conteneurs","title":"Conteneurs","text":"<ul> <li>docker avec docker/install.sh</li> <li>cuda-toolkit avec :<ul> <li>cuda-toolkit/install-wsl.sh pour son installation en contexte WSL</li> <li>cuda-toolkit/install-container-toolkit.sh pour son utilisation via docker</li> </ul> </li> </ul>"},{"location":"outils/#kubernetes","title":"Kubernetes","text":"<p>Les principaux clients :</p> <ul> <li>kubectl avec kubectl/install.sh</li> <li>helm avec helm/install.sh</li> </ul> <p>Pour installer Kubernetes en local, voir :</p> <ul> <li>K3S</li> <li>Kind pour mborne/docker-devbox - kind/quickstart.sh (ne pas d\u00e9buter Kubernetes avec cette option)</li> <li>minikube</li> </ul> <p>Pour une installation s\u00e9rieuse, voir :</p> <ul> <li>blog.stephane-robert.info - Kubernetes - D\u00e9ploiement de clusters Kubernetes qui pr\u00e9sente les diff\u00e9rentes options.</li> </ul>"},{"location":"outils/#cloud-et-iac","title":"Cloud et IaC","text":"<ul> <li>Ansible</li> <li>Terraform de hashicorp</li> <li>OpenTofu (fork de Terraform)</li> <li>gcloud/install.sh</li> </ul>"},{"location":"outils/#gestion-de-fichiers","title":"Gestion de fichiers","text":"<ul> <li>rclone/install.sh</li> <li>restic/install.sh</li> </ul>"},{"location":"outils/#base-de-donnees-et-sig","title":"Base de donn\u00e9es et SIG","text":"<ul> <li>dbeaver/install.sh</li> <li>qgis : un SIG libre avec un riche ensemble de fonctionnalit\u00e9s<ul> <li>qgis/install.sh : Script d'installation sous Ubuntu.</li> <li>qgis/helloworld-gpf.qgz : Exemple de carte affichant des donn\u00e9es G\u00e9oplateforme.</li> </ul> </li> <li>postgresql/install-client.sh (<code>psql</code>, <code>pg_dump</code>,...)</li> </ul>"},{"location":"outils/#generation-de-certificats-https","title":"G\u00e9n\u00e9ration de certificats (HTTPS)","text":"<p>Voir aussi Lego pour automiser le challenge DNS</p> <ul> <li>certbot</li> <li>mkcert</li> </ul>"},{"location":"outils/#documentation","title":"Documentation","text":"<p>Pour produire des tableaux en markdown :</p> <ul> <li>tablesgenerator.com - markdown_tables</li> </ul> <p>Pour dessiner des sch\u00e9mas :</p> <ul> <li>draw.io (desktop) et www.diagrams.net (en ligne)</li> </ul> <p>\ud83d\udca1Astuce : Inclure une copie du diagramme en exportant en PNG (<code>.drawio.png</code>) permet d'avoir des images \u00e9ditables!</p> <ul> <li>DIA et StarUML (payant) sont particuli\u00e8rement efficaces pour les diagrammes UML.</li> <li>GanttProject se focalise sur les diagrammes de Gantt</li> </ul> <p>Pour g\u00e9n\u00e9rer des sch\u00e9mas (schema as code):</p> <ul> <li>Mermaid offre une syntaxe pour diff\u00e9rents types de sch\u00e9ma (Mindmap, diagramme de classe UML, diagramme de Gantt,...).</li> <li>Diagrams (diagrams.mingrammer.com) s'appuie sur Graphviz avec des classes pour les sch\u00e9mas d'architecture techniques.</li> <li>www.websequencediagrams.com se sp\u00e9cialise sur les diagrammes de s\u00e9quences.</li> </ul> <p>Pour les sp\u00e9cifications d'API REST :</p> <ul> <li>editor.swagger.io</li> </ul> <p>Pour enregistrer le terminal :</p> <ul> <li>asciinema</li> </ul>"},{"location":"outils/#synthese-vocale-tts","title":"Synth\u00e8se vocale (TTS)","text":"<ul> <li>pico avec pico/install.sh et pico/say.sh</li> <li>piper avec piper/create-venv.sh et piper/say.sh</li> <li>huggingface.co - Models - text-to-speech<ul> <li>coqui/XTTS-v2</li> </ul> </li> </ul>"},{"location":"outils/#llm","title":"LLM","text":"<p>Voir aussi github.com - mborne/llm-experimentations</p> <p>API en self-hosted :</p> <ul> <li>ollama : API permettant d'exploiter des grands mod\u00e8les de langage (LLMs).<ul> <li>ollama-models: Liste des mod\u00e8les LLMs disponibles sur Ollama</li> <li>ollama-api: Documentation d'API Ollama</li> <li>mborne/docker-devbox - ollama</li> </ul> </li> </ul> <p>UI de style ChatGPT :</p> <ul> <li>openwebui : Interface graphique offrant des fonctionnalit\u00e9s d'IA bas\u00e9es sur les mod\u00e8les de langage.<ul> <li>mborne/docker-devbox - open-webui</li> </ul> </li> </ul> <p>Biblioth\u00e8ques :</p> <ul> <li>langchain-python: Framework pour le d\u00e9veloppement d'application s'appuyant sur des grands mod\u00e8les de langage (LLMs).</li> <li>langchain-js: Version JavaScript de langchain.</li> </ul> <p>MCP :</p> <ul> <li>Model Context Protocol servers : liste de serveurs existants</li> <li>mcp-framework.com - Quickstart : pour d\u00e9velopper son propre MCP<ul> <li>github.com - mborne/llm-experimentations - mcp-server-gpf : test d'impl\u00e9mentation d'un serveur MCP appelant un service G\u00e9oplateforme</li> </ul> </li> </ul>"},{"location":"outils/#antivirus","title":"Antivirus","text":"<ul> <li>ClamAV avec clamav/install.sh</li> </ul>"},{"location":"outils/#reseau","title":"R\u00e9seau","text":"<ul> <li>dig pour tester la r\u00e9solution de nom.</li> <li>dnasmasq pour installer un serveur DNS.</li> <li>ufw pour configurer le pare-feu local (alternatives : utiliser directement iptables / nftables)</li> <li>wireguard pour monter facilement un VPN.</li> <li>miniupnpc</li> </ul>"},{"location":"outils/#securite","title":"S\u00e9curit\u00e9","text":"<p>Scanner de vuln\u00e9rabilit\u00e9s pour Docker et Kubernetes :</p> <ul> <li>Trivy avec trivy/install.sh</li> <li>Kubescape</li> </ul> <p>Contr\u00f4le de la configuration TLS et des ent\u00eates de s\u00e9curit\u00e9 :</p> <ul> <li>www.sslshopper.com - SSL Checker : Contr\u00f4le de la configuration TLS (particuli\u00e8rement efficace pour d\u00e9tecter des probl\u00e8mes r\u00e9current li\u00e9s \u00e0 l'absence des certificats interm\u00e9diaires)</li> <li>securityheaders.com : Contr\u00f4le de configuration des ent\u00e8tes de s\u00e9curit\u00e9 (Strict-Transport-Security (HSTS), Content-Security-Policy (CSP),...)</li> </ul> <p>Durcissement de la configuration des serveurs (SSH, PostgreSQL, Nginx,...) :</p> <ul> <li>dev-sec.io : Recommandations avec une approche DevSecOps inspirante (chaque recommandation est la documentation d'un test automatis\u00e9 et de solutions de rem\u00e9diation incluant des playbooks ansible)</li> </ul>"},{"location":"outils/#licence","title":"Licence","text":"<p>MIT</p>"},{"location":"outils/ansible/","title":"Ansible","text":"<p>Ansible est un outil permettant d'automatiser la configuration et le d\u00e9ploiement de syst\u00e8mes.</p>"},{"location":"outils/ansible/#points-cles","title":"Points cl\u00e9s","text":"<ul> <li>Ansible utilise le format YAML pour d\u00e9crire les t\u00e2ches \u00e0 ex\u00e9cuter.</li> <li>Les scripts de d\u00e9ploiement sont d\u00e9claratifs et idempotents (rejouer un script ne provoque pas d'effet de bord).</li> <li>Ansible fonctionne sans agent (connexion SSH ou appel d'API sur les syst\u00e8mes administr\u00e9s).</li> <li>Les t\u00e2ches sont organis\u00e9es en playbooks, eux-m\u00eames structur\u00e9s en r\u00f4les r\u00e9utilisables.</li> <li>Ansible peut g\u00e9rer des infrastructures complexes via des inventaires statiques ou dynamiques.</li> <li>Ansible doit \u00eatre ex\u00e9cut\u00e9 sur un h\u00f4te Linux (c.f. docs.ansible.com - Can Ansible run on Windows?) mais est capable de g\u00e9rer des machines windows avec Ansible \u00e0 l'aide de modules d\u00e9di\u00e9s.</li> </ul>"},{"location":"outils/ansible/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>Une machine ou VM sous Linux (c.f. docs.ansible.com - Can Ansible run on Windows?)</li> <li>Configurer les variables d'environnement pour utilisation d'un proxy sortant</li> </ul>"},{"location":"outils/ansible/#installation","title":"Installation","text":"<ul> <li>docs.ansible.com - Installation Guide documente l'installation.</li> <li>ansible/install.sh traite le cas Ubuntu avec l'ajout du d\u00e9p\u00f4t \"ppa:ansible/ansible\" et l'installation du package :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/ansible/install.sh | bash\n</code></pre> <ul> <li>ansible/create-venv.sh exploite <code>python3 -m venv ~/ansible-venv</code> pour isoler l'installation :</li> </ul> <pre><code># Pour cr\u00e9er ~/ansible-venv :\ncurl -sS https://mborne.github.io/outils/ansible/create-venv.sh | bash\n\n# Pour l'utiliser :\nsource ~/ansible-venv/bin/activate\n</code></pre> <ul> <li>Pour tester l'installation :</li> </ul> <pre><code>ansible --version\nansible -l localhost -m ping localhost\n</code></pre>"},{"location":"outils/ansible/#les-principaux-executables","title":"Les principaux ex\u00e9cutables","text":"<p>Ansible se d\u00e9compose en plusieurs programmes :</p> Ex\u00e9cutable Fonction ansible Ex\u00e9cuter une t\u00e2che sur les machines d'un inventaire ansible-playbook Ex\u00e9cuter une liste de t\u00e2che (playbook) sur les machines d'un inventaire ansible-galaxy Cr\u00e9ation et t\u00e9l\u00e9chargement de playbook partag\u00e9s via galaxy.ansible.com ou via git ansible-vault Gestion de fichiers chiffr\u00e9s pour le stockage des secrets"},{"location":"outils/ansible/#quelques-exemples","title":"Quelques exemples","text":"<p>Les exemples du cours DevOps avec des VM :</p> <ul> <li>github.com - mborne/vagrantbox qui permet de configurer des VM de DEV avec Ansible.</li> <li>github.com - mborne/geostack-deploy - ansible qui illustre le d\u00e9ploiement de GeoStack sur les VM vagrantbox</li> <li>github.com - mborne/k3s-deploy qui permet de d\u00e9ployer un cluster Kubernetes avec K3S sur les VM vagrantbox.</li> </ul> <p>Quelques exemples compl\u00e9mentaires :</p> <ul> <li>github.com - geerlingguy/ansible-for-devops pour les exemples associ\u00e9s au livre Ansible for DevOps de Jeff Geerling qui met \u00e0 disposition de nombreuses ressources pour ansible (c.f. https://ansible.jeffgeerling.com/).</li> <li>github.com - osm-fr/ansible-scripts qui illustre l'utilisation de Ansible pour la gestion des serveurs openstreetmap.fr</li> </ul>"},{"location":"outils/ansible/#ressources","title":"Ressources","text":"<ul> <li>docs.ansible.com - Basic Concepts</li> <li>docs.ansible.com - Getting started with Ansible</li> <li>docs.ansible.com - How to build your inventory</li> <li>docs.ansible.com - Best Practices</li> <li>Ansible Galaxy qui pr\u00e9sente les d\u00e9p\u00f4t de playbook partag\u00e9s.</li> <li>blog.stephane-robert.info - Ma\u00eetriser Ansible pour un cours complet en Fran\u00e7ais.</li> </ul>"},{"location":"outils/asciinema/","title":"asciinema - enregistrement du terminal","text":"<p>asciinema est un utilitaire permettant d'enregistrer les commandes et leurs r\u00e9sultats dans un terminal.</p>"},{"location":"outils/asciinema/#installation","title":"Installation","text":"<ul> <li>asciinema/install.sh assure l'installation du package \"asciinema\" :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/asciinema/install.sh | bash\n</code></pre>"},{"location":"outils/asciinema/#utilisation","title":"Utilisation","text":"<p>Voir <code>asciinema --help</code> :</p> <pre><code># D\u00e9marrer l'enregistrement\nasciinema rec /tmp/demo.cast\n\n# ex\u00e9cuter des commandes...\n\n# CTRL+D pour arr\u00eater l'enregistrement\ncat /tmp/demo.cast\n\n# Lire l'enregistrement\nasciinema play /tmp/demo.cast\n</code></pre>"},{"location":"outils/asciinema/#conversion-en-svg","title":"Conversion en SVG","text":"<pre><code># installer l'ex\u00e9cutable svg-term\nnpm install -g svg-term-cli\n\n# convertir comme suit\ncat /tmp/demo.cast | svg-term --out docs/demo.svg\n</code></pre>"},{"location":"outils/asciinema/#ressources","title":"Ressources","text":"<ul> <li>asciinema.org - Getting started</li> <li>github.com - asciinema/asciinema-player pour l'int\u00e9gration dans une page HTML :</li> </ul> <pre><code>&lt;div id=\"asciinema-player\"&gt;&lt;/div&gt;\n&lt;script&gt;\nAsciinemaPlayer.create(\n    './demo.cast', \n    document.getElementById('asciinema-player'),\n    {\n        preload: true\n    }\n);\n&lt;/script&gt;\n</code></pre> <ul> <li>github.com - marionebl/svg-term-cli pour convertir en SVG.</li> </ul>"},{"location":"outils/bash/","title":"Bash","text":""},{"location":"outils/bash/#alias","title":"Alias","text":"<p><code>~/.bash_aliases</code> :</p> <pre><code>function yaml_validate {\n  python -c 'import sys, yaml, json; yaml.safe_load(sys.stdin.read())'\n}\n\nfunction yaml2json {\n  python -c 'import sys, yaml, json; print(json.dumps(yaml.safe_load(sys.stdin.read())))'\n}\n\nfunction yaml2json_pretty {\n  python -c 'import sys, yaml, json; print(json.dumps(yaml.safe_load(sys.stdin.read()), indent=2, sort_keys=False))'\n}\n\nfunction json_validate {\n  python -c 'import sys, yaml, json; json.loads(sys.stdin.read())'\n}\n\nfunction json2yaml {\n  python -c 'import sys, yaml, json; print(yaml.dump(json.loads(sys.stdin.read())))'\n}\n</code></pre> <p>Source : https://stackoverflow.com/a/60585911/28740388</p>"},{"location":"outils/certbot/","title":"certbot","text":"<p>Certbot est un outil en ligne de commande qui automatise l\u2019obtention et le renouvellement de certificats SSL/TLS gratuits via Let's Encrypt.</p>"},{"location":"outils/certbot/#installation","title":"Installation","text":"<ul> <li>certbot/install.sh ajoute le d\u00e9p\u00f4t \"ppa:certbot/certbot\" et installe le package :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/certbot/install.sh | bash\n</code></pre>"},{"location":"outils/certbot/#ressources","title":"Ressources","text":"<ul> <li>certbot.eff.org - instructions guide en fonction du cas d'utilisation.</li> </ul>"},{"location":"outils/clamav/","title":"ClamAV","text":"<p>ClamAV\u00ae est un antivirus opensource.</p>"},{"location":"outils/clamav/#installation","title":"Installation","text":"<ul> <li>clamav/install.sh assure l'installation du package :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/clamav/install.sh | bash\n</code></pre>"},{"location":"outils/clamav/#usage","title":"Usage","text":"<pre><code># ensure that definitions are updated\nsudo service clamav-freshclam status\n# see config\ncat /etc/clamav/freshclam.conf\n\n# scan HOME directory\nclamscan -r $HOME\n</code></pre>"},{"location":"outils/clamav/#ressources","title":"Ressources","text":"<ul> <li>www.clamav.net - ClamAV</li> <li>docs.clamav.net - ClamAV Documentation</li> <li>doc.ubuntu-fr.org - ClamAV</li> <li>Fichier de test Eicar</li> <li>URL pour la base de d\u00e9finition :<ul> <li>https://database.clamav.net/main.cvd</li> <li>https://database.clamav.net/daily.cvd</li> </ul> </li> </ul>"},{"location":"outils/conda/","title":"Conda","text":"<p>Conda est un gestionnaire de paquet syst\u00e8me et un gestionnaire d'environnement multi-OS (Windows, macOS et Linux).</p>"},{"location":"outils/conda/#installation","title":"Installation","text":"<p>Mise en garde</p> <ul> <li>Il existe plusieurs distributions (anaconda, miniconda, miniforge, micromamba) et plusieurs canaux (defaults, conda-forge,...) pour les packages.</li> <li>Un changement de licence en 2024 induit le paiement d'une licence dans certaines condititions pour certaines distributions et certains canaux (c.f. mivegec.pages.ird.fr - Avoiding the Pitfalls of the Anaconda License)</li> </ul> <ul> <li>conda-forge.org - Miniforge</li> <li>conda/install-miniforge.sh reprend la proc\u00e9dure github.com - conda-forge/miniforge - As part of a CI pipeline :</li> </ul> <pre><code>curl -sSL https://mborne.github.io/outils/conda/install-miniforge.sh | bash\n</code></pre> <ul> <li>github.com - conda-forge/miniforge - Uninstall</li> </ul>"},{"location":"outils/conda/#utilisation","title":"Utilisation","text":""},{"location":"outils/conda/#cas-mkdocs","title":"Cas mkdocs","text":"<pre><code>conda create --name mkdocs -c conda-forge python=3.12\nconda activate mkdocs\npip install mkdocs-material\npip install mkdocs-git-revision-date-localized-plugin\n\n# utilisation de mkdocs\ngit clone https://github.com/mborne/mborne.github.io\ncd mborne.github.io\nmkdocs serve\n</code></pre>"},{"location":"outils/conda/#cas-gdal","title":"Cas GDAL","text":"<pre><code># cr\u00e9ation d'un environnement\nconda create --name gdal\n# activation d'un environnement\nconda activate gdal\n# installation du package gdal dans l'environnement\nconda install gdal=3.10.3\n\n# utilisation de GDAL...\nogr2ogr --version\n\n# d\u00e9sactivation de l'environnement\nconda deactivate\n</code></pre>"},{"location":"outils/conda/#cas-pytorch-avec-cuda","title":"Cas Pytorch avec CUDA","text":"<p>Pr\u00e9-requis :</p> <p>NVIDIA\u00ae CUDA\u00ae Toolkit</p> <pre><code>conda create --name torch  -c conda-forge python=3.12\nconda activate torch\n\n# https://pytorch.org/get-started/locally/\npip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu128\n\n# tester l'installation de CUDA\npython -c \"import torch; print('cuda available : ',torch.cuda.is_available())\"\n</code></pre>"},{"location":"outils/conda/#quelques-commandes-complementaires","title":"Quelques commandes compl\u00e9mentaires","text":"<pre><code># Contr\u00f4le de la configuration\n# (ex : channel conda-forge pr\u00e9sent, defaults absent)\nconda config --show channels\n\n# Lister les environnements\nconda env list\n\n# Supprimer un environnement\nconda env remove --name ENV_NAME\n</code></pre>"},{"location":"outils/conda/#ressources","title":"Ressources","text":"<ul> <li>conda-forge.org<ul> <li>conda-forge.org - download</li> <li>conda-forge.org - packages</li> </ul> </li> <li>mivegec.pages.ird.fr - Avoiding the Pitfalls of the Anaconda License</li> </ul>"},{"location":"outils/cuda-toolkit/","title":"NVIDIA\u00ae CUDA\u00ae Toolkit","text":""},{"location":"outils/cuda-toolkit/#installation-avec-wsl","title":"Installation avec WSL","text":"<ul> <li>Installer le driver CUDA Toolkit sur la machine Windows (il ne faut pas l'installer dans la VM Ubuntu)</li> <li>cuda-toolkit/install-wsl.sh traite les \u00e9tapes suivantes en contexte WSL</li> </ul>"},{"location":"outils/cuda-toolkit/#utilisation-avec-docker","title":"Utilisation avec docker","text":"<p>cuda-toolkit/install-container-toolkit.sh ajoute le support GPU \u00e0 docker en installant nvidia-container-toolkit avec un red\u00e9marrage et un test de bon fonctionnement :</p> <pre><code># ...\nsudo service docker restart\nsudo docker run --gpus all nvcr.io/nvidia/k8s/cuda-sample:nbody nbody -gpu -benchmark\n</code></pre>"},{"location":"outils/cuda-toolkit/#ressources","title":"Ressources","text":"<ul> <li>docs.nvidia.com - NVIDIA CUDA</li> <li>developer.nvidia.com - CUDA Toolkit Downloads</li> <li>docs.nvidia.com - CUDA on WSL User Guide</li> <li>docs.nvidia.com - Getting Started with CUDA on WSL 2</li> </ul>"},{"location":"outils/cxx/","title":"C++","text":"<p>C++ est un langage de bas niveau qui produit un binaire natif qui s\u2019ex\u00e9cute directement sur l\u2019OS, sans interpr\u00e9teur ni machine virtuelle.</p>","tags":["Langage"]},{"location":"outils/cxx/#construction","title":"Construction","text":"<ul> <li>cmake simplifie la gestion des d\u00e9pendances et la construction cross-platforme.</li> <li>conan apporte \u00e0 C++ un gestionnaire de d\u00e9pendance de m\u00eame niveau que pip pour Python ou npm pour JavaScript.</li> </ul>","tags":["Langage"]},{"location":"outils/cxx/#utilitaires","title":"Utilitaires","text":"<p>Voir www.boost.org - Library Documentation :</p> <ul> <li>boost-program_options pour l'\u00e9criture d'API CLI (voir Getting Started)</li> <li>boost-serialization pour la s\u00e9rialisation et d\u00e9s\u00e9rialisation des donn\u00e9es.<ul> <li>examples/leveldb-kvs/README.md</li> </ul> </li> <li>boost-test pour l'\u00e9criture de tests unitaires et fonctionnels.<ul> <li>examples/leveldb-kvs/test/KeyValueStoreTest.cpp</li> </ul> </li> <li>boost-log pour la g\u00e9n\u00e9ration de journaux applicatifs.</li> <li>boost-multi_index pour l'indexation sur plusieurs propri\u00e9t\u00e9s.<ul> <li>examples/boost-examples/boost-multi-index.cpp</li> </ul> </li> <li>boost-variant<ul> <li>examples/boost-examples/boost-variant-binary-visitor.cpp</li> </ul> </li> <li>boost-python<ul> <li>examples/boost-python-helloworld/README.md</li> </ul> </li> </ul>","tags":["Langage"]},{"location":"outils/cxx/#traitement-de-graphe","title":"Traitement de graphe","text":"<ul> <li>boost-graph<ul> <li>examples/boost-examples/boost-graph-helloworld.cpp</li> <li>github.com - mborne/graph-experiments : exp\u00e9rimentation <code>boost::graph</code> avec OGRFeature (GDAL) en vertex et edge.</li> </ul> </li> </ul>","tags":["Langage"]},{"location":"outils/cxx/#algebre-lineaire","title":"Alg\u00e8bre lin\u00e9aire","text":"<ul> <li>boost-ublas<ul> <li>examples/boost-examples/boost-ublas-gmp.cpp</li> <li>examples/boost-examples/boost-ublas-gmp.cpp</li> </ul> </li> <li>Eigen<ul> <li>examples/eigen-sparse-solve/main.cpp</li> </ul> </li> </ul>","tags":["Langage"]},{"location":"outils/cxx/#bibliotheques-pour-les-donnees-spatiales","title":"Biblioth\u00e8ques pour les donn\u00e9es spatiales","text":"<ul> <li>GDAL est un biblioth\u00e8que d'abstraction sur les donn\u00e9es g\u00e9ographiques (image et vecteur) supportant de nombreux formats et de nombreux syst\u00e8mes.<ul> <li>examples/cgal-helloworld/main.cpp</li> </ul> </li> <li>GEOS est une biblioth\u00e8que de calcul g\u00e9om\u00e9trique utilis\u00e9e par PostGIS (c'est un portage de JTS (Java Topology Suite) en C++)</li> <li>GMP - The GNU Multiple Precision Arithmetic Library<ul> <li>examples/gmpxx-bench-sum/main.cpp</li> <li>examples/gmpxx-helloworld/main.cpp</li> </ul> </li> </ul>","tags":["Langage"]},{"location":"outils/cxx/#autres","title":"Autres","text":"<ul> <li>OpenCV est une biblioth\u00e8que de traitement d'image.</li> <li>OpenSceneGraph est une biblioth\u00e8que de rendu 3D.<ul> <li>examples/osg-experiments</li> </ul> </li> <li>Qt est un framework de d\u00e9veloppement d'application graphique portable.</li> <li>STXXL est une impl\u00e9mentation de la STL pour les gros jeux de donn\u00e9es (stockage dans des fichiers).</li> </ul>","tags":["Langage"]},{"location":"outils/cxx/#ressources","title":"Ressources","text":"<ul> <li>roadmap.sh - C++</li> <li>cppreference.com est le manuel C++ de r\u00e9f\u00e9rence.</li> <li>www.codewars.com propose de nombreux d\u00e9fis en C++ (avec des corrections permettant de progresser)</li> <li>github.com - federico-busato/Modern-CPP-Programming</li> <li>stackoverflow.com - Cross-platform libraries that are free for commercial (or non-commercial) applications</li> </ul>","tags":["Langage"]},{"location":"outils/cxx/examples/boost-examples/","title":"boost-examples","text":"<p>Quelques exemples r\u00e9dig\u00e9s entre 2012 et 2015 pour prise en main de biblioth\u00e8ques Boost :</p> <ul> <li>boost-graph-helloworld.cpp est un exemple pour prise en main de boost::graph (2012)</li> <li>boost-multi-index.cpp est un test de boost::multi_index</li> <li>boost-ublas-gmp.cpp est un test boost::ublas avec GMP pour la r\u00e9solution exacte d'une \u00e9quation avec des rationnels (~2013)</li> <li>boost-ublas-projection.cpp est un test de boost::ublas pour la projection d'un point sur une droite (2013)</li> <li>boost-variant-binary-visitor.cpp est un test de boost::variant avec visiteur binaire / double dispatching (~2013)</li> </ul>"},{"location":"outils/cxx/examples/boost-examples/#construction","title":"Construction","text":"<ul> <li>Installer les pr\u00e9-requis :</li> </ul> <pre><code># Un compilateur et cmake\nsudo apt-get install clang cmake\n# Quelques biblioth\u00e8ques boost\nsudo apt-get install libboost-all-dev\n</code></pre> <ul> <li>Construire avec cmake :</li> </ul> <pre><code># pr\u00e9parer un dossier\nmkdir build\ncd build\ncmake ..\n# construire les ex\u00e9cutables\nmake\n</code></pre>"},{"location":"outils/cxx/examples/boost-python-helloworld/","title":"boost-python-helloworld","text":"<p>Exemple d'utilisation de boost-python pour cr\u00e9er un module sur une classe Point \u00e9crite en C++ (~2012, adapt\u00e9 pour fonctionn\u00e9 avec Python 3.10)</p>"},{"location":"outils/cxx/examples/boost-python-helloworld/#description","title":"Description","text":"<ul> <li>CMakeLists.txt : construction avec installation dans boost-python-helloworld/bin</li> <li>hello.cpp : Cr\u00e9ation du module python en C++</li> <li>demo/hello-test.py : Exemple d'utilisation du module</li> <li>Makefile : Raccourci pour la construction avec cmake &amp; l'ex\u00e9cution de hello-test.py</li> </ul>"},{"location":"outils/cxx/examples/boost-python-helloworld/#demo","title":"Demo","text":"<pre><code># construction de demo/hello.so et ex\u00e9cution de demo/hello-test.py\nmake demo\n</code></pre>"},{"location":"outils/cxx/examples/boost-python-helloworld/#voir-aussi","title":"Voir aussi","text":"<ul> <li>gradot.wordpress.com - Boost pour appeler du C++ depuis Python</li> </ul>"},{"location":"outils/cxx/examples/cgal-helloworld/","title":"cgal-helloworld","text":"<p>Exemple \u00e9crit en ~2012 pour prise en main de la biblioth\u00e8que CGAL pour un calcul de snap rounding.</p>"},{"location":"outils/cxx/examples/cgal-helloworld/#construction","title":"Construction","text":"<ul> <li>Installer les pr\u00e9-requis :</li> </ul> <pre><code># Un compilateur et cmake\nsudo apt-get install clang cmake\n# OpenSceneGraph\nsudo apt-get install libcgal-dev\n</code></pre> <ul> <li>Construire avec cmake :</li> </ul> <pre><code># pr\u00e9parer un dossier\nmkdir build\ncd build\ncmake ..\n# construire les ex\u00e9cutables\nmake\n</code></pre>"},{"location":"outils/cxx/examples/eigen-sparse-solve/","title":"eigen-sparse-solve","text":"<p>Test de la biblioth\u00e8que Eigen pour r\u00e9soudre des syst\u00e8mes creux (2013)</p>"},{"location":"outils/cxx/examples/eigen-sparse-solve/#construction","title":"Construction","text":"<ul> <li>Installer les pr\u00e9-requis :</li> </ul> <pre><code># Un compilateur et cmake\nsudo apt-get install clang cmake\n# Eigen\nsudo apt-get install libeigen3-dev\n</code></pre> <ul> <li>Construire avec cmake :</li> </ul> <pre><code># pr\u00e9parer un dossier\nmkdir build\ncd build\ncmake ..\n# construire les ex\u00e9cutables\nmake\n# ex\u00e9cuter la d\u00e9mo\n./eigen-sparse-solve\n</code></pre>"},{"location":"outils/cxx/examples/eigen-sparse-solve/#ressources","title":"Ressources","text":"<ul> <li>eigen.tuxfamily.org - Getting started</li> <li>eigen.tuxfamily.org - Using Eigen in CMake Projects</li> <li>gitlab.com - libeigen/eigen</li> </ul>"},{"location":"outils/cxx/examples/leveldb-kvs/","title":"leveldb-kvs","text":""},{"location":"outils/cxx/examples/leveldb-kvs/#description","title":"Description","text":"<p>Experimentation with leveldb and boost::serialization to provide a simple key-value store (2018)</p>"},{"location":"outils/cxx/examples/leveldb-kvs/#build","title":"Build","text":"<pre><code># install dependencies\nsudo apt-get install -y \\\n    libboost-serialization-dev libboost-timer-dev libboost-test-dev \\\n    libleveldb-dev\n\n# build with cmake\nmkdir build\ncd build\ncmake -DCMAKE_BUILD_TYPE=Release ..\nmake\n./test/lkvs-test --log_level=all\n\n./example/lkvs-bench\n</code></pre>"},{"location":"outils/cxx/examples/leveldb-kvs/#example","title":"Example","text":"<p>see example/lkvs-helloworld.cpp</p>"},{"location":"outils/cxx/examples/osg-experiments/","title":"osg-experiments","text":"<p>Quelques exemples \u00e9crits en 2013/2014 pour la prise en main de OpenSceneGraph :</p>"},{"location":"outils/cxx/examples/osg-experiments/#construction","title":"Construction","text":"<ul> <li>Installer les pr\u00e9-requis :</li> </ul> <pre><code># Un compilateur et cmake\nsudo apt-get install clang cmake\n# OpenSceneGraph\nsudo apt-get install libopenscenegraph-dev\n# Quelques biblioth\u00e8ques boost\nsudo apt-get install libboost-all-dev\n</code></pre> <ul> <li>Construire avec cmake :</li> </ul> <pre><code># pr\u00e9parer un dossier\nmkdir build\ncd build\ncmake ..\n# construire les ex\u00e9cutables\nmake\n</code></pre>"},{"location":"outils/cxx/examples/osg-experiments/#utilisation","title":"Utilisation","text":"<pre><code># simulation attraction n-corps\n./build/osg-nbody\n# affichage MNT au format ASC\n./build/osg-dem data/dem/reunion.asc\n# ...\n</code></pre>"},{"location":"outils/cxx/examples/osg-experiments/#screenshot","title":"Screenshot","text":""},{"location":"outils/dagster/","title":"Dagster","text":"<p>Dagster est un orchestrateur de donn\u00e9es con\u00e7u pour les ing\u00e9nieurs de donn\u00e9es.</p>"},{"location":"outils/dagster/#installation","title":"Installation","text":"<p>Avec conda :</p> <pre><code># cr\u00e9ation d'un environnement\nconda create --name dagster python=3.12\n# activation d'un environnement\nconda activate dagster\n# installation de Dagster\npip install dagster dagster-webserver\n\n# bonus :\n\n# installation de pandas\npip install pandas\n\n# installation de ogr2ogr dans l'environnement\nconda install gdal\n</code></pre>"},{"location":"outils/dagster/#premier-exemple","title":"Premier exemple","text":"<p>Voir exemple/bdpr-download/assets.py :</p> <pre><code>cd exemple/bdpr-download\ndagster dev -f assets.py\n</code></pre>"},{"location":"outils/dagster/#ressources","title":"Ressources","text":"<ul> <li>docs.dagster.io - installation</li> </ul>"},{"location":"outils/diagrams/","title":"Diagrams","text":"<p>Diagrams (diagrams.mingrammer.com) s'appuie sur Graphviz pour g\u00e9n\u00e9rer des sch\u00e9mas d'architecture.</p>"},{"location":"outils/diagrams/#installation","title":"Installation","text":"<pre><code>sudo apt install graphviz\npip install --user diagrams\n</code></pre>"},{"location":"outils/diagrams/#usage","title":"Usage","text":""},{"location":"outils/diagrams/#conversion-dun-fichier","title":"Conversion d'un fichier","text":"<p>Il suffit d'appeler <code>python helloworld.py</code> pour g\u00e9n\u00e9rer le sch\u00e9ma :</p> <pre><code># helloworld.py\nfrom diagrams import Diagram\nfrom diagrams.aws.compute import EC2\nfrom diagrams.aws.database import RDS\nfrom diagrams.aws.network import ELB\n\ngraph_attr = {\n    \"margin\":\"-1.8, -1.8\"\n}\n\nwith Diagram(\"Simple\", filename=\"helloworld\", graph_attr=graph_attr, show=False):\n    ELB(\"lb\") &gt;&gt; EC2(\"web\") &gt;&gt; RDS(\"userdb\")\n</code></pre> <p>=&gt;</p> <p></p>"},{"location":"outils/diagrams/#conversion-des-fichiers-dans-un-dossier","title":"Conversion des fichiers dans un dossier","text":"<p>Le bon vieux Makefile suivant fait l'affaire :</p> <pre><code>SRC=$(wildcard *.py)\n\n.PHONY: build\nbuild: $(SRC)\n python $^\n</code></pre>"},{"location":"outils/diagrams/#ressources","title":"Ressources","text":"<ul> <li>diagrams.mingrammer.com - Examples</li> <li>graphviz.org - Graph Attributes (c.f. <code>graph_attr</code> dans l'exemple contr\u00f4ler la marge)</li> </ul>"},{"location":"outils/dig/","title":"dig","text":"<p>La commande dig permet d'interroger des serveurs DNS et s'av\u00e8re utile pour d\u00e9boguer les probl\u00e8mes de r\u00e9solution de nom.</p>"},{"location":"outils/dig/#installation","title":"Installation","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y bind9-dnsutils\n</code></pre>"},{"location":"outils/dig/#utilisation","title":"Utilisation","text":""},{"location":"outils/dig/#interrogation-des-adresses-ipv4","title":"Interrogation des adresses IPV4","text":"<pre><code>dig @1.1.1.1 www.quadtreeworld.net | grep -v ';' | grep -v '^$'\n#www.quadtreeworld.net.  300     IN      CNAME   lb.quadtreeworld.net.\n#lb.quadtreeworld.net.   300     IN      A       51.158.147.46\n</code></pre>"},{"location":"outils/dig/#interrogation-des-adresses-ipv6","title":"Interrogation des adresses IPV6","text":"<pre><code>dig @1.1.1.1 google.com AAAA\n</code></pre>"},{"location":"outils/dig/#interrogation-des-entrees-txt","title":"Interrogation des entr\u00e9es TXT","text":"<pre><code>dig @1.1.1.1 _acme-challenge.quadtreeworld.net TXT\n# _acme-challenge.quadtreeworld.net. 60 IN TXT    \"INtrA8meUucf1Pv65z0d4H0B13fsx_nEdDf68X1CwqY\"\n</code></pre>"},{"location":"outils/dig/#interrogation-des-entrees-mx","title":"Interrogation des entr\u00e9es MX","text":"<pre><code>dig @1.1.1.1 quadtreeworld.net MX\n#quadtreeworld.net.      300     IN      MX      86 route2.mx.cloudflare.net.\n#quadtreeworld.net.      300     IN      MX      21 route1.mx.cloudflare.net.\n#quadtreeworld.net.      300     IN      MX      98 route3.mx.cloudflare.net.\n</code></pre>"},{"location":"outils/dnsmasq/","title":"dnsmasq","text":"<p>Mise en garde</p> <p>L'installation d'un serveur DNS en local s'est passablement complexifi\u00e9e avec l'introduction du service systemd-resolved.</p>"},{"location":"outils/dnsmasq/#installation","title":"Installation","text":"<p>L'installation de dnsmasq est triviale :</p> <pre><code>sudo apt-get update\nsudo apt-get install dnsmasq\n</code></pre>"},{"location":"outils/dnsmasq/#cas-de-systemd-resolved","title":"Cas de systemd-resolved","text":"<p>En pr\u00e9sence de systemd-resolved, le port 53 sera d\u00e9j\u00e0 sous \u00e9coute et le service ne d\u00e9marrera pas. Il faudra :</p> <ul> <li>Adapter la configuration <code>/etc/dnsmasq.conf</code> pour \u00e9couter sur une IP diff\u00e9rente :</li> </ul> <pre><code>listen-address=127.0.0.2\nbind-interfaces\n</code></pre> <ul> <li> <p>D\u00e9-commenter la ligne <code>IGNORE_RESOLVCONF=yes</code> dans <code>/etc/default/dnsmasq</code></p> </li> <li> <p>Red\u00e9marrer \"dnsmasq\" (<code>sudo service dnsmasq restart</code>)</p> </li> <li> <p>Configurer l'utilisation de <code>127.0.0.2</code> pour r\u00e9soudre avec dnsmasq en modifiant <code>/etc/systemd/resolved.conf</code> comme suit :</p> </li> </ul> <pre><code>[Resolve]\nDNS=127.0.0.2\nFallbackDNS=1.1.1.1\n# ATTENTION : suppose que dnsmasq forward lui m\u00eame\nDomains=*\n</code></pre> <ul> <li>R\u00e9d\u00e9marrer \"systemd-resolved\" pour prise en compte du changement (<code>sudo service systemd-resolved restart</code>)</li> </ul>"},{"location":"outils/dnsmasq/#configuration-dun-wildcard","title":"Configuration d'un wildcard","text":"<p>La configuration de la r\u00e9solution de <code>*.localhost</code> en 127.0.0.1 se r\u00e9sume alors \u00e0 l'ajout d'un fichier <code>/etc/dnsmasq.d/localhost</code> contenant :</p> <pre><code>address=/localhost/127.0.0.1\n</code></pre>"},{"location":"outils/dnsmasq/#configuration-dun-forward-sur-un-serveur-dns","title":"Configuration d'un forward sur un serveur DNS","text":"<p>L'utilisation d'un serveur DNS classique via dnsmasq correspondant quand \u00e0 elle \u00e0 l'ajout d'un fichier <code>/etc/dnsmasq.d/cloudfire</code> contenant :</p> <pre><code>server=1.1.1.1\nserver=1.0.0.1\n</code></pre> <p>A chaque changement de configuration, il faudra red\u00e9marrer dnsmasq (<code>sudo service dnsmasq restart</code>) mais les manipulations s'arr\u00eate l\u00e0 d\u00e8s lors que l'on a configur\u00e9 la connexion r\u00e9seau pour utiliser dnsmasq (<code>127.0.0.1</code>)</p>"},{"location":"outils/docker/","title":"Docker","text":""},{"location":"outils/docker/#installation","title":"Installation","text":"<p>Mise en garde</p> <ul> <li>Ne pas utiliser ce script d'installation en entreprise (par exemple \u00e0 l'IGN ou \u00e0 l'ENSG).</li> <li>Le d\u00e9mon n'est pas configur\u00e9 automatiquement avec les options de s\u00e9curit\u00e9</li> </ul> <ul> <li>docker/install.sh assure l'installation de base :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/docker/install.sh | bash\n</code></pre>"},{"location":"outils/docker/#utilisation","title":"Utilisation","text":""},{"location":"outils/docker/#tester-linstallation","title":"Tester l'installation","text":"<pre><code>sudo docker run --rm hello-world\n</code></pre>"},{"location":"outils/docker/#pour-executer-docker-sans-sudo","title":"Pour ex\u00e9cuter docker sans sudo","text":"<p>Il suffit d'appartenir au groupe docker :</p> <pre><code>sudo adduser $USER docker\n# puis ouvrir d'une nouvelle session\n</code></pre>"},{"location":"outils/docker/#configuration-du-demon","title":"Configuration du d\u00e9mon","text":"<p>ATTENTION</p> <ul> <li>L'acc\u00e8s \u00e0 https://docker-mirror.quadtreeworld.net est filtr\u00e9 par IP.</li> <li>Remplacez par votre propre instance registry:2 pour \u00e9viter d'atteindre la limite du pull sur DockerHub avec une mise en cache.</li> </ul> <p>Quelques options dans  <code>/etc/docker/daemon.json</code> :</p> <pre><code>{\n    \"data-root\": \"/var/lib/docker\",\n    \"storage-driver\": \"overlay2\",\n\n    \"userns-remap\": \"default\",\n\n    \"registry-mirrors\": [\"https://docker-mirror.quadtreeworld.net\"],\n\n    \"dns\": [\"1.1.1.1\", \"1.0.0.1\"],\n    \"bip\": \"192.168.100.1/24\",\n    \"fixed-cidr\": \"192.168.100.1/29\",\n    \"default-address-pools\": [\n        {\"base\":\"172.80.0.0/16\",\"size\":24},\n        {\"base\":\"172.90.0.0/16\",\"size\":24}\n    ],\n\n    \"icc\": false,\n    \"live-restore\": true,\n    \"userland-proxy\": false,\n    \"no-new-privileges\": true,\n\n    \"debug\": false,\n\n    \"log-driver\": \"journald\"\n}\n</code></pre> <p>Pour appliquer :</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre>"},{"location":"outils/docker/#ajout-du-support-gpu","title":"Ajout du support GpU","text":"<p>Voir cuda-toolkit - Utilisation avec docker pour activer l'utilisation du GPU :</p> <pre><code>sudo docker run --gpus all nvcr.io/nvidia/k8s/cuda-sample:nbody nbody -gpu -benchmark\n</code></pre>"},{"location":"outils/docker/#ressources","title":"Ressources","text":"<ul> <li>github.com - docker/docker-bench-security pour s\u00e9curiser l'installation.</li> <li>github.com - mborne/ansible-docker-ce pour une installation avec ansible offrant plus d'options que install.sh</li> <li>docs.nvidia.com - Installing the NVIDIA Container Toolkit</li> <li>medium.com - Building Multi-Architecture Docker Images With Buildx (construire des images pour X86 pour et ARM pour Raspberry PI)</li> </ul>"},{"location":"outils/git/","title":"git","text":""},{"location":"outils/git/#installation","title":"Installation","text":"<p>git/install.sh</p>"},{"location":"outils/git/#ressources","title":"Ressources","text":"<ul> <li>about.gitlab.com - Git Cheat Sheet</li> <li>www.conventionalcommits.org - Conventional Commits</li> </ul> <p>chore, docs, feat, fix, refactor, share, style et test</p>"},{"location":"outils/gitea-runner/","title":"gitea-runner","text":""},{"location":"outils/gitea-runner/#installation","title":"Installation","text":"<p>gitea-runner/install.sh</p>"},{"location":"outils/gitea-runner/#ressources","title":"Ressources","text":"<ul> <li>docs.gitea.com - Set up runner</li> </ul>"},{"location":"outils/glusterfs/","title":"GlusterFS","text":"<p>Quelques notes sur un test de GlusterFS.</p>"},{"location":"outils/glusterfs/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>Disque d\u00e9di\u00e9 (ici, test vagrantbox avec <code>/dev/sdc</code> ajout\u00e9)</li> </ul>"},{"location":"outils/glusterfs/#format-and-mount","title":"Format and mount","text":"<pre><code>blkid --match-token TYPE=xfs /dev/sdc || mkfs.xfs -i size=512 /dev/sdc\nmkdir -p /data/brick1\necho '/dev/sdc /data/brick1 xfs defaults 1 2' &gt;&gt; /etc/fstab\nmount -a &amp;&amp; mount\n</code></pre>"},{"location":"outils/glusterfs/#setup-glusterfs","title":"Setup GlusterFS","text":"<pre><code>sudo apt-get update\nsudo apt-get install -y glusterfs-server\nsudo systemctl enable glusterd\nsudo systemctl start glusterd\n</code></pre> <pre><code>gluster peer probe vagrantbox-2\ngluster peer probe vagrantbox-3\n</code></pre> <pre><code>gluster volume create gv0 replica 3 vagrantbox-1:/data/brick1/gv0 vagrantbox-2:/data/brick1/gv0 vagrantbox-3:/data/brick1/gv0\ngluster volume start gv0\n</code></pre>"},{"location":"outils/glusterfs/#resources","title":"Resources","text":"<ul> <li>https://docs.gluster.org/en/main/Quick-Start-Guide/Quickstart/</li> </ul>"},{"location":"outils/go/","title":"Go","text":"","tags":["Langage"]},{"location":"outils/go/#installation","title":"Installation","text":"<ul> <li>go/install.sh</li> </ul>","tags":["Langage"]},{"location":"outils/go/#ressources","title":"Ressources","text":"<ul> <li>https://go.dev/ : site officiel</li> <li>gobyexample.com : apprendre Go avec des exemples.</li> <li>https://www.w3schools.com/go/</li> </ul>","tags":["Langage"]},{"location":"outils/hashicorp/","title":"hashicorp","text":"<p>Ce dossier contient un script pour l'ajout du d\u00e9p\u00f4t HashiCorp</p>"},{"location":"outils/hashicorp/#utilisation","title":"Utilisation","text":"<p>Le script hashicorp/add-repository.sh configure <code>/etc/apt/sources.list.d/hashicorp.list</code>. Il est ensuite possible d'installer les outils</p> <pre><code>sudo apt-get update\nsudo apt-get install -y vagrant\nsudo apt-get install -y terraform\nsudo apt-get install -y packer\n#...\n</code></pre>"},{"location":"outils/helm/","title":"Helm","text":"<p>Helm se pr\u00e9sente comme the package manager for Kubernetes.</p>"},{"location":"outils/helm/#principe-de-fonctionnement","title":"Principe de fonctionnement","text":"<ul> <li>Helm g\u00e9n\u00e8re et applique les manifests au format YAML</li> <li>Le langage de templating est Go templating language</li> </ul>"},{"location":"outils/helm/#installation","title":"Installation","text":"<ul> <li>helm.sh - Installing Helm - From Script</li> <li>helm.sh - Installing Helm - From Apt (Debian/Ubuntu)</li> <li>helm/install.sh reprend la m\u00e9thode ci-dessus :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/helm/install.sh | bash\n</code></pre>"},{"location":"outils/helm/#quelques-depots","title":"Quelques d\u00e9p\u00f4ts","text":"NAME URL bitnami https://charts.bitnami.com/bitnami/ hashicorp https://helm.releases.hashicorp.com jenkins https://charts.jenkins.io opensearch https://opensearch-project.github.io/helm-charts/ traefik https://helm.traefik.io/traefik <p>Voir aussi artifacthub.io</p>"},{"location":"outils/helm/#utilisation","title":"Utilisation","text":""},{"location":"outils/helm/#gestion-des-depots","title":"Gestion des d\u00e9p\u00f4ts","text":"<pre><code># Add bitnami's repository\nhelm repo add bitnami https://charts.bitnami.com/bitnami\n# Update repositories\nhelm repo update\n# List repositories\nhelm repo list\n# Find charts in a given repository\nhelm search repo bitnami\n# Find charts versions\nhelm search repo bitnami/nginx-ingress-controller -l\n</code></pre>"},{"location":"outils/helm/#deployer-avec-helm","title":"D\u00e9ployer avec Helm","text":""},{"location":"outils/helm/#nginx-ingress-controller","title":"nginx-ingress-controller","text":"<pre><code># Show default values\nhelm show values bitnami/nginx-ingress-controller\n\n# Preview generated YAML's\nhelm -n ingress-nginx template nginx bitnami/nginx-ingress-controller \\\n    --set metrics.enabled=true\n\n# Install or upgrade a release in a given namespace\nhelm -n ingress-nginx upgrade --install \\\n    nginx bitnami/nginx-ingress-controller \\\n    -v my-values.yaml\n    --set metrics.enabled=true\n\n# List releases\nhelm -n ingress-nginx list\n\n# Uninstall\nhelm -n ingress-nginx delete nginx\n</code></pre>"},{"location":"outils/helm/#jenkins","title":"Jenkins","text":"<pre><code># Ajout du d\u00e9p\u00f4t jenkins\nhelm repo add jenkins https://charts.jenkins.io\n# Mise \u00e0 jour des d\u00e9p\u00f4ts\nhelm repo update\n# Cr\u00e9ation d'un namespace d'accueil\nkubectl create namespace jenkins-system\n# Installation ou mise \u00e0 jour\nhelm --namespace=jenkins-system upgrade --install jenkins jenkins/jenkins\n</code></pre>"},{"location":"outils/helm/#postgresql","title":"PostgreSQL","text":"<pre><code># Ajout du d\u00e9pot bitnami\nhelm repo add bitnami https://charts.bitnami.com/bitnami\n# Mise \u00e0 jour des d\u00e9p\u00f4ts\nhelm repo update\n# Cr\u00e9ation d'un namespace d'accueil pg\nkubectl create namespace pg\n# Installation ou mise \u00e0 jour\nPOSTGRESQL_PASSWORD=ChangeIt\nhelm --namespace=pg upgrade --install postgresql bitnami/postgresql  --set global.postgresql.auth.postgresPassword=$POSTGRESQL_PASSWORD\n# Contr\u00f4ler l'\u00e9tat\nkubectl -n pg get sts,svc,pods\n# Suivre les instructions pour se connecter :\nkubectl port-forward --namespace pg svc/postgresql 15432:5432 &amp;\npsql --host 127.0.0.1 -U postgres -d postgres -p 15432 -W\n</code></pre> <p>Voir :</p> <ul> <li>PostgreSQL packaged by Bitnami</li> <li>bitnami/postgresql/values.yaml</li> </ul>"},{"location":"outils/helm/#creation-dun-chart","title":"Cr\u00e9ation d'un chart","text":"<p>La commande <code>helm create whoami</code> g\u00e9n\u00e8re un mod\u00e8le de chart pour le d\u00e9ploiement d'une application (nginx) qu'il sera possible d'adapter pour sa propre application.</p> <p>Pour vos premiers pas, noter que :</p> <ul> <li>Les variables d'environnement sont toujours des strings (il faudra les \u00e9chapper comme suit <code>{{ .Values.database.port | quote }}</code>)</li> <li>Les variables <code>global</code> sont accessibles depuis tous les sous charts</li> </ul>"},{"location":"outils/helm/#resources","title":"Resources","text":"<ul> <li>helm.sh - Installing Helm</li> <li>helm.sh - Quickstart</li> <li>artifacthub.io - Find, install and publish Kubernetes packages</li> <li>helm.sh - The Chart Best Practices Guide</li> <li>hub.docker.com - alpine/helm</li> <li>github.com - mborne/docker-devbox o\u00f9 de nombreux scripts <code>k8s-install.sh</code> s'appuient sur des d\u00e9ploiements Helm.</li> <li>github.com - mborne/helm-charts : quelques charts helm d\u00e9velopper pour comprendre les m\u00e9canismes de publication sous forme d'image docker avec GitHub Container Registry (ex : <code>oci://ghcr.io/mborne/helm-charts/postgres-dev</code>)</li> <li>blog.stephane-robert.info - Introduction \u00e0 Helm</li> </ul>"},{"location":"outils/java/","title":"Java","text":""},{"location":"outils/java/#gestion-des-dependances","title":"Gestion des d\u00e9pendances","text":"<ul> <li>maven</li> <li>maven central repository</li> </ul>"},{"location":"outils/java/#bibliotheques-generalistes","title":"Biblioth\u00e8ques g\u00e9n\u00e9ralistes","text":"<ul> <li>spring<ul> <li>spring-boot</li> </ul> </li> <li>Hibernate pour l'acc\u00e8s aux bases SQL (ORM).</li> <li>jgrapht pour manipuler des graphes.</li> <li>CQEngine pour l'indexation suivant plusieurs propri\u00e9t\u00e9s.</li> <li>JUnit pour les tests unitaires.<ul> <li>mockito pour bouchonner les classes.</li> </ul> </li> </ul>"},{"location":"outils/java/#bibliotheques-pour-les-donnees-spatiales","title":"Biblioth\u00e8ques pour les donn\u00e9es spatiales","text":"<ul> <li>GeoTools pour manipuler des donn\u00e9es spatiales.</li> <li>JTS pour les calculs g\u00e9om\u00e9trique.</li> <li>bedatadriven/jackson-datatype-jts pour la s\u00e9rialisation GeoJSON (plus maintenu), fork\u00e9 en :<ul> <li>com.graphhopper.external - jackson-datatype-jts</li> <li>org.n52.jackson - jackson-datatype-jts</li> </ul> </li> </ul>"},{"location":"outils/java/#application-java-pour-les-donnees-spatiales","title":"Application java pour les donn\u00e9es spatiales","text":"<ul> <li>GeoServer pour la diffusion de donn\u00e9es raster et vecteur (WFS, WMS, WMTS).</li> <li>GeoNetwork pour les m\u00e9tadonn\u00e9es (CSW et CSW-T).</li> <li>OpenJUMP (SIG).</li> <li>JOSM pour l'\u00e9dition des donn\u00e9es OpenStreetMap.</li> </ul>"},{"location":"outils/java/#ressources","title":"Ressources","text":"<ul> <li>popular-java pr\u00e9sente les biblioth\u00e8ques Java populaires fournies par mvnrepository.com.</li> </ul>"},{"location":"outils/java/examples/minesweeper/","title":"minesweeper","text":"<p>Impl\u00e9mentation du d\u00e9mineur en Java d\u00e9velopp\u00e9e en parall\u00e8le de la cr\u00e9ation du sujet EVAFI programmeur (2015) int\u00e9grant un exercice sur ce th\u00e8me.</p>"},{"location":"outils/java/examples/minesweeper/#requirements","title":"Requirements","text":"<ul> <li>OpenJDK</li> <li>Maven</li> </ul>"},{"location":"outils/java/examples/minesweeper/#usage","title":"Usage","text":"<pre><code>mvn clean package\njava -jar target/minesweeper-0.0.1-SNAPSHOT.jar\n</code></pre>"},{"location":"outils/js/","title":"JavaScript","text":"","tags":["Langage"]},{"location":"outils/js/#quelques-notes","title":"Quelques notes","text":"<ul> <li>JavaScript est une marque d\u00e9pos\u00e9e.</li> <li>ECMAScript est le nom utilis\u00e9 pour la standardisation du langage.</li> <li>TypeScript est une surcouche permettant de typer les variables.</li> <li>TypeScript s'accompagne d'un transpilateur (tsc)<ul> <li>L'utilisation d'un bundler \u00e9vitera toutefois des probl\u00e8mes... (voir TypeScript et NodeJS - La blague de la gestion des extensions...)</li> </ul> </li> <li>Constat : D'autres langages ont \u00e9volu\u00e9s pour rendre le typage optionnels PHP - Type declarations, Python - typing...</li> </ul>","tags":["Langage"]},{"location":"outils/js/#nodejs","title":"NodeJS","text":"<p>Pour installer NodeJS, voir :</p> <ul> <li>nodejs.org - Download Node.js</li> <li>js/install-nodejs.sh qui assure l'installation de NodeJS pour Ubuntu et Debian.</li> <li>js/nodejs-startup.ps1 qui est exploitable comme suit pour faire un raccourci Windows pour d\u00e9marrer un terminal avec activation de fnm (Fast Node Manager) :</li> </ul> <pre><code>C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe powershell.exe -NoExit -ExecutionPolicy Bypass -File \"C:\\...\\toolbox\\js\\nodejs-startup.ps1\"\n</code></pre>","tags":["Langage"]},{"location":"outils/js/#gestion-de-dependances","title":"Gestion de d\u00e9pendances","text":"<ul> <li>npm assure le t\u00e9l\u00e9chargement des d\u00e9pendances et l'ex\u00e9cution des scripts d\u00e9finis dans le fichier <code>package.json</code>.</li> <li>yarn est une alternative possible \u00e0 npm</li> <li>www.npmjs.com est le principal d\u00e9p\u00f4t public.</li> <li>npm-check-updates facilite la mise \u00e0 jour des d\u00e9pendances :</li> </ul> <pre><code># Pour identifier les mises \u00e0 jour possibles\nnpx npm-check-updates\n# Pour mettre \u00e0 jour les d\u00e9pendances sans modifier la version majeure :\nnpx npm-check-updates -u -t minor\n</code></pre>","tags":["Langage"]},{"location":"outils/js/#bundlers","title":"Bundlers","text":"<ul> <li>Vite - Scaffolding Your First Vite Project :</li> </ul> <pre><code># Pour un projet React+TypeScript\nnpm create vite@latest demo-vite-ts -- --template react-ts\ncd demo-vite-ts\nnpm run dev\n</code></pre> <ul> <li>Rollup</li> <li>Parcel</li> <li>esbuild</li> <li>webpack</li> </ul>","tags":["Langage"]},{"location":"outils/js/#creation-dapi-web","title":"Cr\u00e9ation d'API WEB","text":"<ul> <li>express est un framework de d\u00e9veloppement d'application et d'API en javascript.<ul> <li>express-validator donne un cadre pour la validation des param\u00e8tres.</li> </ul> </li> <li>NestJS et Fastify comptent parmi les alternatives possibles \u00e0 NextJS (Voir Top 10 Express.js Alternatives)</li> <li>socket.io simplifie l'impl\u00e9mentation de WebSocket en JS.</li> </ul>","tags":["Langage"]},{"location":"outils/js/#creation-dapi-cli","title":"Cr\u00e9ation d'API CLI","text":"<ul> <li>commander simplifie la gestion des param\u00e8tres pass\u00e9s en ligne de commande et la mise en oeuvre d'un <code>--help</code>.</li> </ul>","tags":["Langage"]},{"location":"outils/js/#frameworks","title":"Frameworks","text":"<ul> <li>React / Next.js</li> <li>Vue / Nuxt</li> <li>Angular</li> </ul>","tags":["Langage"]},{"location":"outils/js/#tests-unitaires-et-fonctionnels","title":"Tests unitaires et fonctionnels","text":"<ul> <li>Mocha pour l'ex\u00e9cution des tests unitaires + Chai supportant diff\u00e9rents styles d'assertions (should, expect et assert)</li> <li>Jest est une alternative qui inclue les assertions.<ul> <li>ts-jest assure la transpilation pour TypeScript et ES6</li> </ul> </li> <li>supertest permet de tester un service HTTP</li> </ul>","tags":["Langage"]},{"location":"outils/js/#cartographie-web","title":"Cartographie WEB","text":"<ul> <li>leaflet est une biblioth\u00e8que de cartographie web simple d'utilisation.</li> <li>OpenLayers est une biblioth\u00e8que de cartographie web disposant de fonctionnalit\u00e9s avanc\u00e9es.<ul> <li>ol-ext propose un ensemble d'extensions pour OpenLayers.</li> </ul> </li> </ul>","tags":["Langage"]},{"location":"outils/js/#manipulation-de-donnees-geographiques","title":"Manipulation de donn\u00e9es g\u00e9ographiques","text":"<ul> <li>proj4js permet de transformer des coordonn\u00e9es g\u00e9ographiques<ul> <li>https://epsg.io/2154.js permet de r\u00e9cup\u00e9rer la d\u00e9finition de Lambert93 pour cette biblioth\u00e8que.</li> <li>Voir aussi spatialreference.org qui est une alternative \u00e0 epsg.io</li> </ul> </li> <li>jsts est portage en JavaScript de la bibliotheque java JTS (port\u00e9e en C++ sous le nom GEOS pour PostGIS) permettant d'effectuer des calculs g\u00e9om\u00e9triques tels des calculs de zones tampons.</li> <li>turfjs permet elle aussi de r\u00e9aliser de calculs g\u00e9om\u00e9triques avec des donn\u00e9es GeoJSON et des coordonn\u00e9es en longitude et latitude.</li> <li>mapshaper est un utilitaire proposant entre autre des fonctionnalit\u00e9s de simplification g\u00e9om\u00e9trique conservant la topologie \u00e0 l'\u00e9chelle d'une couche.</li> <li>topojson-simplify est lui aussi un utilitaire de simplification des g\u00e9om\u00e9tries conservant la topologie.</li> <li>node-gdal est un binding NodeJS de la biblioth\u00e8que GDAL supportant de nombreux formats vecteurs et images.</li> </ul>","tags":["Langage"]},{"location":"outils/js/#rendu-3d","title":"Rendu 3D","text":"<ul> <li>threejs est une biblioth\u00e8que de visualisation 3D g\u00e9n\u00e9raliste s'appuyant sur WebGL.<ul> <li>KhronosGroup/glTF-Blender-IO permet d'exporter des mod\u00e8les blender pour ThreeJS.</li> </ul> </li> <li>cesiumjs permet l'affichage d'un globe 3D.</li> <li>iTowns permet l'affichage sur un globe 3D ou en vue immersive.</li> </ul>","tags":["Langage"]},{"location":"outils/js/#markdown","title":"Markdown","text":"<ul> <li>marked.js pour la conversion de markdown en HTML.</li> <li>marpit pour la convertion de markdown en pr\u00e9sentation HTML.</li> <li>remarkjs pour la convertion de markdown en pr\u00e9sentation HTML.</li> </ul>","tags":["Langage"]},{"location":"outils/js/#divers","title":"Divers","text":"<ul> <li>ejs est un moteur de template.</li> <li>tinymce offre un \u00e9diteur WYSIWYG pour du contenu HTML.</li> <li>json-editor permet la g\u00e9n\u00e9ration de formulaire d'\u00e9dition HTML pour l'\u00e9dition de donn\u00e9es en fonction d'un sch\u00e9ma JSON.</li> <li>axios est client HTTP en JS offrant des r\u00e9sultats sous forme de Promise (voir blog.logrocket.com  - Axios vs. Fetch (2025 update): Which should you use for HTTP requests?)</li> <li>Elasticlunr.js est un moteur de recherche full-text en JavaScript.</li> </ul>","tags":["Langage"]},{"location":"outils/js/#ressources","title":"Ressources","text":"<p>Les bases :</p> <ul> <li>www.w3schools.com - JavaScript Tutorial pour d\u00e9couvrir progressivement la syntaxe et les concepts.</li> <li>www.w3schools.com - JavaScript Versions pour suivre les \u00e9volutions, par ex :<ul> <li>www.w3schools.com - New Features in ES6</li> </ul> </li> <li>www.w3schools.com - JavaScript and HTML DOM Reference</li> </ul> <p>NodeJS et npm :</p> <ul> <li>nodejs.org - api : Documentation de r\u00e9f\u00e9rence de NodeJS</li> <li>www.npmjs.com - Biblioth\u00e8que JavaScript populaires : Biblioth\u00e8que JavaScript populaires</li> </ul> <p>Deno (alternative \u00e0 NodeJS) :</p> <ul> <li>docs.deno.com - Installation</li> <li>docs.deno.com - Security and permissions</li> <li>docs.deno.com - Examples</li> <li>betterstack.com - Node.js vs Deno vs Bun: Comparing JavaScript Runtimes</li> </ul>","tags":["Langage"]},{"location":"outils/js/docs/import-ts-js/","title":"TypeScript et NodeJS - La blague de la gestion des extensions","text":""},{"location":"outils/js/docs/import-ts-js/#probleme","title":"Probl\u00e8me","text":"<p>Pour utiliser dans <code>src/main.ts</code> une fonction <code>hello()</code> export\u00e9e dans <code>src/utils.ts</code> :</p> <pre><code>// KO : Les extensions ne doivent pas \u00eatre sp\u00e9cifi\u00e9e en TypeScript :\n// import {hello} from './utils.ts';\n\n/*\n * KO avec NodeJS car :\n * - tsc n'ajoute pas l'extension .js\n * - nodejs ne r\u00e9soud pas si l'extension n'est pas sp\u00e9cifi\u00e9e. \n */\n// import {hello} from 'utils'\n\n/*\n * C'est moche mais \"node dist/main.js\" fonctionne\n * apr\u00e8s transpilation avec tsc :\n */\nimport {hello} from 'utils.js'\nhello();\n</code></pre>"},{"location":"outils/js/docs/import-ts-js/#ressources","title":"Ressources","text":"<ul> <li>github.com - microsoft/TypeScript - Provide a way to add the '.js' file extension to the end of module specifiers (16577, closed)</li> <li>github.com - GervinFung/ts-add-js-extension est une extension de tsc pour l'ajout des extensions \".js\".</li> <li>github.com - microsoft/vscode - #131837 explique comment tol\u00e9rer des fichiers .js n'existant pas...</li> </ul>"},{"location":"outils/k3s/","title":"K3S","text":"<p>k3s - Lightweight Kubernetes est une version l\u00e9g\u00e8re de Kubernetess particuli\u00e8rement adapt\u00e9e pour les environnements de d\u00e9veloppement, les petites infrastructures et les petites machines (raspberry).</p>"},{"location":"outils/k3s/#installation","title":"Installation","text":"<p>Mise en garde</p> <ul> <li>L'installation de K3S conduira \u00e0 la cr\u00e9ation de nombreux r\u00e9seaux virtuels (<code>ip link</code>).</li> <li>Il est vivement conseiller de l'installer dans une VM.</li> </ul>"},{"location":"outils/k3s/#methode-officielle","title":"M\u00e9thode officielle","text":"<p>c.f. k3s - quick-start :</p> <pre><code># Sur server node\ncurl -sfL https://get.k3s.io | sh -\n# Sur worker node (avec K3S_TOKEN dans /var/lib/rancher/k3s/server/node-token sur server node )\ncurl -sfL https://get.k3s.io | K3S_URL=https://myserver:6443 K3S_TOKEN=mynodetoken sh -\n</code></pre> <p>Noter qu'il est possible d'ajouter des options :</p> <pre><code># Sans traefik\ncurl -sfL https://get.k3s.io | sh -s - --without-traefik\n# Avec docker\ncurl -sfL https://get.k3s.io | sh -s - --docker\n</code></pre>"},{"location":"outils/k3s/#principaux-fichiers","title":"Principaux fichiers","text":"Fichier Description <code>/usr/local/bin/k3s</code> Ex\u00e9cutable k3s <code>/etc/systemd/system/k3s.service</code> Service <code>k3s server</code> <code>/etc/systemd/system/k3s.service.env</code> Configuration du service <code>/etc/rancher/k3s/k3s.yaml</code> Configuration du serveur (<code>KUBECONFIG</code>) <code>/usr/local/bin/k3s-uninstall.sh</code> D\u00e9sinstallation"},{"location":"outils/k3s/#commandes-utiles","title":"Commandes utiles","text":"Commande Description <code>sudo k3s kubectl get node</code> Lister les noeuds du cluster K3S"},{"location":"outils/k3s/#acces-au-cluster","title":"Acc\u00e8s au cluster","text":"<p>c.f. k3s - Cluster Access pour configurer kubectl et helm :</p> <pre><code># configuration kubectl\nexport KUBECONFIG=/etc/rancher/k3s/k3s.yaml\n\n# Tester avec kubectl\nkubectl get pods --all-namespaces\n</code></pre>"},{"location":"outils/k3s/#ressources","title":"Ressources","text":"<p>Quelques liens utiles :</p> <ul> <li>k3s - Lightweight Kubernetes</li> <li>www.grottedubarbu.fr - K3S on WSL2</li> </ul> <p>Voir aussi :</p> <ul> <li>github.com - mborne/vagrantbox pour cr\u00e9er des VM avec Vagrant</li> <li>github.com - mborne/k3s-deploy pour d\u00e9ployer K3S sur ces VM avec Ansible</li> </ul>"},{"location":"outils/kind/","title":"Kind","text":"<p>Kubernetes in docker (kind) permet d'installer un cluster de d\u00e9veloppement o\u00f9 les noeuds sont des conteneurs docker.</p>"},{"location":"outils/kind/#installation","title":"Installation","text":"<ul> <li>Le script kind/install.sh reprend la m\u00e9thode Installing From Release Binaries pour Linux :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/kind/install.sh | bash\n</code></pre>"},{"location":"outils/kind/#ressources","title":"Ressources","text":"<ul> <li>kind.sigs.k8s.io - Quick Start</li> <li>kind.sigs.k8s.io - Setting Up An Ingress Controller</li> <li>kind.sigs.k8s.io - Installing MetalLB using default manifests</li> <li>github.com - mborne/docker-devbox - kind - QuickStart (qu'il faudra que je rappatrie ici)</li> </ul>"},{"location":"outils/kubectl/","title":"kubectl - gestion d'un cluster kubernetes","text":""},{"location":"outils/kubectl/#installation","title":"Installation","text":"<pre><code>curl -sS https://mborne.github.io/outils/kubectl/install.sh | bash\n</code></pre>"},{"location":"outils/kubectl/#utilisation","title":"Utilisation","text":"<p>Voir github.com - mborne/k8s-exemples</p>"},{"location":"outils/kubectl/#quelques-astuces","title":"Quelques astuces","text":""},{"location":"outils/kubectl/#activer-lautocompletion-et-configurer-des-raccourcis-en-bash","title":"Activer l'autocompl\u00e9tion et configurer des raccourcis en bash","text":"<p>Voir kubernetes.io - kubectl Quick Reference</p>"},{"location":"outils/kubectl/#configurer-nano-pour-indenter-facilement","title":"Configurer nano pour indenter facilement","text":"<p>Pour <code>kubectl edit</code> avec <code>EDITOR=nano</code>, d\u00e9finir <code>.nanorc</code> comme suit permet d'utiliser TAB et SHIFT+TAB sur plusieurs lignes :</p> <pre><code>set tabstospaces true\nset tabsize 2\n</code></pre>"},{"location":"outils/kubectl/#ressources","title":"Ressources","text":"<ul> <li>kubernetes.io - kubectl Cheat Sheet</li> <li>kubernetes.io - GETTING STARTED</li> <li>kubernetes.io - Installer et configurer kubectl</li> </ul> <p>OIDC avec kubelogin :</p> <ul> <li>developer.okta.com - How to Secure Your Kubernetes Cluster with OpenID Connect and RBAC</li> </ul>"},{"location":"outils/kubescape/","title":"Kubescape","text":"<p>Kubescape est un scanner de vuln\u00e9rabilit\u00e9 OpenSource pour Kubernetes.</p>"},{"location":"outils/kubescape/#points-cles","title":"Points cl\u00e9s","text":"<ul> <li>Kubescape peut \u00eatre utilis\u00e9 sous forme d'un client en ligne de commande pour un scan \u00e0 la demande.</li> <li>Kubescape peut \u00eatre install\u00e9 sous forme dans le cluster \u00e0 l'aide d'un op\u00e9rateur pour un scan en continu.</li> <li>Kubescape peut scanner des charts helm ou dossier Kustomize en amont des d\u00e9ploiements.</li> <li>Kubescape dispose d'un m\u00e9canisme de gestion des exceptions (non trouv\u00e9 dans trivy-operator)</li> <li>Kubescape couvre un large spectre de contr\u00f4les :<ul> <li>Contr\u00f4le de la configuration du cluster (ex : C-0069 - Disable anonymous access to Kubelet service)</li> <li>Contr\u00f4le des d\u00e9ploiements applicatifs (ex : C-0004 - Resources memory limit and request pour v\u00e9rifier la d\u00e9finition des limites de consommation RAM)</li> <li>... et bien d'autres (ex : C-0078 - Images from allowed registry pour ma\u00eetriser les d\u00e9p\u00f4ts d'images utilis\u00e9s)</li> </ul> </li> </ul>"},{"location":"outils/kubescape/#installation-du-client","title":"Installation du client","text":"<ul> <li>kubescape/install.sh reprend la m\u00e9thode kubescape - Getting Started :</li> </ul> <pre><code># t\u00e9l\u00e9chargement ~/.kubescape/bin/kubescape\ncurl -s https://raw.githubusercontent.com/kubescape/kubescape/master/install.sh | /bin/bash\n\n# ... en int\u00e9grant l'ajout suivant dans ~/.profile\nexport PATH=$PATH:$HOME/.kubescape/bin\n</code></pre> <ul> <li>kubescape.io - Installing Kubescape pr\u00e9sente d'autres m\u00e9thodes possibles dont :</li> </ul> <pre><code>kubectl krew update\nkubectl krew install kubescape\n</code></pre>"},{"location":"outils/kubescape/#utilisation-du-client","title":"Utilisation du client","text":"<p>Pour scanner un cluster :</p> <pre><code># pour une vue synth\u00e9tique\nkubescape scan framework nsa\n\n# pour avoir le d\u00e9tail des erreurs\nkubescape scan framework nsa -v\n\n# pour ignorer certains namespaces\nkubescape scan framework nsa --exclude-namespaces kube-system,kube-public\n\n# pour scanner uniquement memory.limits\nkubescape scan control C-0004 -v\n</code></pre> <p>Voir github.com - kubescape/kubescape - docs/getting-started.md pour d'autres exemples (dont scan Kustomize, Helm, d\u00e9p\u00f4t GIT...)</p>"},{"location":"outils/kubescape/#ressources","title":"Ressources","text":"<ul> <li>kubescape.io - Accepting risk with exceptions pour g\u00e9rer les exceptions</li> <li>kubescape.io - The Kubescape operator pour installation dans un cluster</li> <li>kubescape.io - Integrations - Visual Studio Code pour scan des YAML dans VS code.</li> <li>github.com - kubescape/kubescape - getting-started examples</li> </ul>"},{"location":"outils/kvm/","title":"KVM","text":""},{"location":"outils/kvm/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>kvm/prepare-wsl.sh pr\u00e9pare l'installation dans WSL (test\u00e9 avec Ubuntu-24.04) :</li> </ul> <pre><code># ATTENTION : snap sera d\u00e9sactiv\u00e9\ncurl -sS https://mborne.github.io/outils/kvm/prepare-wsl.sh | bash\n# NB : il faudra rebooter avec wsl --shutdown &amp;&amp; wsl\n</code></pre>"},{"location":"outils/kvm/#installation","title":"Installation","text":"<ul> <li>kvm/install.sh assure l'installation de libvirt :</li> </ul> <pre><code># ATTENTION : snap sera d\u00e9sactiv\u00e9\ncurl -sS https://mborne.github.io/outils/kvm/install.sh | bash\n</code></pre>"},{"location":"outils/kvm/#utilisation","title":"Utilisation","text":""},{"location":"outils/kvm/#avec-une-ihm","title":"Avec une IHM","text":"<pre><code>sudo apt install virt-manager\nvirt-manager &amp;\n</code></pre>"},{"location":"outils/kvm/#en-ligne-de-commande","title":"En ligne de commande","text":"<p>Voir blog.programster.org - KVM Cheatsheet pour utilisation du CLI <code>virsh</code> :</p> <pre><code># afficher l'aide\nvirsh help\n# lister les VM\nvirsh list\n# lister les r\u00e9seaux\nvirsh net-list\n# lister les pools de stockage\nvirsh pool-list\n</code></pre>"},{"location":"outils/kvm/#creation-dune-vm","title":"Cr\u00e9ation d'une VM","text":"<p>Warning</p> <ul> <li>genisoimage et mkpasswd sont install\u00e9s s'ils sont absent</li> <li>Le dossier <code>/var/lib/libvirt/disks</code> est cr\u00e9\u00e9 et utilis\u00e9 pour le stockage des disques.</li> </ul> <p>Le script kvm/create-ubuntu-server.sh illustre :</p> <ul> <li>Le t\u00e9l\u00e9chargement d'une image ubuntu cloud</li> <li>La copie sous forme d'un disque redimensionn\u00e9 avec qemu-img</li> <li>La g\u00e9n\u00e9ration d'un disque cloud-init au format ISO avec genisoimage</li> <li>Le d\u00e9marrage de la VM \u00e0 l'aide de virt-install</li> </ul> <pre><code># Cr\u00e9er une VM node-1\ncurl -sS https://mborne.github.io/outils/kvm/create-ubuntu-server.sh | UBUNTU_PASSWORD=ChangeIt VM_NAME=node-1 bash\n\n# V\u00e9rifier qu'elle est d\u00e9marr\u00e9e\nvirsh list\n\n# Inspecter les fichiers\nvirsh vol-list disks --details\n\n# Se connecter\nvirsh console node-1\n\n# Pour supprimer la VM :\nvirsh destroy node-1\nvirsh undefine node-1\n\n# Pour supprimer ses donn\u00e9es :\nrm -rf /var/lib/libvirt/disks/node-1.*\n</code></pre>"},{"location":"outils/kvm/#aller-plus-loin","title":"Aller plus loin","text":"<ul> <li>KVM - Configuration de la r\u00e9solution de nom</li> </ul>"},{"location":"outils/kvm/#ressources","title":"Ressources","text":"<ul> <li>blog.stephane-robert.info - Installez KVM/Libvirt sur Linux</li> <li>phoenixnap.com - How to Install KVM on Ubuntu 20.04</li> <li>computingforgeeks.com - Install KVM Hypervisor on Ubuntu 22.04|20.04</li> <li>www.cyberciti.biz - Linux Find Out If CPU Support Intel VT/AMD-V Virtualization For KVM</li> </ul>"},{"location":"outils/kvm/dns-resolved/","title":"KVM - Configuration de la r\u00e9solution de nom","text":""},{"location":"outils/kvm/dns-resolved/#points-cles","title":"Points cl\u00e9s","text":"<ul> <li>libvirt int\u00e8gre un serveur DNS (dnsmasq)</li> <li>Un domaine (ex : <code>lab.kvm</code>) peut \u00eatre configur\u00e9 au niveau des r\u00e9seaux (ex : <code>&lt;domain name='lab.kvm' localOnly='yes'/&gt;</code>)</li> <li>Ce domaine est alors utilis\u00e9 pour g\u00e9n\u00e9rer la configuration dnsmasq et fourni au niveau DHCP</li> <li>L'utilisation du domaine expos\u00e9 au niveau DHCP est activ\u00e9 \u00e0 l'aide de <code>use-domains: true</code> dans kvm/create-ubuntu-server.sh :</li> </ul> <pre><code>version: 2\nrenderer: networkd\nethernets:\n# NAT network interface (virbr0)\nenp1s0:\n    dhcp4: yes\n    dhcp4-overrides:\n        use-domains: true\n</code></pre>"},{"location":"outils/kvm/dns-resolved/#principe","title":"Principe","text":"<ul> <li>Modifier la configuration r\u00e9seau pour ajouter ce domain \u00e0 l'aide de <code>sudo virsh net-edit default</code> :</li> </ul> <pre><code>&lt;network&gt;\n  &lt;name&gt;default&lt;/name&gt;\n  &lt;uuid&gt;...&lt;/uuid&gt;\n  &lt;forward mode='nat'/&gt;\n  &lt;bridge name='virbr0' stp='on' delay='0'/&gt;\n  &lt;!-- A AJOUTER :--&gt;\n  &lt;domain name='lab.kvm' localOnly='yes'/&gt;\n  &lt;dns&gt;\n    &lt;forwarder addr='1.1.1.1'/&gt;\n  &lt;/dns&gt;\n  &lt;ip address='192.168.122.1' netmask='255.255.255.0'&gt;\n    &lt;dhcp&gt;\n      &lt;range start='192.168.122.2' end='192.168.122.254'/&gt;\n    &lt;/dhcp&gt;\n  &lt;/ip&gt;\n&lt;/network&gt;\n</code></pre> <ul> <li>Recharger cette configuration r\u00e9seau :</li> </ul> <pre><code>sudo virsh net-destroy default\nsudo virsh net-start default\nsudo virsh net-autostart default\n</code></pre> <ul> <li>Tester depuis l'h\u00f4te :</li> </ul> <pre><code>dig node-1.lab.kvm @192.168.122.1\n</code></pre> <ul> <li>Tester depuis une VM :</li> </ul> <pre><code>host node-1.lab.kvm\nhost node-1\n</code></pre>"},{"location":"outils/minikube/","title":"minikube - instance locale kubernetes","text":""},{"location":"outils/minikube/#installation","title":"Installation","text":"<p>c.f. kubernetes.io - Installer Kubernetes avec Minikube</p>"},{"location":"outils/minikube/#commande-de-gestion-minikube","title":"Commande de gestion minikube","text":"Commande Description <code>minikube start --driver=virtualbox</code> D\u00e9marrer le cluster minikube dans virtualbox <code>minikube status</code> R\u00e9cup\u00e9rer le statut du cluster <code>minikube stop</code> Arr\u00eater le cluster minikube <code>minikube delete</code> Supprimer le cluster minikube <code>minikube dashboard</code> Visualisation interface minikube"},{"location":"outils/minikube/#creation-cluster-minikube-dans-virtualbox","title":"Cr\u00e9ation cluster minikube dans virtualbox","text":"<pre><code>minikube start --driver=virtualbox\nminikube status\n# ...\nminikube stop\nminikube delete\n</code></pre>"},{"location":"outils/minikube/#ressources","title":"Ressources","text":"<ul> <li>kubernetes.io - Installer Minikube</li> </ul>"},{"location":"outils/miniupnpc/","title":"miniupnpc","text":""},{"location":"outils/miniupnpc/#principe","title":"Principe","text":"<p>Via le protocole UPnP IGD, il est possible de configurer \u00e0 la vol\u00e9e des expositions de port sur sa box internet sans rentrer dans les interfaces de configuration. Ce m\u00e9canisme est particuli\u00e8rement utile pour les applications pair-\u00e0-pair en IPV4.</p>"},{"location":"outils/miniupnpc/#installation","title":"Installation","text":"<pre><code>sudo apt-get install miniupnpc\n</code></pre>"},{"location":"outils/miniupnpc/#utilisation","title":"Utilisation","text":"<pre><code># lister les redirections\nupnpc -l\n# exposer le port 80 de la machine courante en externe\nupnpc -r 80 TCP\n\n# rediriger le port 80 de la machine sur le port externe 20080\nupnpc -a 192.168.0.30 80 20080\n# supprimer la redirection\nupnpc -d 20080 TCP\n\n# r\u00e9cup\u00e9ration IP publique\nupnpc -s | grep ExternalIPAddress | cut -c21-\n</code></pre>"},{"location":"outils/miniupnpc/#notes","title":"Notes","text":""},{"location":"outils/miniupnpc/#desactiver-la-fonctionnalite-sur-sa-box","title":"D\u00e9sactiver la fonctionnalit\u00e9 sur sa box","text":"<p>Pour des raisons de s\u00e9curit\u00e9, il semble raisonnable de d\u00e9sactiver le protocole \"UPnP IGD\" correspondant sur sa box s'il n'est pas utile (il y a des moyens plus propre pour exposer temporairement une application tel ngrok)</p>"},{"location":"outils/miniupnpc/#cas-des-ipv4-partagees","title":"Cas des IPv4 partag\u00e9es","text":"<p>Avec free par exemple, les clients peuvent d\u00e9sormais partager la m\u00eame IP avec des plages de ports diff\u00e9rents (c.f. Free peut attribuer la m\u00eame adresse IP \u00e0 plusieurs abonn\u00e9s).</p> <p>Il sera alors impossible d'exposer certains ports \u00e0 moins de demander une IPv4 full stack (Freebox : une option pour ne plus partager son IP avec d'autres abonn\u00e9s)</p>"},{"location":"outils/miniupnpc/#resources","title":"Resources","text":"<ul> <li>Faire une redirection de port sur son routeur avec UPnP</li> <li>github.com - miniupnp/miniupnp</li> <li>fr.wikipedia.org - Protocole UPnP<ul> <li>fr.wikipedia.org - UPnP IGD</li> <li>doc.ubuntu-fr.org - Utiliser la fonction UPnP AV de la Freebox</li> </ul> </li> <li>www.avg.com Qu\u2019est-ce que l\u2019UPnP et peut-on l\u2019activer sans risque ?</li> </ul>"},{"location":"outils/mkcert/","title":"mkcert","text":"<p>Offre une solution rapide pour g\u00e9n\u00e9rer des certificats reconnus par le syst\u00e8me et le(s) navigateur(s) install\u00e9s.</p> <p>Mise en garde</p> <ul> <li>Ne pas utiliser en entreprise (par exemple \u00e0 l'IGN ou \u00e0 l'ENSG).</li> <li>Comprendre le risque d'attaque man in the middle sur HTTPS en cas de vol du rootCA g\u00e9n\u00e9r\u00e9</li> </ul>"},{"location":"outils/mkcert/#principe-de-fonctionnement","title":"Principe de fonctionnement","text":"<ul> <li>G\u00e9n\u00e8re un certificat racine autorit\u00e9</li> <li>Ajoute ce certificat aux diff\u00e9rents stores (syst\u00e8me, navigateurs,...)</li> <li>G\u00e9n\u00e8re des certificats de d\u00e9veloppement \u00e0 l'aide de ce certificat racine</li> </ul>"},{"location":"outils/mkcert/#installation","title":"Installation","text":"<ul> <li>mkcert/install.sh assure le t\u00e9l\u00e9chargement du binaire du la derni\u00e8re release en <code>/usr/local/bin/mkcert</code> :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/mkcert/install.sh | bash\n</code></pre>"},{"location":"outils/mkcert/#utilisation","title":"Utilisation","text":"<p>Notes \u00e0 sortir de mborne/docker-devbox - traefik/mkcert.md</p>"},{"location":"outils/mkcert/#ressources","title":"Ressources","text":"<ul> <li>github.com - FiloSottile/mkcert</li> <li>issue #377 - possibility to limit down the rootCA on a specific domain \u00e0 surveiller (refactoring n\u00e9cessaire pour signer \u00e0 l'aide d'un \"intermediateCA.{cert|key}\" en supprimant \"rootCA.key\"?)</li> </ul>"},{"location":"outils/opentofu/","title":"OpenTofu","text":"<p>OpenTofu est un fork OpenSource de Terraform cr\u00e9\u00e9 par la communaut\u00e9 suite \u00e0 un changement de licence.</p>"},{"location":"outils/opentofu/#points-cles","title":"Points cl\u00e9s","text":"<ul> <li>OpenTofu supporte de nombreux fournisseurs (providers) correspondant aux syst\u00e8mes cibles (AWS, Azure, GCP, Kubernetes...)</li> <li>OpenTofu permet de g\u00e9rer as code des ressources \u00e0 l'aide d'un langage sp\u00e9cifique.</li> <li>OpenTofu conserve une trace des ressources cr\u00e9\u00e9es dans un \u00e9tat (state) pour lequel il convient de choisir avec soin une solution de stockage de cet \u00e9tat (backend).</li> </ul>"},{"location":"outils/opentofu/#installation","title":"Installation","text":"<ul> <li>opentofu.org - Installing OpenTofu</li> <li>opentofu/install.sh assure l'installation \u00e0 l'aide du d\u00e9p\u00f4t pour Ubuntu et Debian :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/opentofu/install.sh | bash\n</code></pre>"},{"location":"outils/opentofu/#principales-commandes","title":"Principales commandes","text":"Commande Description terraform init Pr\u00e9paration du r\u00e9pertoire de travail (t\u00e9l\u00e9chargement des modules &amp; co) terraform validate Contr\u00f4le du fichier de configuration terraform plan Visualisation des changements \u00e0 appliquer sur l'infrastructure terraform apply Cr\u00e9ation ou modification de l'infrastructure terraform destroy Destruction des ressources cr\u00e9\u00e9es"},{"location":"outils/opentofu/#quelques-fournisseurs","title":"Quelques fournisseurs","text":""},{"location":"outils/opentofu/#les-principaux-clouders","title":"Les principaux clouders","text":"<ul> <li>AWS d'Amazon</li> <li>Azure de Microsoft</li> <li>Google Cloud Platform</li> </ul>"},{"location":"outils/opentofu/#quelques-clouders-europeens","title":"Quelques clouders europ\u00e9ens","text":"<ul> <li>OVHcloud</li> <li>Scaleway pour https://www.scaleway.com.</li> <li>Hetzner Cloud Provider pour https://www.hetzner.com/cloud</li> </ul>"},{"location":"outils/opentofu/#quelques-systemes-et-outils","title":"Quelques syst\u00e8mes et outils","text":"<ul> <li>Kubernetes</li> <li>Helm</li> <li>Keycloak</li> <li>Gitlab</li> </ul>"},{"location":"outils/opentofu/#stockage-de-letat","title":"Stockage de l'\u00e9tat","text":"<p>Quelques backend pour le stockage de l'\u00e9tat :</p> <ul> <li>s3 permet de stocker l'\u00e9tat dans un bucket S3.</li> <li>kubernetes permet de stocker sous forme d'un secret Kubernetes.</li> <li>gcs permet de stocker l'\u00e9tat dans un bucket Google Cloud Storage (GCS).</li> </ul>"},{"location":"outils/opentofu/#ressources","title":"Ressources","text":"<ul> <li>opentofu.org est le site officiel</li> <li>opentofu.org - OpenTofu Language Documentation d\u00e9crit la syntaxe et les concepts.</li> <li>search.opentofu.org<ul> <li>search.opentofu.org - Providers</li> <li>search.opentofu.org - Modules</li> </ul> </li> <li>blog.stephane-robert.info - Introduction \u00e0 OpenTofu</li> </ul>"},{"location":"outils/php/","title":"PHP","text":""},{"location":"outils/php/#installation","title":"Installation","text":"<ul> <li>php/install.sh assure l'installation de l'ex\u00e9cutable PHP (NB : le serveur apache2 n'est pas install\u00e9)</li> <li>php/install-composer.sh assure l'installation de l'ex\u00e9cutable PHP Composer.</li> <li>php/install-symfony.sh assure l'installation de Symfony CLI</li> </ul>"},{"location":"outils/php/#gestion-des-dependances","title":"Gestion des d\u00e9pendances","text":"<ul> <li>PHP Composer permet le t\u00e9l\u00e9chargement des d\u00e9pendances PHP d\u00e9crites dans le fichier \"composer.json\" (\u00e9quivalent \u00e0 npm, maven, pip... pour PHP)</li> <li>packagist.org est le d\u00e9p\u00f4t public pour les packages PHP.</li> </ul>"},{"location":"outils/php/#frameworks","title":"Frameworks","text":"<ul> <li>www.hostinger.com - 11 Best PHP Frameworks For Beginner to Pro Developers pr\u00e9sente un comparatif des principaux frameworks (Laravel, CodeIgniter, Symfony,...)</li> </ul>"},{"location":"outils/php/#bibliotheques","title":"Biblioth\u00e8ques","text":"<ul> <li>packagist.org - Popular Packages permet de d\u00e9couvrir les biblioth\u00e8ques les plus utilis\u00e9es et de rechercher celles dont on a besoin (par exemple, pour manipuler des fichiers Excel).</li> </ul>"},{"location":"outils/php/#maintenance","title":"Maintenance","text":"<p>Pour la version du langage :</p> <ul> <li>PHP Supported Versions permet de conna\u00eetre les versions PHP maintenues</li> <li>PHPUnit - Supported Versions permet de conna\u00eetre les versions PHP support\u00e9es en fonction des versions PHPUnit</li> <li>PHP-CS-Fixer - Supported PHP Versions pr\u00e9sente les versions de PHP support\u00e9es par php-cs-fixer</li> </ul> <p>Pour les d\u00e9pendances :</p> <pre><code># affiche les mises \u00e0 jour possibles\ncomposer outdated\n</code></pre>"},{"location":"outils/php/#ressources","title":"Ressources","text":"<ul> <li>roadmap.sh - PHP Roadmap propose un ordre d'apprentissage</li> <li>PHP - Les bonnes pratiques</li> <li>PHP - La bonne mani\u00e8re ira beaucoup plus loin en d\u00e9taillant les diff\u00e9rents points</li> <li>PHP-CS-Fixer - mise en forme automatique du code PHP</li> <li>medium.com - @dimdev - 9 PHP runtimes: performance benchmark : comparaison des diff\u00e9rents runtimes (apache+mod_php, nginx+php-fpm, FrankenPHP,...)</li> </ul>"},{"location":"outils/php/bonnes-pratiques/","title":"PHP - Les bonnes pratiques","text":"<p>Cette fiche est une tentative de synth\u00e8se de bonnes pratiques pour l'utilisation du langage PHP. PHP - La bonne mani\u00e8re ira beaucoup plus loin en d\u00e9taillant les diff\u00e9rents points.</p>"},{"location":"outils/php/bonnes-pratiques/#pour-la-gestion-des-dependances","title":"Pour la gestion des d\u00e9pendances","text":"<ul> <li> <p>Voir PHP Standards Recommendations</p> </li> <li> <p>Utiliser PHP composer pour :</p> <ul> <li>D\u00e9crire et t\u00e9l\u00e9charger facilement les d\u00e9pendances dans <code>mon-projet/vendor</code>.</li> <li>G\u00e9n\u00e9rer un fichier <code>mon-projet/vendor/autoload.php</code> (un seul <code>require autoload.php</code> sera alors n\u00e9cessaire)</li> <li>Pouvoir mettre en oeuvre des automatismes \u00e0 l'installation ou mise \u00e0 jour (voir PHP composer / Scripts)</li> </ul> </li> </ul>"},{"location":"outils/php/bonnes-pratiques/#pour-la-qualite","title":"Pour la qualit\u00e9","text":"<ul> <li> <p>Utiliser PHPUnit pour d\u00e9velopper des tests unitaires et fonctionnels</p> </li> <li> <p>Choisir une convention de codage (ex : Symfony - Coding Standards).</p> </li> <li>Utiliser PHP-CS-Fixer pour respecter automatiquement cette convention de codage.</li> <li> <p>Utiliser un outil d'analyse statique du code (ex : PHPStan, PHPMD,...)</p> </li> <li> <p>G\u00e9n\u00e9rer des journaux applicatifs :</p> <ul> <li>D\u00e9pendre de PsrLogLoggerInterface au niveau des classes</li> <li>Utiliser monolog/monolog pour instancier PsrLogLoggerInterface</li> </ul> </li> </ul>"},{"location":"outils/php/bonnes-pratiques/#pour-la-scalabilite","title":"Pour la scalabilit\u00e9","text":"<p>Stocker localement uniquement des donn\u00e9es sp\u00e9cifiques \u00e0 l'instance :</p> <ul> <li> <p>Utiliser une base de donn\u00e9es cl\u00e9/valeur telle Redis pour le stockage des donn\u00e9es des sessions.</p> </li> <li> <p>Utiliser une abstraction telle league/flysystem pour le stockage des fichiers pour pouvoir basculer sur un stockage S3.</p> </li> </ul>"},{"location":"outils/php/bonnes-pratiques/#pour-la-securite","title":"Pour la s\u00e9curit\u00e9","text":"<ul> <li> <p>Ne jamais faire confiance aux utilisateurs, toujours valider les donn\u00e9es (la base...).</p> </li> <li> <p>Pour \u00e9viter les injections XSS, toujours \u00e9chapper les rendus en HTML :</p> <ul> <li>Utiliser un moteur de template tel TWIG qui est int\u00e9gr\u00e9 au framework Symfony</li> <li>Utiliser ezyang/htmlpurifier si vous int\u00e9grer un \u00e9diteur HTML (CKEditor, TinyMCE,...)</li> </ul> </li> <li> <p>Pour \u00e9viter les injections SQL en acc\u00e9dant aux bases SQL, ne pas construire une requ\u00eate SQL avec des donn\u00e9es arbitraires :</p> <ul> <li>Utiliser PHP PDO et les requ\u00eates pr\u00e9par\u00e9es</li> <li>Utiliser un ORM tel doctrine/orm</li> </ul> </li> <li> <p>Ne pas exposer la racine d'un projet au niveau du serveur web :</p> <ul> <li>Exposer un dossier <code>mon-projet/public</code> contenant un <code>index.php</code> au niveau apache/nginx (\"document root\")</li> <li>Faire un dossier <code>mon-projet/src</code> pour les classes</li> <li>Faire un dossier s\u00e9par\u00e9 pour les fichiers de configuration (ex : <code>mon-projet/config</code> ou <code>mon-projet/app/config</code>)</li> </ul> </li> <li> <p>Ne pas stocker les fichiers t\u00e9l\u00e9vers\u00e9s par des utilisateurs dans un dossier expos\u00e9 par le serveur :</p> <ul> <li>Faire un dossier s\u00e9par\u00e9 pour stocker ces fichiers (ex : <code>mon-projet/data</code> ou <code>/var/mon-projet-data</code>)</li> <li>Streamer l'envoi du fichier lors du t\u00e9l\u00e9chargement en PHP</li> </ul> </li> </ul>"},{"location":"outils/php/php-cs-fixer/","title":"PHP-CS-Fixer - mise en forme automatique du code PHP","text":"<p>L'outil php-cs-fixer permet la mise en forme automatique du code en fonction de r\u00e8gles de codage. Son utilisation \u00e9vitera d'avoir un code mixant des styles diff\u00e9rents dans le formatage du code, dans l'initialisation des tableaux (<code>$tableau = []</code> ou <code>$tableau = array()</code>),...</p>"},{"location":"outils/php/php-cs-fixer/#mise-en-garde","title":"Mise en garde","text":"<ul> <li>Avoir une version trop r\u00e9cente de PHP peut poser probl\u00e8me pour utiliser cet outil (il leur faut naturellement un peu de temps pour traiter les nouvelles syntaxes PHP)</li> <li>Voir PHP-CS-Fixer - Supported PHP Versions (<code>PHP_CS_FIXER_IGNORE_ENV</code> requis en avril 2025 pour PHP 8.4)</li> </ul>"},{"location":"outils/php/php-cs-fixer/#installation","title":"Installation","text":"<pre><code># Pour tous les projets (php-cs-fixer --help)\ncomposer global require friendsofphp/php-cs-fixer\n# En d\u00e9pendance de dev d'un projet (vendor/bin/php-cs-fixer --help)\ncomposer require --dev friendsofphp/php-cs-fixer\n</code></pre>"},{"location":"outils/php/php-cs-fixer/#utilisation-en-ligne-de-commande","title":"Utilisation en ligne de commande","text":"<p>Si on choisit de s'appuyer sur les r\u00e8gles de codage de Symfony, il suffit de lancer la commande suivante pour forcer l'application des r\u00e8gles dans le dossier <code>src</code> :</p> <pre><code>php-cs-fixer fix src --rules @Symfony\n</code></pre> <p>Pour se contenter de valider les r\u00e8gles, il suffit de lancer la commande suivante :</p> <pre><code>php-cs-fixer fix src --rules $(PHP_CS_RULES) -v --dry-run --diff\n</code></pre>"},{"location":"outils/php/php-cs-fixer/#ressources","title":"Ressources","text":"<ul> <li>github.com - mborne/remote-git - Makefile : exemple de makefile facilitant la mise en oeuvre d'une int\u00e9gration continue (c.f. .github/workflows/ci.yml)</li> </ul>"},{"location":"outils/pico/","title":"pico","text":"<p>Installation de pico2wave et sox.</p>"},{"location":"outils/pico/#pre-requis","title":"Pr\u00e9-requis","text":"<p>aplay et audio configur\u00e9 :</p> <pre><code>sudo apt-get update\nsudo apt-get install -y alsa-utils pulseaudio\n</code></pre>"},{"location":"outils/pico/#installation","title":"Installation","text":"<p>pico/install.sh</p>"},{"location":"outils/pico/#utilisation","title":"Utilisation","text":"<p>Voir pico/say.sh :</p> <pre><code># Parler en fran\u00e7ais\nbash pico/say.sh \"La sauvegarde n'a pas fonctionn\u00e9\"\n\n# Parler en anglais\nTTS_LANG=en-US bash pico/say.sh \"Backup failed!\"\n</code></pre>"},{"location":"outils/pico/#resources","title":"Resources","text":"<ul> <li>www.framboise314.fr - Donnez la parole \u00e0 votre Raspberry Pi</li> </ul>"},{"location":"outils/piper/","title":"Piper","text":"<p>https://github.com/rhasspy/piper/ permet de convertir un texte en son.</p>"},{"location":"outils/piper/#installation","title":"Installation","text":"<ul> <li>piper/create-venv.sh assure l'installation dans <code>~/tts-venv</code>.</li> </ul>"},{"location":"outils/piper/#utilisation","title":"Utilisation","text":"<p>Voir piper/say.sh :</p> <pre><code>echo \"Bienvenue dans le monde de la synth\u00e8se vocale!\" | bash piper/say.sh\n</code></pre>"},{"location":"outils/piper/#ressources","title":"Ressources","text":"<ul> <li>https://rhasspy.github.io/piper-samples/</li> <li>https://huggingface.co/rhasspy/piper-voices/tree/v1.0.0/fr/fr_FR/upmc/medium</li> <li>ssamjh.nz - How to Create a Custom Piper TTS Voice</li> </ul>"},{"location":"outils/prefect/","title":"Prefect","text":"<p>Prefect est un orchestrateur de donn\u00e9es.</p>"},{"location":"outils/prefect/#installation","title":"Installation","text":"<ul> <li>docs.prefect.io - Installation</li> </ul> <pre><code># Installation de prefect\npip install -U prefect\n\n# Pour d\u00e9marrer le serveur en self-hosted sur http://localhost:4200\nprefect server start\n</code></pre>"},{"location":"outils/prefect/#utilisation","title":"Utilisation","text":"<ul> <li>docs.prefect.io - Quickstart</li> <li>docs.prefect.io - Examples</li> </ul>"},{"location":"outils/prefect/#quelques-notes","title":"Quelques notes","text":"<pre><code>prefect config set PREFECT_API_URL=\"http://127.0.0.1:4200/api\"\n</code></pre>"},{"location":"outils/prefect/#ressources","title":"Ressources","text":"<ul> <li>docs.prefect.io - Prefect server overview<ul> <li>docs.prefect.io - self hosted - CLI</li> <li>docs.prefect.io - self hosted - Docker</li> <li>docs.prefect.io - self hosted - Helm - prefect-worker / prefect-server</li> </ul> </li> </ul>"},{"location":"outils/python/","title":"Python","text":"","tags":["Langage"]},{"location":"outils/python/#gestion-des-dependances","title":"Gestion des d\u00e9pendances","text":"<ul> <li>pip</li> <li>PyPI</li> </ul>","tags":["Langage"]},{"location":"outils/python/#gestionnaires-denvironnements","title":"Gestionnaires d'environnements","text":"<ul> <li>uv</li> <li>virtualenv</li> <li>conda</li> </ul>","tags":["Langage"]},{"location":"outils/python/#maintenance","title":"Maintenance","text":"<ul> <li>devguide.python.org - Status of Python versions</li> </ul>","tags":["Langage"]},{"location":"outils/python/#calcul-et-le-traitement-dimage","title":"Calcul et le traitement d'image","text":"<ul> <li>NumPy<ul> <li>www.dataquest.io - NumPy Cheat Sheet</li> <li>github.com - mborne/numpy-experiments</li> </ul> </li> <li>Matplotlib pour l'affichage de graphiques math\u00e9matiques<ul> <li>Matplotlib - User Guide</li> <li>Matplotlib - Examples</li> </ul> </li> <li>SciPy extension de NumPy :<ul> <li>Interpolation</li> <li>Delaunay triangulation, convex hulls, and Voronoi diagrams</li> <li>Clustering</li> <li>...</li> </ul> </li> <li>opencv-python pour le traitement d'image, lecture camera,...</li> <li>Pandas lecture et traitement de donn\u00e9es</li> </ul>","tags":["Langage"]},{"location":"outils/python/#donnees-spatiales","title":"Donn\u00e9es spatiales","text":"<ul> <li>OWSLib pour acc\u00e8s aux services OGC (WFS, WMS,...)<ul> <li>examples/owslib/wfs-gpf-filtering.py</li> </ul> </li> <li>Shapely pour des calculs g\u00e9om\u00e9triques (bas\u00e9e sur GEOS).</li> <li>GeoPandas aggr\u00e9gation de plusieurs biblioth\u00e8ques.</li> <li>Rasterio pour les GeoTIFF.</li> <li>GDAL est un binding de la biblioth\u00e8que GDAL/OGR (version \"roots\" des autres biblioth\u00e8ques)</li> <li>pyproj offre des fonctionnalit\u00e9s de transformations de coordonn\u00e9es (binding PROJ4 pour Python).</li> </ul>","tags":["Langage"]},{"location":"outils/python/#rendu-cartographique","title":"Rendu cartographique","text":"<ul> <li>Folium assure le rendu des donn\u00e9es cartographiques en g\u00e9n\u00e9rant une carte Leaflet.</li> <li>Descartes assure le rendu des g\u00e9om\u00e9tries \u00e0 l'aide de matplotlib.</li> </ul>","tags":["Langage"]},{"location":"outils/python/#optimisation-et-machine-learning","title":"Optimisation et machine learning","text":"<ul> <li>pytorch</li> <li>scikit-learn</li> <li>tensorflow</li> </ul>","tags":["Langage"]},{"location":"outils/python/#divers","title":"Divers","text":"<ul> <li>jupyter<ul> <li>Project Jupyter Documentation</li> </ul> </li> <li>gradio<ul> <li>gradio - Quickstart</li> <li>gradio - Documentation</li> <li>gradio - Playground</li> </ul> </li> </ul>","tags":["Langage"]},{"location":"outils/python/#ressources","title":"Ressources","text":"<p>Pour d\u00e9buter :</p> <ul> <li>www.w3schools.com - Python Tutorial</li> <li>roadmap.sh - Python</li> <li>www.codewars.com - Kata en python</li> </ul> <p>Pour d\u00e9couvrir les biblioth\u00e8ques :</p> <ul> <li>medium.com/@chrieke - Essential geospatial Python libraries</li> </ul> <p>Pour la programmation fonctionnelle en python :</p> <ul> <li>www.analyticsvidhya.com - The power of Python Map, Reduce and Filter \u2013 Functional Programming for Data Science</li> </ul>","tags":["Langage"]},{"location":"outils/python/virtualenv/","title":"virtualenv","text":"<p>virtualenv est un outil permettant de cr\u00e9er des environements Python isol\u00e9.</p>"},{"location":"outils/python/virtualenv/#installation","title":"Installation","text":"<pre><code>sudo apt-get install python3-virtualenv\n</code></pre>"},{"location":"outils/python/virtualenv/#utilisation","title":"Utilisation","text":"<p>Par exemple, pour installer jupyter :</p> <pre><code># cr\u00e9ation d'un environnement virtuel\npython -m venv ~/jupyter-venv\n# activation de l'environnement virtuel\nsource ~/jupyter-venv/bin/activate\n\n# installation de jupyter dans l'environnement virtuel\npip install jupyter\n\n# d\u00e9marrage notebook (ouvrir l'URL qui s'affiche)\njupyter-notebook python/examples/jupyter-helloworld/\n\n# d\u00e9sactivation de l'environnement virtuel\ndeactivate\n</code></pre>"},{"location":"outils/python/virtualenv/#ressources","title":"Ressources","text":"<ul> <li>gist.github.com - mborne - Ansible dans un environnement virtuel Python</li> </ul>"},{"location":"outils/python/examples/opencv-calibration/","title":"opencv-calibration","text":"<p>Test de l'utilisation de OpenCV en Python pour calibrer une camera et redresser l'image (2019)</p>"},{"location":"outils/python/examples/opencv-calibration/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>Imprimer un \u00e9chiquier de 8x8</li> <li>Python 3</li> <li>OpenCV :</li> </ul> <pre><code>pip install opencv-python\n</code></pre>"},{"location":"outils/python/examples/opencv-calibration/#principe-de-fonctionnement","title":"Principe de fonctionnement","text":"<ul> <li>Capture des images de la webcam</li> <li>Calibration \u00e0 partir des premi\u00e8res photos de l'\u00e9chiquier</li> <li>Redressage de l'image apr\u00e8s calibration</li> </ul>"},{"location":"outils/python/examples/opencv-calibration/#utilisation","title":"Utilisation","text":"<pre><code>python main.py\n</code></pre>"},{"location":"outils/python/examples/opencv-calibration/#resources","title":"Resources","text":"<ul> <li>docs.opencv.org - Camera Calibration</li> </ul>"},{"location":"outils/python/examples/sierpenski/","title":"Sierpenski","text":"<p>G\u00e9n\u00e9ration de la fractale des triangles de Sierpenski en Python.</p>"},{"location":"outils/python/examples/sierpenski/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>Python 3</li> </ul>"},{"location":"outils/python/examples/sierpenski/#utilisation","title":"Utilisation","text":"<pre><code>python sierpenski.py  &gt; sierpenski.svg\n</code></pre>"},{"location":"outils/python/examples/sierpenski/#resultat","title":"R\u00e9sultat","text":""},{"location":"outils/qgis/","title":"QGIS","text":"<p>QGIS est un SIG libre avec un riche ensemble de fonctionnalit\u00e9s.</p>"},{"location":"outils/qgis/#installation","title":"Installation","text":"<ul> <li>qgis.org - Download QGIS for your platform</li> <li>qgis/install.sh proc\u00e8de \u00e0 l'installation pour Ubuntu en s'appuyant sur ppa:ubuntugis/ppa</li> </ul>"},{"location":"outils/qgis/#ressources","title":"Ressources","text":"<ul> <li>qgis/qgis-scale-tiles.xml permet d'\u00e9viter des probl\u00e8mes de r\u00e9-\u00e9chantillonage en alignant les niveaux de zoom avec ceux des pyramides webmercator (WMTS, TMS,...).</li> <li>qgis/helloworld-gpf.qgz est une carte d'exemple affichant des flux WMTS et WFS de la G\u00e9oplateforme :</li> </ul>"},{"location":"outils/rust/","title":"Rust","text":"<p>Rust est un langage de m\u00eame niveau que C++ qui produit un binaire natif qui s\u2019ex\u00e9cute directement sur l\u2019OS, sans interpr\u00e9teur ni machine virtuelle.</p>","tags":["Langage"]},{"location":"outils/rust/#points-forts","title":"Points forts","text":"<p>Contrairement \u00e0 C++, Rust impose des r\u00e8gles \u00e0 la compilation pour garantir :</p> <ul> <li>Une gestion stricte de la m\u00e9moire, gr\u00e2ce \u00e0 un mod\u00e8le de propri\u00e9t\u00e9 des variables qui encadre la possession,   l'emprunt et la dur\u00e9e de vie des donn\u00e9es (ce qui revient \u00e0 rendre obligatoire l'utilisation de pointeurs intelligents en C++).</li> <li>Une pr\u00e9vention des race conditions : le compilateur emp\u00eache que deux threads acc\u00e8dent simultan\u00e9ment \u00e0 une m\u00eame variable mutable, ce qui permet d\u2019\u00e9viter les verrous explicites tout en offrant plus de souplesse que l\u2019usage exclusif de variables immuables.</li> </ul>","tags":["Langage"]},{"location":"outils/rust/#installation","title":"Installation","text":"<p>Voir www.rust-lang.org - Install :</p> <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre>","tags":["Langage"]},{"location":"outils/rust/#construction-et-gestion-de-dependances","title":"Construction et gestion de d\u00e9pendances","text":"<ul> <li>rustc est le compilateur Rust.</li> <li>cargo assure la gestion des d\u00e9pendances et la construction des applications.</li> <li>crates.io est le principal d\u00e9p\u00f4t de d\u00e9pendances publiques.                |</li> </ul>","tags":["Langage"]},{"location":"outils/rust/#quelques-exemples","title":"Quelques exemples","text":"<ul> <li>basic-examples - Des exemples r\u00e9dig\u00e9s pour d\u00e9couvrir le langage.</li> <li>wkt-generator - Un exemple r\u00e9dig\u00e9 pour prise en main de Cargo.</li> </ul>","tags":["Langage"]},{"location":"outils/rust/#ressources","title":"Ressources","text":"<ul> <li>doc.rust-lang.org - The Rust Programming Language permet une d\u00e9couverte progressive du langage et de ces concepts.</li> <li>doc.rust-lang.org - Cargo Guide</li> </ul>","tags":["Langage"]},{"location":"outils/rust/basic-examples/","title":"Rust - Quelques exemples r\u00e9dig\u00e9s pour d\u00e9couvrir le langage","text":""},{"location":"outils/rust/basic-examples/#usage","title":"Usage","text":"<pre><code>rustc print-vars.rs\n./print-vars \"john doe\" 45\n</code></pre>"},{"location":"outils/rust/basic-examples/#prise-en-main","title":"Prise en main","text":"<ul> <li>helloworld.rs : Affichage de \"Hello world!\" dans la console.</li> <li>mutability.rs : Illustration de l'utilisation de <code>mut</code> pour les variables</li> <li>arrays.rs : Manipulation de tableaux</li> </ul>"},{"location":"outils/rust/basic-examples/#basic-io","title":"Basic IO","text":"<ul> <li>print-vars.rs : Lecture des param\u00e8tres de la ligne de commande</li> </ul>"},{"location":"outils/rust/basic-examples/#generics","title":"Generics","text":"<ul> <li>generics.rs : Fonction g\u00e9n\u00e9rique pour le calcul du carr\u00e9 d'un nombre.</li> </ul>"},{"location":"outils/rust/wkt-generator/","title":"wkt-generator - g\u00e9n\u00e9ration d'un tableau de ponctuel pour prise en main de cargo","text":""},{"location":"outils/rust/wkt-generator/#utilisation","title":"Utilisation","text":"<pre><code># ex\u00e9cuter le programme\ncargo run 10\n\n# construire le programme\ncargo build\n./target/release/wkt-generator\n</code></pre>"},{"location":"outils/rust/wkt-generator/#bonus","title":"Bonus","text":"<p>Produire un fichier demo-points.csv pouvant \u00eatre lu par QGIS et GDAL - CSV :</p> <pre><code># produire un fichier pour QGIS\n./target/release/wkt-generator 10 &gt; demo-points.csv\n</code></pre>"},{"location":"outils/terraform/","title":"Terraform","text":"<p>Terraform est un outil Infrastructure as code (IaC) d\u00e9velopp\u00e9 par HashiCorp.</p>"},{"location":"outils/terraform/#installation","title":"Installation","text":"<ul> <li>learn.hashicorp.com - Install Terraform : Proc\u00e9dure d'installation de l'ex\u00e9cutable.</li> <li>terraform/install.sh</li> </ul>"},{"location":"outils/terraform/#points-cles","title":"Points cl\u00e9s","text":"<ul> <li>L'infrastructure est d\u00e9crite dans un dossier \u00e0 l'aide de fichiers HCL (voir registry.terraform.io - google_compute_instance - Example Usage)</li> <li>Les providers correspondent aux syst\u00e8mes cibles (AWS, Azure, GCP,...)</li> </ul>"},{"location":"outils/terraform/#principales-commandes","title":"Principales commandes","text":"Commande Description terraform init Pr\u00e9paration du r\u00e9pertoire de travail (t\u00e9l\u00e9chargement des modules &amp; co) terraform validate Contr\u00f4le du fichier de configuration terraform plan Visualisation des changements \u00e0 appliquer sur l'infrastructure terraform apply Cr\u00e9ation ou modification de l'infrastructure terraform destroy Destruction de l'infrastructure"},{"location":"outils/terraform/#quelques-fournisseurs","title":"Quelques fournisseurs","text":"<p>La page registry.terraform.io - providers mets en avant les principaux fournisseurs de cloud public :</p> <ul> <li>AWS d'Amazon</li> <li>Azure de Microsoft</li> <li>Google Cloud Platform</li> </ul> <p>Nous trouvons aussi les clouders europ\u00e9ens :</p> <ul> <li>OVHcloud</li> <li>Scaleway pour https://www.scaleway.com.</li> <li>Hetzner Cloud Provider pour https://www.hetzner.com/cloud</li> </ul> <p>Ainsi que des environnements d'ex\u00e9cution suivants :</p> <ul> <li>kubernetes</li> <li>docker</li> </ul>"},{"location":"outils/terraform/#alternatives","title":"Alternatives","text":"<ul> <li>OpenTofu qui est un fork de Terraform suite \u00e0 un changement de licence.</li> <li>Vagrant pour les environnements de d\u00e9veloppement.</li> </ul>"},{"location":"outils/terraform/#ressources","title":"Ressources","text":"<ul> <li>blog.stephane-robert.info - Formation de A \u00e0 Z sur Terraform</li> <li>roadmap.sh - Terraform</li> <li>registry.terraform.io - Providers</li> <li>www.vagrantup.com - Vagrant vs. Terraform</li> </ul>"},{"location":"outils/torch/","title":"torch","text":""},{"location":"outils/torch/#installation","title":"Installation","text":"<ul> <li>Cr\u00e9er un environnement \"torch\"</li> </ul> <pre><code>conda create --name torch \nconda activate torch\n</code></pre> <ul> <li>Installer pytorch avec CUDA</li> </ul> <p>pytorch.org - Get Started - Start Locally</p> <pre><code>conda install pytorch torchvision torchaudio pytorch-cuda=12.4 -c pytorch -c nvidia\n</code></pre>"},{"location":"outils/trivy/","title":"Trivy","text":"<p>Trivy est un scanner de vuln\u00e9rabilit\u00e9s capable entre autres de scanner des images de conteneur ou un OS pour y d\u00e9tecter des d\u00e9pendances vuln\u00e9rables.</p>"},{"location":"outils/trivy/#installation","title":"Installation","text":"<ul> <li>trivy.dev - Getting Started</li> <li>trivy/install.sh proc\u00e8de au t\u00e9l\u00e9chargement \u00e0 l'installation du .deb :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/trivy/install.sh | bash\n</code></pre>"},{"location":"outils/trivy/#utilisation","title":"Utilisation","text":"<p>Pour afficher l'aide :</p> <pre><code># pour les sous-commandes\ntrivy --help\n# pour l'aide au scan d'image\ntrivy image --help\n</code></pre> <p>Pour scanner une image :</p> <pre><code>trivy image --scanners vuln --severity HIGH,CRITICAL php:7.4\n</code></pre> <p></p>"},{"location":"outils/trivy/#ressources","title":"Ressources","text":"<ul> <li>github.com - aquasecurity/trivy</li> <li>aquasecurity.github.io - trivy - documentation</li> </ul>"},{"location":"outils/ufw/","title":"UFW - Uncomplicated Firewall","text":""},{"location":"outils/ufw/#contexte","title":"Contexte","text":"<p>Avec une boxe IPV6 et aucun pare-feu, il est trivial de se connecter aux ports ouverts de la machine qui est routable depuis internet. De m\u00eame, si vous avez un serveur expos\u00e9 sur internet, il est indispensable de bloquer les ports qui n'ont pas vocation \u00e0 \u00eatre accessible depuis internet.</p> <p>C'est l\u00e0 que UFW (Uncomplicated Firewall) rend service. Il permet de configurer plus facilement le pare-feu local d'en travaillant directement avec iptables.</p>"},{"location":"outils/ufw/#installation","title":"Installation","text":"<pre><code>sudo apt-get update\nsudo apt-get install ufw\n</code></pre>"},{"location":"outils/ufw/#exemple-de-configuration","title":"Exemple de configuration","text":"<pre><code># d\u00e9sactivation du pare-feu\nsudo ufw disable\n\n# mode par d\u00e9faut\nsudo ufw default allow\n\n# autorisation traffic sortant par d\u00e9faut\nsudo ufw default allow outgoing\n# blocage traffic entrant par d\u00e9faut\nsudo ufw default deny incoming\n\n# autorisation traffic entrant sur port 22 (SSH)\nsudo ufw allow in 22/tcp\n\n# activation du pare-feu\nsudo ufw enable\n\n# statut avec r\u00e8gles par d\u00e9faut\nsudo ufw status verbose\n\n# activation des logs\nsudo ufw logging on\n# suivi des logs\ntail -f /var/log/ufw.log\n</code></pre>"},{"location":"outils/ufw/#ressources","title":"Ressources","text":"<ul> <li>doc.ubuntu-fr.org - Uncomplicated Firewall</li> <li>debian-facile.org - UFW un pare-feu facile</li> <li>mborne/ansible-ufw pour une installation et configuration avec ansible.</li> </ul>"},{"location":"outils/vagrant/","title":"Vagrant","text":"<p>Vagrant est un outil open source qui permet de cr\u00e9er des machines virtuelles de mani\u00e8re simple et reproductible.</p>"},{"location":"outils/vagrant/#points-cles","title":"Points cl\u00e9s","text":"<ul> <li>Vagrant est principalement utilis\u00e9 pour cr\u00e9er des machines virtuelles de DEV \u00e0 partir d'un fichier <code>Vagrantfile</code> (i.e. as code).</li> <li>Vagrant supporte plusieurs syst\u00e8mes de virtualisation tels VirtualBox et VMware (voir www.vagrantup.com - providers)</li> <li>Vagrant s'appuie sur des images de VM au format <code>.box</code></li> <li>Un d\u00e9p\u00f4t d'image publique permet de rechercher une image de VM compatible avec son syst\u00e8me de virtualisation (<code>virtualbox</code>, <code>libvirt</code> (KVM),...)</li> </ul>"},{"location":"outils/vagrant/#installation","title":"Installation","text":"<ul> <li>https://www.vagrantup.com/downloads permet le t\u00e9l\u00e9chargement pour Windows et MacOS et donne les instructions pour l'utilisation du d\u00e9p\u00f4t APT pour l'installation sur une machine Debian/Ubuntu</li> <li>vagrant/install.sh installe l'ex\u00e9cutable vagrant en ajoutant au besoin le d\u00e9p\u00f4t hashicorp :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/vagrant/install.sh | bash\n</code></pre> <ul> <li>vagrant/install-vagrant-libvirt.sh assure l'installation du plugin \"vagrant-libvirt\" pour KVM :</li> </ul> <pre><code>curl -sS https://mborne.github.io/outils/vagrant/install-vagrant-libvirt.sh | bash\n</code></pre>"},{"location":"outils/vagrant/#utilisation","title":"Utilisation","text":"<p>Voir :</p> <ul> <li>Vagrant - TP de prise en main de Vagrant dans le cadre du cours DevOps avec des VM.</li> <li>Les commandes ci-apr\u00e8s qui illustrent la cr\u00e9ation et l'utilisation d'un fichier pour cr\u00e9er une VM jetable :</li> </ul> <pre><code># Si vagrant dans WSL2\nexport VAGRANT_WSL_ENABLE_WINDOWS_ACCESS=\"1\"\n\n# Si utilisation de KVM\nexport VAGRANT_DEFAULT_PROVIDER=libvirt\n\n# Pr\u00e9paration d'un dossier pour la VM\nmkdir vagrant/helloworld\ncd vagrant/helloworld\n\n# Cr\u00e9ation du Vagrantfile dans ce dossier\n# NB : KVM non support\u00e9 par ubuntu/jammy64\nvagrant init generic/ubuntu2204\n\n# Afficher l'aide de vagrant\nvagrant -h\n\n# D\u00e9marrage de la VM\nvagrant up\n\n# Ouverture d'un terminal\nvagrant ssh\n</code></pre>"},{"location":"outils/vagrant/#ressources","title":"Ressources","text":"<ul> <li>Vagrant - TP de prise en main de Vagrant</li> <li>Vagrant - getting started qui guide pour d\u00e9buter en l'absence d'un proxy HTTP (par exemple sur une machine perso connect\u00e9e \u00e0 une box internet standard).</li> <li>app.vagrantup.com - Discover Vagrant Boxes</li> <li>gist.github.com - wpscholar/vagrant-cheat-sheet.md qui liste les principales commandes de vagrant.</li> </ul>"},{"location":"outils/vagrant/#remarques","title":"Remarques","text":"<ul> <li>code.gouv.fr - SILL - Vagrant mentionne que l'outil n'est plus recommand\u00e9 depuis le 25 septembre 2023 suite \u00e0 un changement de licence.</li> <li>A ce titre, il serait probablement pertinent de basculer sur multipass + cloud-init dans le cadre du cours DevOps avec des VM o\u00f9 Vagrant est pr\u00e9sent\u00e9 pour illustrer la cr\u00e9ation de VM as code.</li> <li>Nous voyons toutefois par la suite DevOps avec des conteneurs et ces derniers sont d\u00e9sormais largement plus utilis\u00e9 que les VM pour les environnements de DEV.</li> </ul>"},{"location":"outils/vagrant/prise-en-main/","title":"TP de prise en main de Vagrant","text":""},{"location":"outils/vagrant/prise-en-main/#pre-requis","title":"Pr\u00e9-requis","text":"<ul> <li>VirtualBox</li> <li>Vagrant</li> </ul> <p>Si besoin d'utiliser un proxy sortant (pas n\u00e9cessaire \u00e0 l'ENSG):</p> <ul> <li>Installer le plugin vagrant-proxyconf :</li> </ul> <pre><code>vagrant plugin install vagrant-proxyconf\n</code></pre> <ul> <li>Configurer au besoin les variables d'environnement pour le proxy </li> </ul>"},{"location":"outils/vagrant/prise-en-main/#creer-un-fichier-vagrantfile","title":"Cr\u00e9er un fichier Vagrantfile","text":"<p>Les commandes ci-apr\u00e8s illustre la cr\u00e9ation d'un fichier vagrant/helloworld/Vagrantfile :</p> <pre><code># on cr\u00e9\u00e9 un dossier pour le projet\nmkdir ~/vagrant-helloworld\n# on se place dans le projet\ncd ~/vagrant-helloworld\n# G\u00e9n\u00e9rer un mod\u00e8le de Vagrantfile\nvagrant init ubuntu/focal64\n</code></pre>"},{"location":"outils/vagrant/prise-en-main/#adapter-la-configuration","title":"Adapter la configuration","text":"<p>Le fichier Vagrantfile g\u00e9n\u00e9r\u00e9 est comment\u00e9. Il pourra \u00eatre adapt\u00e9 comme suit :</p> <pre><code># -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/focal64\"\n  config.vm.hostname = \"helloworld\"\n\n  #--------------------------------------------------------\n  # Passage de HTTP_PROXY, HTTPS_PROXY,... \u00e0 la VM\n  # avec le plugin vagrant-proxyconf\n  #--------------------------------------------------------\n  if Vagrant.has_plugin?(\"vagrant-proxyconf\")\n    if ENV[\"http_proxy\"]\n      puts \"http_proxy: \" + ENV[\"http_proxy\"]\n      config.proxy.http   = ENV[\"http_proxy\"]\n    end\n    if ENV[\"https_proxy\"]\n      puts \"https_proxy: \" + ENV[\"https_proxy\"]\n      config.proxy.https  = ENV[\"https_proxy\"]\n    end\n    if ENV[\"no_proxy\"]\n      config.proxy.no_proxy = ENV[\"no_proxy\"]\n    end\n  else\n    puts \"proxy not configured (use 'vagrant plugin install vagrant-proxyconf')\"\n  end\n\n  #--------------------------------------------------------\n  # Ajout d'une IP fixe avec un r\u00e9seau priv\u00e9\n  # (le m\u00eame que vagrantbox)\n  #--------------------------------------------------------\n  config.vm.network \"private_network\", ip: \"192.168.50.101\"\n\n  #--------------------------------------------------------\n  # Personnalisation de la VM VirtualBox\n  #--------------------------------------------------------\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.name = \"helloworld\"\n    vb.memory = \"1024\"\n    # vb.gui = true\n  end\n\n  #--------------------------------------------------------\n  # Ex\u00e9cution d'un script d'initialisation\n  # (dans cours-devops, nous traitons plut\u00f4t avec ansible)\n  #--------------------------------------------------------\n  # config.vm.provision \"shell\", inline: &lt;&lt;-SHELL\n  #   apt-get update\n  #   apt-get install -y apache2\n  # SHELL\nend\n</code></pre>"},{"location":"outils/vagrant/prise-en-main/#demarrer-la-vm","title":"D\u00e9marrer la VM","text":"<pre><code>vagrant up\n</code></pre>"},{"location":"outils/vagrant/prise-en-main/#problemes-possibles","title":"Probl\u00e8mes possibles","text":"<ul> <li>Sous ubuntu, la plage IP correspondante devra \u00eatre autoris\u00e9e via le fichier <code>/etc/vbox/networks.conf</code>. S'il est absent, ajouter le contenu suivant :</li> </ul> <pre><code>* 192.168.50.0/24\n</code></pre> <ul> <li>Sous windows, la cr\u00e9ation du r\u00e9seau priv\u00e9 virtual (<code>192.168.50.0/24</code>) avant affectation de l'IP <code>192.168.50.101</code> demandera des droits administrateurs.</li> </ul>"},{"location":"outils/vagrant/prise-en-main/#installer-manuellement-le-serveur-web-nginx","title":"Installer manuellement le serveur web nginx","text":"<pre><code># Se connecter \u00e0 la VM\nvagrant ssh\n# Puis dans la VM\nsudo apt-get update\nsudo apt-get install nginx\n</code></pre>"},{"location":"outils/vagrant/prise-en-main/#verifier-lacces-a-nginx","title":"V\u00e9rifier l'acc\u00e8s \u00e0 nginx","text":"<p>Depuis l'h\u00f4te de la VM, nous aurons normalement acc\u00e8s http://192.168.50.101</p>"},{"location":"outils/vagrant/prise-en-main/#supprimer-la-vm","title":"Supprimer la VM","text":"<pre><code>vagrant destroy\n</code></pre>"},{"location":"outils/wireguard/","title":"wireguard","text":""},{"location":"outils/wireguard/#mise-en-garde","title":"Mise en garde","text":"<p>Notes relatives \u00e0 un test de montage d'un VPN entre une VM en ligne et un raspberry sur un r\u00e9seau domestique (id\u00e9e abandonn\u00e9e)</p>"},{"location":"outils/wireguard/#installation","title":"Installation","text":"<pre><code># installation\nsudo apt install wireguard\n# resolvconf command not found\nsudo apt install openresolv\n</code></pre>"},{"location":"outils/wireguard/#utilisation","title":"Utilisation","text":"<pre><code># d\u00e9marrage avec /etc/wireguard/wg0.conf\nsudo wg-quick up wg0\n# statut\nsudo wg show wg0\n# arr\u00eat\nsudo wg-quick down wg0\n</code></pre>"},{"location":"outils/wsl/","title":"Windows Subsystem for Linux (WSL)","text":"","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#activation","title":"Activation","text":"<p>Voir blog.stephane-robert.info - Installer WSL 2 sur Windows 11</p>","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#installation","title":"Installation","text":"<pre><code># Installation en console administrateur\nwsl --install\n\n# Utiliser la version 2 par d\u00e9faut\nwsl --set-default-version 2\n\n# V\u00e9rifier que tout est OK\nwsl --status\n# demandera peut-\u00eatre d'activer le service \"Plateforme d\u2019ordinateur virtuel\" avec :\n# wsl.exe --install --no-distribution\n</code></pre>","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#utilisation","title":"Utilisation","text":"<pre><code># Lister les distributions disponibles\nwsl --list --online\n\n# Installer la distribution ubuntu\nwsl --install -d Ubuntu-24.04\n\n# D\u00e9marrer la distribution ubuntu\nwsl --distribution Ubuntu-24.04 --user ubuntu\n\n# Arr\u00eat\nwsl --shutdown\n\n# Suppression\nwsl --terminate Ubuntu-24.04\nwsl --unregister Ubuntu-24.04\n</code></pre>","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#configuration","title":"Configuration","text":"<p>!!!warning Attention!     - Il y a deux fichiers <code>/etc/wsl.conf</code> (toujours pr\u00e9sent) et <code>/etc/wsl2.conf</code> (\u00e0 cr\u00e9er au besoin)     - Il faut rebooter pour prise en compte des changements (<code>wsl --shutdown &amp;&amp; wsl</code>)</p>","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#virtualisation-imbriquee","title":"Virtualisation imbriqu\u00e9e","text":"<p>Par exemple, pour KVM, il faudra l'activer comme suit dans <code>/etc/wsl2.conf</code> :</p> <pre><code>[boot]\nsystemd=true\n\n[wsl2]\nnestedVirtualization=true\n</code></pre>","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#configuration-manuelle-du-dns","title":"Configuration manuelle du DNS","text":"<p>Dans <code>/etc/wsl.conf</code> :</p> <pre><code>[network]\ngenerateHosts = true\ngenerateResolvConf = false\n</code></pre> <ul> <li>Dans <code>/etc/resolv.conf</code> :</li> </ul> <pre><code>nameserver 1.1.1.1\nnameserver 1.0.0.1\n</code></pre>","tags":["Virtualisation","Windows"]},{"location":"outils/wsl/#ressources","title":"Ressources","text":"<ul> <li>learn.microsoft.com - Comment installer Linux sur Windows avec WSL</li> <li>learn.microsoft.com - Commandes de base pour WSL</li> <li>learn.microsoft.com - Example .wslconfig file</li> </ul>","tags":["Virtualisation","Windows"]},{"location":"veille/","title":"La veille techno","text":"<p>Quelles ressources int\u00e9ressantes pour suivre les \u00e9volutions ou se mettre \u00e0 jour sur diff\u00e9rentes th\u00e9matiques.</p>"},{"location":"veille/#generalites","title":"G\u00e9n\u00e9ralit\u00e9s","text":"<ul> <li>medium.com contient de nombreux articles int\u00e9ressants en particulier sur les questions d'architecture.</li> <li>blog.octo.com traite avec brio diverses th\u00e9matiques (strat\u00e9gie SI, DevOps, tests, donn\u00e9es,...)</li> <li>roadmap.sh permet de le tour des concepts et outils \u00e0 conna\u00eetre avec un ordre d'apprentissage sur diff\u00e9rentes th\u00e9matiques.</li> <li>Le Socle Interminist\u00e9riel de Logiciels Libres (SILL) permet de faire le tour des outils libres utilis\u00e9s dans l'administration.</li> <li>Docker Hub permet de d\u00e9couvrir des outils qui sont massivement utilis\u00e9s par d'autres.</li> <li>GitHub - Trending permet de surveiller les d\u00e9p\u00f4ts en forte progression.</li> <li>GitHub - Collections permet de d\u00e9couvrir les d\u00e9p\u00f4ts int\u00e9ressants par th\u00e8me.</li> </ul>"},{"location":"veille/#devops","title":"DevOps","text":"<ul> <li>blog.stephane-robert.info est une mine d'or pour progresser sur le sujet DevSecOps que l'on soit un DEV, un OPS ou un SEC.</li> <li>roadmap.sh - DevOps permet de faire le tour d'un ensemble de concepts et outils</li> </ul>"},{"location":"veille/#architecture-logicielle","title":"Architecture logicielle","text":"<ul> <li>roadmap.sh - Software Architect</li> <li>roadmap.sh - System Design</li> <li>roadmap.sh - Software Design and Architecture</li> <li>vocal.media - Infographic for Software Architecture History donne une vue historique int\u00e9ressante de l'assembleur en 1951 \u00e0 gRPC en 2016.</li> </ul>"},{"location":"veille/#geomatique","title":"G\u00e9omatique","text":"<ul> <li>www.ogc.org - Standards pour une vue d'ensemble des standards de OGC (WMTS / OGC API \u2013 Tiles, WFS / OGC API Feature,...)</li> <li>georezo.net</li> <li>www.openstreetmap.fr - actualites</li> <li>geoservices.ign.fr - actualit\u00e9s</li> <li>cartes.gouv.fr - actualit\u00e9</li> <li>forum.geocommuns.fr</li> <li>www.developpez.net - Forum SIG : Syst\u00e8me d'information G\u00e9ographique</li> </ul>"}]}